INFO:     Will watch for changes in these directories: ['/Users/naman/Enculture-Intelligence-Platform/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [21437] using WatchFiles
INFO:     Started server process [21447]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: p4ASHeNhT/4AZuIeWm62zg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56535) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
2025-09-07 16:46:04 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 16:46:04 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: FqUccOAcIaGVWGoQBlYFLiq4bQg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 23:46:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:04.528131"}' [128 bytes]
INFO:     127.0.0.1:56532 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:56537 - "GET /health HTTP/1.1" 200 OK
2025-09-07 16:46:04 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 16:46:04 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 16:46:04 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1166a97f0>
2025-09-07 16:46:04 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1166a97f0>
2025-09-07 16:46:04 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11008d890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 16:46:04 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11008d890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 16:46:04 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11661d130>
2025-09-07 16:46:04 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11661d130>
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 16:46:04 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 23:46:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_d383b0d9634fe3c20e64d4c028699c4c'), (b'openai-processing-ms', b'7418'), (b'x-envoy-upstream-service-time', b'7420'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=bwbGaHl1eLJQPDIIokXPUDY4oh63leiITezEIAT2va4-1757288772-1.0.1.1-FjbwXIUy9Df9eApXc_vv1b1r3D.zZN3TuNBbZhexYGudROMkVPghetnZ1ylJMm1gJhgOMhvNT5VzmnR74FB4y..BfOYQTBEWrvY8iO2R4Cc; path=/; expires=Mon, 08-Sep-25 00:16:12 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5p8gbcWby.uiVu4GlbZ8lbGZ3F4PkB.E3iNm78b5RPE-1757288772512-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba155d2e9576d4-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 23:46:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_d383b0d9634fe3c20e64d4c028699c4c'), (b'openai-processing-ms', b'7418'), (b'x-envoy-upstream-service-time', b'7420'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=bwbGaHl1eLJQPDIIokXPUDY4oh63leiITezEIAT2va4-1757288772-1.0.1.1-FjbwXIUy9Df9eApXc_vv1b1r3D.zZN3TuNBbZhexYGudROMkVPghetnZ1ylJMm1gJhgOMhvNT5VzmnR74FB4y..BfOYQTBEWrvY8iO2R4Cc; path=/; expires=Mon, 08-Sep-25 00:16:12 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5p8gbcWby.uiVu4GlbZ8lbGZ3F4PkB.E3iNm78b5RPE-1757288772512-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba155d2e9576d4-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56539 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:56598 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 16:46:12 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 6fd42166-4c46-47dc-aa1f-24fa1710eb56
2025-09-07 16:46:12 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 6fd42166-4c46-47dc-aa1f-24fa1710eb56
INFO:     127.0.0.1:56600 - "POST /api/v1/chat/stream-with-thread?thread_id=6fd42166-4c46-47dc-aa1f-24fa1710eb56&prompt=hello HTTP/1.1" 200 OK
2025-09-07 16:46:12 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 16:46:12 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 16:46:12 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 16:46:12 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 23:46:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_971ca219f7aa437b8074d2bbed836375'), (b'openai-processing-ms', b'2094'), (b'x-envoy-upstream-service-time', b'2098'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba158eafd376d4-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 23:46:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_971ca219f7aa437b8074d2bbed836375'), (b'openai-processing-ms', b'2094'), (b'x-envoy-upstream-service-time', b'2098'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba158eafd376d4-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 16:46:15 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 16:46:16 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 16:46:18 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 16:46:18 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 16:46:18 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 16:46:18 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:56651 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: z0SMX7yGAPDGVYM/ii0SVg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56653) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 16:46:18 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 16:46:18 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:56651 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4fsGyAJJTrlp7yLvRY6lSpVis4g=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 23:46:18 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:18.908400"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XYih0GSSx+Ibo7ro1oHBag==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56657) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 16:46:18 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 16:46:18 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:18.927492"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: RlMv7s9gw0p4wUYR6qTFwuULShY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 23:46:18 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:18.927492"}' [128 bytes]
INFO:     127.0.0.1:56651 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:56655 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c ef df cd [binary, 4 bytes]
DEBUG:    < PONG 2c ef df cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a bc a9 c4 [binary, 4 bytes]
DEBUG:    < PONG 3a bc a9 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56710 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: lp1gd8tRz5HuXhBzY6Pfig==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56712) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 16:46:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 16:46:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:40.251727"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ZnOFN1+UO5sYTwdUUaABYPJa4o0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 23:46:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:40.251727"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:40.251727"}' [128 bytes]
INFO:     127.0.0.1:56710 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XXRFIutlXw1fytY7Wj/YgA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56714) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 16:46:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 16:46:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:40.316321"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:40.316321"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:40.316321"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: UruKAsCBH1ZvR2oQSLx2APe7ftk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 23:46:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:46:40.316321"}' [128 bytes]
INFO:     127.0.0.1:56710 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:56710 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757288809523}' [46 bytes]
2025-09-07 16:46:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288809523}
2025-09-07 16:46:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288809523}
INFO:     127.0.0.1:56721 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 4b 33 50 [binary, 4 bytes]
DEBUG:    < PONG c5 4b 33 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 4f 3a d2 [binary, 4 bytes]
DEBUG:    < PONG 01 4f 3a d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 ef 52 93 [binary, 4 bytes]
DEBUG:    < PONG b2 ef 52 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 0d a0 13 [binary, 4 bytes]
DEBUG:    < PONG af 0d a0 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56725 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757288831778}' [46 bytes]
2025-09-07 16:47:11 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288831778}
2025-09-07 16:47:11 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288831778}
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 6f 55 77 [binary, 4 bytes]
DEBUG:    < PONG af 6f 55 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 69 1c ad [binary, 4 bytes]
DEBUG:    < PONG 61 69 1c ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757288839521}' [46 bytes]
2025-09-07 16:47:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288839521}
2025-09-07 16:47:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288839521}
INFO:     127.0.0.1:56730 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d d0 db 6a [binary, 4 bytes]
DEBUG:    < PONG 3d d0 db 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'R3R\x1e' [text, 4 bytes]
DEBUG:    < PONG 'R3R\x1e' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XYudE6PRbK7yUJw3SD0p6w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56735) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 16:47:29 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 16:47:29 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: yZN0cSXedCHhtM6H/pORGHWZNQA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 23:47:29 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:47:29.642033"}' [128 bytes]
2025-09-07 16:47:29 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 16:47:29 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 16:47:29 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 16:47:29 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 d6 57 76 [binary, 4 bytes]
DEBUG:    < PONG 53 d6 57 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 da 92 59 [binary, 4 bytes]
DEBUG:    < PONG b5 da 92 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 b4 0c 0a [binary, 4 bytes]
DEBUG:    < PONG 24 b4 0c 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56738 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757288869522}' [46 bytes]
2025-09-07 16:47:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288869522}
2025-09-07 16:47:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288869522}
INFO:     127.0.0.1:56740 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 39 a2 45 d8 [binary, 4 bytes]
DEBUG:    < PONG 39 a2 45 d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab e1 28 70 [binary, 4 bytes]
DEBUG:    < PONG ab e1 28 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 ea 31 9a [binary, 4 bytes]
DEBUG:    < PONG 01 ea 31 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd 32 c9 b2 [binary, 4 bytes]
DEBUG:    < PONG fd 32 c9 b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757288882372}' [46 bytes]
2025-09-07 16:48:02 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757288882372}
2025-09-07 16:48:02 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757288882372}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 81 fb a8 [binary, 4 bytes]
DEBUG:    < PONG 11 81 fb a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56744 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:56748 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 60 16 ad [binary, 4 bytes]
DEBUG:    < PONG 82 60 16 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 cc da ad [binary, 4 bytes]
DEBUG:    < PONG 76 cc da ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757288899030}' [46 bytes]
2025-09-07 16:48:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288899030}
2025-09-07 16:48:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288899030}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e d2 0a ea [binary, 4 bytes]
DEBUG:    < PONG 6e d2 0a ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 e6 7a 0e [binary, 4 bytes]
DEBUG:    < PONG 93 e6 7a 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757288912138}' [46 bytes]
2025-09-07 16:48:32 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757288912138}
2025-09-07 16:48:32 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757288912138}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c 60 65 da [binary, 4 bytes]
DEBUG:    < PONG 4c 60 65 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 8b e5 41 [binary, 4 bytes]
DEBUG:    < PONG 43 8b e5 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 16:48:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 16:48:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 16:48:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 16:48:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 16:48:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 16:48:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 16:48:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 16:48:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     connection closed
INFO:     127.0.0.1:56762 - "OPTIONS /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
2025-09-07 16:48:40 - app.api.v1.endpoints.chat - INFO - Generating survey template for: make a survey about employee satisfaction...
2025-09-07 16:48:40 - app.api.v1.endpoints.chat - INFO - Generating survey template for: make a survey about employee satisfaction...
2025-09-07 16:48:40 - httpcore.connection - DEBUG - close.started
2025-09-07 16:48:40 - httpcore.connection - DEBUG - close.started
2025-09-07 16:48:40 - httpcore.connection - DEBUG - close.complete
2025-09-07 16:48:40 - httpcore.connection - DEBUG - close.complete
2025-09-07 16:48:40 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 16:48:40 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 16:48:40 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116af58b0>
2025-09-07 16:48:40 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116af58b0>
2025-09-07 16:48:40 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11008d890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 16:48:40 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11008d890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 16:48:40 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11585d370>
2025-09-07 16:48:40 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11585d370>
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 16:48:40 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 23:48:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449130'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'115ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_31135985b8ce00f20a6a5cf1c4100064'), (b'openai-processing-ms', b'5678'), (b'x-envoy-upstream-service-time', b'5681'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba19270c57767e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 23:48:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449130'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'115ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_31135985b8ce00f20a6a5cf1c4100064'), (b'openai-processing-ms', b'5678'), (b'x-envoy-upstream-service-time', b'5681'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba19270c57767e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 16:48:45 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56762 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
INFO:     127.0.0.1:56762 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757288929030}' [46 bytes]
2025-09-07 16:48:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288929030}
2025-09-07 16:48:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757288929030}
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 6a 0d aa [binary, 4 bytes]
DEBUG:    < PONG fc 6a 0d aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f f3 77 9a [binary, 4 bytes]
DEBUG:    < PONG 9f f3 77 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 16:49:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 16:49:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 16:49:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 16:49:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:56777 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: imQUS9D9Pg/ffPNecmX3MA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56779) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 16:49:09 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 16:49:09 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:49:09.480497"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: EDsla5cTHdCAxWIWqSVNPusDL+Q=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 23:49:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:49:09.480497"}' [128 bytes]
INFO:     127.0.0.1:56777 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: arIUJ8AYC5fwVG9FMFdkJg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56785) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 16:49:16 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 16:49:16 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: isHY38o5R5GQeHP4X5dJMwVObIM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 23:49:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T16:49:16.951282"}' [128 bytes]
2025-09-07 16:49:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 16:49:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 16:49:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 16:49:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'ËŽFV' [text, 4 bytes]
DEBUG:    < PONG 'ËŽFV' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '2Ø¥?' [text, 4 bytes]
DEBUG:    < PONG '2Ø¥?' [text, 4 bytes]
DEBUG:    % received keepalive pong
