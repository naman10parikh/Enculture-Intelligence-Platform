INFO:     Will watch for changes in these directories: ['/Users/naman/Enculture-Intelligence-Platform/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [32270] using WatchFiles
INFO:     Started server process [32282]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:57426 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57428 - "GET /health HTTP/1.1" 200 OK
2025-09-07 17:10:37 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 17:10:37 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 17:10:37 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113e6a8b0>
2025-09-07 17:10:37 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113e6a8b0>
2025-09-07 17:10:37 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d964890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 17:10:37 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d964890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 17:10:37 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113632e20>
2025-09-07 17:10:37 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113632e20>
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 17:10:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: DixXayFvMdULT3XddwccJw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57455) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:10:41 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:10:41 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:57457 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: w2k2f86Kwt3uXAdlt8AuLYBq36I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:10:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:10:41.994057"}' [128 bytes]
INFO:     127.0.0.1:57457 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57459 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Shz5jKp35umf7WtWwmw60A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57476) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:10:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:10:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:10:42.080380"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 1vYacn2lHH61+GFw8z3/lgEthk4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:10:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:10:42.080380"}' [128 bytes]
INFO:     127.0.0.1:57459 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 00:10:46 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_bfc9a7dc9900085dd9561505792f2489'), (b'openai-processing-ms', b'9361'), (b'x-envoy-upstream-service-time', b'9365'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=F.h2xwhI5t2oFm8.ISsjibFsjB2_z4q_pGAQJ5hPL.M-1757290246-1.0.1.1-70dNNoMUCML8C9rvgNotqq_TwK9IjuReu0nwFtRIJkwpZYo.3nJGa2RLGFsji2tWBLH0wxJu_MtysBKPRPRgN41hrC78dcISrYpu.TvLh3Q; path=/; expires=Mon, 08-Sep-25 00:40:46 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=KxbcxiQBc8ivWA1UiQFd32G2O7key57Ew8TwpWd7obI-1757290246998-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba3950198030ab-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 00:10:46 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_bfc9a7dc9900085dd9561505792f2489'), (b'openai-processing-ms', b'9361'), (b'x-envoy-upstream-service-time', b'9365'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=F.h2xwhI5t2oFm8.ISsjibFsjB2_z4q_pGAQJ5hPL.M-1757290246-1.0.1.1-70dNNoMUCML8C9rvgNotqq_TwK9IjuReu0nwFtRIJkwpZYo.3nJGa2RLGFsji2tWBLH0wxJu_MtysBKPRPRgN41hrC78dcISrYpu.TvLh3Q; path=/; expires=Mon, 08-Sep-25 00:40:46 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=KxbcxiQBc8ivWA1UiQFd32G2O7key57Ew8TwpWd7obI-1757290246998-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba3950198030ab-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 17:10:46 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:57430 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57509 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 17:10:47 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread de52f6e1-3115-4ffc-b7e7-427ab127cc7c
2025-09-07 17:10:47 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread de52f6e1-3115-4ffc-b7e7-427ab127cc7c
INFO:     127.0.0.1:57511 - "POST /api/v1/chat/stream-with-thread?thread_id=de52f6e1-3115-4ffc-b7e7-427ab127cc7c&prompt=hello HTTP/1.1" 200 OK
2025-09-07 17:10:47 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 17:10:47 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 17:10:47 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 17:10:47 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 00:10:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_87f1f25dfe29da0817dcceaec6fca219'), (b'openai-processing-ms', b'1417'), (b'x-envoy-upstream-service-time', b'1420'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba398d9b2330ab-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 00:10:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_87f1f25dfe29da0817dcceaec6fca219'), (b'openai-processing-ms', b'1417'), (b'x-envoy-upstream-service-time', b'1420'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97ba398d9b2330ab-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 17:10:49 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 17:10:50 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 17:10:51 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:10:51 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:10:51 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:10:51 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:10:51 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:10:51 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:10:51 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:10:51 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
INFO:     127.0.0.1:57564 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 0nwNSWHkwz5lTL46CiKnsQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57566) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:10:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:10:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:57564 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: nLTw9z/AuXU28ePJdi4Zf+7Xrf0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:10:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:10:52.360916"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 2iGA+jwUUw4QX75KoXZ6+Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57570) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:10:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:10:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: tZAy69a8IAKn9uK+G3HuxJpnv0I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:10:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:10:52.379863"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:10:52.379863"}' [128 bytes]
INFO:     127.0.0.1:57564 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:57568 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:57609 - "GET /api/v1/chat-threads/threads/7a9a83d1-03c2-4621-900e-cdd699c81f27 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 78 ee ac [binary, 4 bytes]
DEBUG:    < PONG 6a 78 ee ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 9f 88 59 [binary, 4 bytes]
DEBUG:    < PONG 67 9f 88 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57618 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290282469}' [46 bytes]
2025-09-07 17:11:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290282469}
2025-09-07 17:11:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290282469}
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 9b 10 b2 [binary, 4 bytes]
DEBUG:    < PONG c8 9b 10 b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 29 2a 4c [binary, 4 bytes]
DEBUG:    < PONG a5 29 2a 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57623 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 7a ce 0b [binary, 4 bytes]
DEBUG:    < PONG 50 7a ce 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c f1 5a 95 [binary, 4 bytes]
DEBUG:    < PONG 6c f1 5a 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290312470}' [46 bytes]
2025-09-07 17:11:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290312470}
2025-09-07 17:11:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290312470}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 50 82 d6 [binary, 4 bytes]
DEBUG:    < PONG 1f 50 82 d6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b b9 92 22 [binary, 4 bytes]
DEBUG:    < PONG 7b b9 92 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57640 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290342470}' [46 bytes]
2025-09-07 17:12:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290342470}
2025-09-07 17:12:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290342470}
DEBUG:    % sending keepalive ping
DEBUG:    > PING db ba 28 b2 [binary, 4 bytes]
DEBUG:    < PONG db ba 28 b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 c5 5c a3 [binary, 4 bytes]
DEBUG:    < PONG 79 c5 5c a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57646 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a f0 02 7d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 fb 7b 12 [binary, 4 bytes]
DEBUG:    < PONG 4a f0 02 7d [binary, 4 bytes]
DEBUG:    < PONG e2 fb 7b 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290372469}' [46 bytes]
2025-09-07 17:12:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290372469}
2025-09-07 17:12:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290372469}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 74 a2 6f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 db 59 7b [binary, 4 bytes]
DEBUG:    < PONG d2 74 a2 6f [binary, 4 bytes]
DEBUG:    < PONG 28 db 59 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57650 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290402470}' [46 bytes]
2025-09-07 17:13:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290402470}
2025-09-07 17:13:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290402470}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 75 07 99 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 70 09 f5 [binary, 4 bytes]
DEBUG:    < PONG 1c 75 07 99 [binary, 4 bytes]
DEBUG:    < PONG 77 70 09 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57655 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 0b a5 03 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 da 2c f8 [binary, 4 bytes]
DEBUG:    < PONG d7 0b a5 03 [binary, 4 bytes]
DEBUG:    < PONG 05 da 2c f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290432469}' [46 bytes]
2025-09-07 17:13:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290432469}
2025-09-07 17:13:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290432469}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 76 a3 93 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e a4 ea 1e [binary, 4 bytes]
DEBUG:    < PONG d7 76 a3 93 [binary, 4 bytes]
DEBUG:    < PONG 0e a4 ea 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57659 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290462469}' [46 bytes]
2025-09-07 17:14:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290462469}
2025-09-07 17:14:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290462469}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b e1 27 e9 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'q&1\t' [text, 4 bytes]
DEBUG:    < PONG 9b e1 27 e9 [binary, 4 bytes]
DEBUG:    < PONG 'q&1\t' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57682 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 76 23 d2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 34 8b 44 0e [binary, 4 bytes]
DEBUG:    < PONG ac 76 23 d2 [binary, 4 bytes]
DEBUG:    < PONG 34 8b 44 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290492470}' [46 bytes]
2025-09-07 17:14:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290492470}
2025-09-07 17:14:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290492470}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57702 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: AHnIBdklxX3AnzPhcDDyUA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57705) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:15:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:05 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:15:05 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ihWgcUiqOEPIqnA0i5Bc/pepOcA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:15:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:05.545242"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:05.545242"}' [128 bytes]
2025-09-07 17:15:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:15:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57706 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 a3 3d f8 [binary, 4 bytes]
DEBUG:    < PONG 36 a3 3d f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57729 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 3YQ/wZ71ySHFvftmdwQ+gA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57732) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:15:20 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:20 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:20 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:15:20 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: uda1txelC7Rq9OmoPRazxqypJ1k=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:15:19 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:20.341554"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:20.341554"}' [128 bytes]
2025-09-07 17:15:20 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:20 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:20 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:15:20 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57733 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57737 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: DTHHPE2ky/DY+FNc9tirAQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57739) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:15:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:25 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:15:25 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:25.909166"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: JyTnOU3EHRmANzjhW9YM0qmjWYI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:15:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:25.909166"}' [128 bytes]
2025-09-07 17:15:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:15:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57741 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57748 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: qBNUqc3zfuNT53McbyMVQw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57750) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:15:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: V2qO/uVB/luKNM6FUTaq0xLffTU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:15:30 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:30.372626"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:30.372626"}' [128 bytes]
2025-09-07 17:15:30 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:15:30 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:15:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:15:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57752 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 28 2e b5 [binary, 4 bytes]
DEBUG:    < PONG 47 28 2e b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:15:33 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:33 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:33 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:15:33 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57752 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XEzx+hT0ww2+KN62C535Ag==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57755) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:15:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4WcndZZD6KqFrTa7q3no1zYWF9U=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:15:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:57748 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:33.971783"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:33.971783"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57759 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /IclQg+n7BaH7Su1QSxOHw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57761) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:15:38 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:38 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:15:38 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:15:38 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: qxUr1Qt/V8D/qr/BAMvOpl+DkYQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:15:38 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:38.420973"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:15:38.420973"}' [128 bytes]
2025-09-07 17:15:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:15:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:15:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57763 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 25 b8 61 [binary, 4 bytes]
DEBUG:    < PONG 65 25 b8 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 11 21 80 [binary, 4 bytes]
DEBUG:    < PONG 18 11 21 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:16:00 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:00 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:00 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:16:00 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57769 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: zHuOEn/Rtbp6cr8qKB+jog==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57771) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: MAdWQksjyDkeIrGoythSjYK53Kw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:15:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:00.432016"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:00.432016"}' [128 bytes]
INFO:     127.0.0.1:57772 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:57781 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 66hcdO1Y2wbxekoJKotEEg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57784) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 5d/qw7KuWcLg0N3Sp57V3uen/7I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:16:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 17:16:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:16:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:05.454697"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:57785 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: s6uUtY/BE6/dqy4xlGVx+w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57791) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:08 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 17:16:08 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rws9ppihx3Myq06iKw1IwvkPL0Y=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:16:07 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:08.682646"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:08.682646"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57798 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: nfUKO1ibrwhzxEfkshF8Pg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57801) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:10 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:10 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: OGG5uSoe5M6egu+7E+8ywcmnw6Q=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:16:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:10.946828"}' [128 bytes]
2025-09-07 17:16:10 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:16:10 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:10.946828"}' [128 bytes]
2025-09-07 17:16:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:16:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57802 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 58 f1 2c [binary, 4 bytes]
DEBUG:    < PONG ca 58 f1 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57808 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: P6S7bEoITLnomvift81mcw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57811) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:16:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:17.013663"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: w7HdLtHGjZgXQuo/TLENn4d0png=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:16:17 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:17.013663"}' [128 bytes]
2025-09-07 17:16:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:16:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57812 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57819 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4Qg8t1DWJsTZFLvlYRasiw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57821) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:26 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:26 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ZTdIPZ+BdwtsQJ5e0i9uHUgOYk4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:16:26 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:26.294027"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:26.294027"}' [128 bytes]
2025-09-07 17:16:26 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:16:26 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:16:26 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:26 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:26 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:16:26 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57823 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 f0 2e 01 [binary, 4 bytes]
DEBUG:    < PONG c0 f0 2e 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57835 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 7c7AVJspMrkFBPyGPcoL7g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57838) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:38 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:38 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:38 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:16:38 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: PtLYQYHNdbq6iN7R3A0MyK2yygY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:16:38 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 17:16:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:16:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:38.614695"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     127.0.0.1:57837 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     127.0.0.1:57837 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: YMk3T3TQD+4dD7cX6lhU6g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57840) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:38 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:38 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 90ejG9VXQr1BpEdzEUI1S5joMd4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:16:38 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:57835 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:38.646413"}' [128 bytes]
2025-09-07 17:16:38 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 17:16:38 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:38.646413"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57844 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /N4WcWG2Q8Oqch60Fi4XKw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57847) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:16:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:16:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: /OsE/x55NkJ3yn4LSy6kIjhvjqU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:16:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:46.653398"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:16:46.653398"}' [128 bytes]
2025-09-07 17:16:46 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:16:46 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:16:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:16:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:16:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57848 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 30 f7 03 [binary, 4 bytes]
DEBUG:    < PONG 8a 30 f7 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 7d 25 6a [binary, 4 bytes]
DEBUG:    < PONG f8 7d 25 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 96 cd 21 [binary, 4 bytes]
DEBUG:    < PONG bf 96 cd 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57853 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290636664}' [46 bytes]
2025-09-07 17:17:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290636664}
2025-09-07 17:17:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290636664}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 74 fe 23 [binary, 4 bytes]
DEBUG:    < PONG 15 74 fe 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f fb 88 95 [binary, 4 bytes]
DEBUG:    < PONG 6f fb 88 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57872 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290666663}' [46 bytes]
2025-09-07 17:17:46 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290666663}
2025-09-07 17:17:46 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290666663}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 f4 a2 ff [binary, 4 bytes]
DEBUG:    < PONG 02 f4 a2 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 93 cd 9d [binary, 4 bytes]
DEBUG:    < PONG 09 93 cd 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:17:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:17:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:17:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:17:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57879 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: L/x4M5gTLIBZJA6/MM+06Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57882) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:17:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:17:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: i8B3seI7jHuO//dK0wutLGfFufI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:17:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:17:56.273551"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:17:56.273551"}' [128 bytes]
INFO:     127.0.0.1:57883 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:18:02 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:18:02 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:18:02 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:18:02 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57888 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1f7H8bGdFZsym/Rblc9sog==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57891) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:18:02 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:18:02 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: yM/Ek7JwHyaNCgaTIaBqUY1w+Vg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:18:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:18:02.141448"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:18:02.141448"}' [128 bytes]
INFO:     127.0.0.1:57892 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 de d6 3f [binary, 4 bytes]
DEBUG:    < PONG c7 de d6 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x12E\x0c|' [text, 4 bytes]
DEBUG:    < PONG '\x12E\x0c|' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:57904 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290712161}' [46 bytes]
2025-09-07 17:18:32 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290712161}
2025-09-07 17:18:32 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290712161}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 92 af 1c [binary, 4 bytes]
DEBUG:    < PONG 61 92 af 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e f4 9c 1d [binary, 4 bytes]
DEBUG:    < PONG 7e f4 9c 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc bb ef bd [binary, 4 bytes]
DEBUG:    < PONG dc bb ef bd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:57916 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1hpJI9fCGqoJCzZVSB9OQA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57918) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:18:57 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:18:57 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:18:57 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:18:57 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: aLHc9Xe7atW0wOjupoKM2/Z1qfc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:18:56 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 17:18:57 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:18:57 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:18:57 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:18:57 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:18:57.031143"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:57920 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1oQRsUYh0s0JtN42D0vVAw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57922) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:19:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:19:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: tZNktLVp0V6Z/GCLpqKnw6NUoPI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:18:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:19:00.051014"}' [128 bytes]
2025-09-07 17:19:00 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 17:19:00 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:19:00.051014"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 66 82 eb e1 [binary, 4 bytes]
DEBUG:    < PONG 66 82 eb e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:57928 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: gAeIvmOOrb55P1hR/QRjDw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57930) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:19:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:19:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:19:15 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:19:15 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: IDN6wMK2yG+9rZrhsgoHYhI+dyE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:19:15 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 17:19:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:19:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:19:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:19:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:19:15.750680"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:57928 - "GET /health HTTP/1.1" 200 OK
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:57932 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     127.0.0.1:57928 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1tRz9UKQ4pVVVPSO+mbEFA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57934) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:19:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:19:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: N+4zahAK4d4onwna+BNYaTTv+VA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:19:15 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:19:15.772504"}' [128 bytes]
2025-09-07 17:19:15 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 17:19:15 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:19:15.772504"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 a0 db 5c [binary, 4 bytes]
DEBUG:    < PONG b7 a0 db 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 21 8a fc [binary, 4 bytes]
DEBUG:    < PONG b3 21 8a fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290786531}' [46 bytes]
2025-09-07 17:19:46 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290786531}
2025-09-07 17:19:46 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290786531}
INFO:     127.0.0.1:57955 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 20 85 e3 [binary, 4 bytes]
DEBUG:    < PONG 49 20 85 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 3b 99 67 [binary, 4 bytes]
DEBUG:    < PONG bc 3b 99 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 6c 03 a4 [binary, 4 bytes]
DEBUG:    < PONG c9 6c 03 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 ee 3d 9b [binary, 4 bytes]
DEBUG:    < PONG 91 ee 3d 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290816530}' [46 bytes]
2025-09-07 17:20:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290816530}
2025-09-07 17:20:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290816530}
INFO:     127.0.0.1:57961 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57970 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: q+n5EGYqdDpjrSzvjDOqpg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57973) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:20:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:20:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:20:24 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:20:24 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: /G72AY+lD0Jq/mLeSKISxuRyx9o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:20:24 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:20:24.570930"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:20:24.570930"}' [128 bytes]
2025-09-07 17:20:24 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:20:24 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:20:24 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:20:24 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57974 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 77 5e a6 [binary, 4 bytes]
DEBUG:    < PONG 06 77 5e a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:57980 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4cXQ+X2joTMoK61BMMceYw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57983) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:20:35 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:20:35 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: UXu1qrlWKlBQBAX2RuTUcjDIc4A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:20:34 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 17:20:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:20:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:20:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:20:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:20:35.563727"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:57984 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 94qfLXG7CdTfVuet8k7jtw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57986) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:20:39 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:20:39 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: NZSscVMUMgAJUxwB6Vgi15cGy5U=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:20:38 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:20:39.562040"}' [128 bytes]
2025-09-07 17:20:39 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 17:20:39 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:20:39.562040"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:57991 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: hB3udBXVhEE2wfUkxoaxfw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 57994) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:20:45 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:20:45 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: KCf9yImnYj+X5Pkek+Ch7AnJo78=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:20:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:20:45.607736"}' [128 bytes]
2025-09-07 17:20:45 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:20:45 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:20:45.607736"}' [128 bytes]
2025-09-07 17:20:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:20:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:20:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:20:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:57995 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb 33 31 86 [binary, 4 bytes]
DEBUG:    < PONG bb 33 31 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '8\x0bJ/' [text, 4 bytes]
DEBUG:    < PONG '8\x0bJ/' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 a6 cc 4b [binary, 4 bytes]
DEBUG:    < PONG d6 a6 cc 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290876529}' [46 bytes]
2025-09-07 17:21:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290876529}
2025-09-07 17:21:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290876529}
INFO:     127.0.0.1:58018 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:21:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:21:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:21:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:21:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58018 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4zpSdIXWy6vT02FjtYJjBQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58020) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:21:16 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:21:16 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:58018 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: LvoVD6Xbn07tQETdn624rPhsMEg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:21:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:21:16.562767"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:21:16.562767"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a b1 42 15 [binary, 4 bytes]
DEBUG:    < PONG 2a b1 42 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:21:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:21:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:21:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:21:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58043 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: zEEb+czIHooqIRcxteGHWA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58046) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:21:35 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:21:35 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: f8r4wGmB06ZZgIdyK+DNZlAExE4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:21:35 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:21:35.597868"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:21:35.597868"}' [128 bytes]
INFO:     127.0.0.1:58047 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 3f 2e aa [binary, 4 bytes]
DEBUG:    < PONG 15 3f 2e aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 74 7f cf [binary, 4 bytes]
DEBUG:    < PONG 41 74 7f cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290926531}' [46 bytes]
2025-09-07 17:22:06 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290926531}
2025-09-07 17:22:06 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290926531}
INFO:     127.0.0.1:58051 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae ea 60 cc [binary, 4 bytes]
DEBUG:    < PONG ae ea 60 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 45 d0 9b [binary, 4 bytes]
DEBUG:    < PONG 99 45 d0 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ';\n\x0b\x02' [text, 4 bytes]
DEBUG:    < PONG ';\n\x0b\x02' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 b2 a9 e6 [binary, 4 bytes]
DEBUG:    < PONG d4 b2 a9 e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290956530}' [46 bytes]
2025-09-07 17:22:36 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290956530}
2025-09-07 17:22:36 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290956530}
INFO:     127.0.0.1:58058 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 73 a9 b6 [binary, 4 bytes]
DEBUG:    < PONG dc 73 a9 b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 6f 59 d5 [binary, 4 bytes]
DEBUG:    < PONG e1 6f 59 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58067 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757290985618}' [46 bytes]
2025-09-07 17:23:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290985618}
2025-09-07 17:23:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757290985618}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 79 ed b5 [binary, 4 bytes]
DEBUG:    < PONG e3 79 ed b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 99 77 57 [binary, 4 bytes]
DEBUG:    < PONG 29 99 77 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 0d 94 f6 [binary, 4 bytes]
DEBUG:    < PONG 1c 0d 94 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58073 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291015618}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 df ec 4d [binary, 4 bytes]
2025-09-07 17:23:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291015618}
2025-09-07 17:23:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291015618}
DEBUG:    < PONG 29 df ec 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 05 15 d7 [binary, 4 bytes]
DEBUG:    < PONG d6 05 15 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 fb 45 1a [binary, 4 bytes]
DEBUG:    < PONG 95 fb 45 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58089 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291045618}' [46 bytes]
2025-09-07 17:24:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291045618}
2025-09-07 17:24:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291045618}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b d5 4c b1 [binary, 4 bytes]
DEBUG:    < PONG 9b d5 4c b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '/\x19Ã¾' [text, 4 bytes]
DEBUG:    < PONG '/\x19Ã¾' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 9e dc f8 [binary, 4 bytes]
DEBUG:    < PONG 03 9e dc f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58096 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291075618}' [46 bytes]
2025-09-07 17:24:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291075618}
2025-09-07 17:24:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291075618}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 89 52 03 [binary, 4 bytes]
DEBUG:    < PONG ff 89 52 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a cc b9 da [binary, 4 bytes]
DEBUG:    < PONG 8a cc b9 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 15 94 3e [binary, 4 bytes]
DEBUG:    < PONG bc 15 94 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58112 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291105618}' [46 bytes]
2025-09-07 17:25:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291105618}
2025-09-07 17:25:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291105618}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 d1 7d 69 [binary, 4 bytes]
DEBUG:    < PONG e1 d1 7d 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 7a 35 cf [binary, 4 bytes]
DEBUG:    < PONG ef 7a 35 cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 84 40 e1 [binary, 4 bytes]
DEBUG:    < PONG ac 84 40 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e a1 13 ef [binary, 4 bytes]
DEBUG:    < PONG 5e a1 13 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291136530}' [46 bytes]
2025-09-07 17:25:36 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291136530}
2025-09-07 17:25:36 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291136530}
INFO:     127.0.0.1:58119 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING de db 52 94 [binary, 4 bytes]
DEBUG:    < PONG de db 52 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 74 f3 15 [binary, 4 bytes]
DEBUG:    < PONG 50 74 f3 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291166529}' [46 bytes]
2025-09-07 17:26:06 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291166529}
2025-09-07 17:26:06 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291166529}
INFO:     127.0.0.1:58127 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 e9 ba 4e [binary, 4 bytes]
DEBUG:    < PONG 38 e9 ba 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 6b 33 d2 [binary, 4 bytes]
DEBUG:    < PONG d6 6b 33 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e dc aa b2 [binary, 4 bytes]
DEBUG:    < PONG 5e dc aa b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 4e cb ee [binary, 4 bytes]
DEBUG:    < PONG 98 4e cb ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291209530}' [46 bytes]
2025-09-07 17:26:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291209530}
2025-09-07 17:26:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291209530}
INFO:     127.0.0.1:58139 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 4f c9 c3 [binary, 4 bytes]
DEBUG:    < PONG ca 4f c9 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 8a d9 0e [binary, 4 bytes]
DEBUG:    < PONG 02 8a d9 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1a\x04p\x06' [text, 4 bytes]
DEBUG:    < PONG '\x1a\x04p\x06' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d 13 fb 57 [binary, 4 bytes]
DEBUG:    < PONG 7d 13 fb 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e a4 11 d1 [binary, 4 bytes]
DEBUG:    < PONG 4e a4 11 d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:27:34 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:27:34 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:27:34 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:27:34 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58163 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: vmegpR/kFhu0ZfRrnkGnww==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58166) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:27:34 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:27:34 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: esbAn1edr8XeJ7zVEYvueDXQ5a4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:27:34 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58163 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:27:34.558367"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:27:34.558367"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 34 b2 07 [binary, 4 bytes]
DEBUG:    < PONG 28 34 b2 07 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x0e\nz5' [text, 4 bytes]
DEBUG:    < PONG '\x0e\nz5' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58176 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291284565}' [46 bytes]
2025-09-07 17:28:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291284565}
2025-09-07 17:28:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291284565}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 74 46 24 [binary, 4 bytes]
DEBUG:    < PONG d9 74 46 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '.p@M' [text, 4 bytes]
DEBUG:    < PONG '.p@M' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 09 ba f6 [binary, 4 bytes]
DEBUG:    < PONG f9 09 ba f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58183 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291314565}' [46 bytes]
2025-09-07 17:28:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291314565}
2025-09-07 17:28:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291314565}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 92 bb c5 [binary, 4 bytes]
DEBUG:    < PONG 7f 92 bb c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d b6 1a a0 [binary, 4 bytes]
DEBUG:    < PONG 1d b6 1a a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 9f 0d c8 [binary, 4 bytes]
DEBUG:    < PONG b6 9f 0d c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58187 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291344565}' [46 bytes]
2025-09-07 17:29:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291344565}
2025-09-07 17:29:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291344565}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 c0 26 15 [binary, 4 bytes]
DEBUG:    < PONG 35 c0 26 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 97 e5 80 [binary, 4 bytes]
DEBUG:    < PONG 99 97 e5 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 a2 ed 19 [binary, 4 bytes]
DEBUG:    < PONG a1 a2 ed 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58193 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291374565}' [46 bytes]
2025-09-07 17:29:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291374565}
2025-09-07 17:29:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291374565}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 8d 76 0c [binary, 4 bytes]
DEBUG:    < PONG e8 8d 76 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 49 d2 dc [binary, 4 bytes]
DEBUG:    < PONG 36 49 d2 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 24 28 7b [binary, 4 bytes]
DEBUG:    < PONG f5 24 28 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58208 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291404569}' [46 bytes]
2025-09-07 17:30:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291404569}
2025-09-07 17:30:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291404569}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d 0c 8f 3b [binary, 4 bytes]
DEBUG:    < PONG 7d 0c 8f 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 23 c6 61 [binary, 4 bytes]
DEBUG:    < PONG 55 23 c6 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 8d a2 95 [binary, 4 bytes]
DEBUG:    < PONG 98 8d a2 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58215 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291434574}' [46 bytes]
2025-09-07 17:30:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291434574}
2025-09-07 17:30:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291434574}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea d6 cf a0 [binary, 4 bytes]
DEBUG:    < PONG ea d6 cf a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 20 b9 cb [binary, 4 bytes]
DEBUG:    < PONG c2 20 b9 cb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 d3 4d e2 [binary, 4 bytes]
DEBUG:    < PONG f9 d3 4d e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58231 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291464576}' [46 bytes]
2025-09-07 17:31:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291464576}
2025-09-07 17:31:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291464576}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 79 54 e9 [binary, 4 bytes]
DEBUG:    < PONG 09 79 54 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 02 a0 3c [binary, 4 bytes]
DEBUG:    < PONG 96 02 a0 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b ef f5 c5 [binary, 4 bytes]
DEBUG:    < PONG 5b ef f5 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58253 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291494575}' [46 bytes]
2025-09-07 17:31:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291494575}
2025-09-07 17:31:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291494575}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 51 46 49 [binary, 4 bytes]
DEBUG:    < PONG 9a 51 46 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'CnX\x0f' [text, 4 bytes]
DEBUG:    < PONG 'CnX\x0f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 4c 97 c2 [binary, 4 bytes]
DEBUG:    < PONG 75 4c 97 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58256 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291524574}' [46 bytes]
2025-09-07 17:32:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291524574}
2025-09-07 17:32:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291524574}
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 8f a8 d9 [binary, 4 bytes]
DEBUG:    < PONG fe 8f a8 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 b8 a8 ce [binary, 4 bytes]
DEBUG:    < PONG b5 b8 a8 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 a8 f3 45 [binary, 4 bytes]
DEBUG:    < PONG d3 a8 f3 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58263 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291554576}' [46 bytes]
2025-09-07 17:32:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291554576}
2025-09-07 17:32:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291554576}
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 40 4c 3c [binary, 4 bytes]
DEBUG:    < PONG cd 40 4c 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 c8 bb fc [binary, 4 bytes]
DEBUG:    < PONG 54 c8 bb fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 0d 89 c2 [binary, 4 bytes]
DEBUG:    < PONG fb 0d 89 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58286 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291584575}' [46 bytes]
2025-09-07 17:33:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291584575}
2025-09-07 17:33:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291584575}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 94 73 f1 [binary, 4 bytes]
DEBUG:    < PONG 94 94 73 f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 62 a4 73 [binary, 4 bytes]
DEBUG:    < PONG e1 62 a4 73 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 e9 20 d4 [binary, 4 bytes]
DEBUG:    < PONG e1 e9 20 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 14 80 39 [binary, 4 bytes]
DEBUG:    < PONG 89 14 80 39 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291615541}' [46 bytes]
2025-09-07 17:33:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291615541}
2025-09-07 17:33:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291615541}
INFO:     127.0.0.1:58327 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 8d 24 d1 [binary, 4 bytes]
DEBUG:    < PONG f3 8d 24 d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 29 aa 30 [binary, 4 bytes]
DEBUG:    < PONG 92 29 aa 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291645540}' [46 bytes]
2025-09-07 17:34:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291645540}
2025-09-07 17:34:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291645540}
INFO:     127.0.0.1:58363 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 99 e1 59 [binary, 4 bytes]
DEBUG:    < PONG ac 99 e1 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 69 8a c7 [binary, 4 bytes]
DEBUG:    < PONG 24 69 8a c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1d0!\x02' [text, 4 bytes]
DEBUG:    < PONG '\x1d0!\x02' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 b6 b4 15 [binary, 4 bytes]
DEBUG:    < PONG 85 b6 b4 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291689551}' [46 bytes]
INFO:     127.0.0.1:58385 - "GET /health HTTP/1.1" 200 OK
2025-09-07 17:34:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291689551}
2025-09-07 17:34:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291689551}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:58385 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ax+sGx3LoJxd3y7w4lpavQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58389) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:34:50 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:34:50 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: s9+/p4ieu1xwfo5zr4Xtnpw0M6o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:34:49 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:34:50.599451"}' [128 bytes]
2025-09-07 17:34:50 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:34:50 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:34:50.599451"}' [128 bytes]
INFO:     127.0.0.1:58388 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 17:34:50 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:34:50 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:34:50 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:34:50 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 5b 50 ba [binary, 4 bytes]
DEBUG:    < PONG a4 5b 50 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 dd 11 12 [binary, 4 bytes]
DEBUG:    < PONG 12 dd 11 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING de da 03 5a [binary, 4 bytes]
DEBUG:    < PONG de da 03 5a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58397 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291720626}' [46 bytes]
2025-09-07 17:35:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291720626}
2025-09-07 17:35:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291720626}
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa ab ec 6d [binary, 4 bytes]
DEBUG:    < PONG aa ab ec 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 5d 25 a5 [binary, 4 bytes]
DEBUG:    < PONG 9a 5d 25 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58414 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291750626}' [46 bytes]
2025-09-07 17:35:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291750626}
2025-09-07 17:35:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291750626}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb a7 b1 57 [binary, 4 bytes]
DEBUG:    < PONG bb a7 b1 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 87 31 ad [binary, 4 bytes]
DEBUG:    < PONG 6c 87 31 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 13 b6 d0 [binary, 4 bytes]
DEBUG:    < PONG 78 13 b6 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 62 39 a8 [binary, 4 bytes]
DEBUG:    < PONG 35 62 39 a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58426 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291780627}' [46 bytes]
2025-09-07 17:36:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291780627}
2025-09-07 17:36:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291780627}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:36:27 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:36:27 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:36:27 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:36:27 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58437 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: uTv8gA9l/zQ5412KY8xlUQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58440) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:36:27 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:36:27 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: muYCL9b9+8ayq+fZHO3GWnuC2Dc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:36:27 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:36:27.627928"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:36:27.627928"}' [128 bytes]
INFO:     127.0.0.1:58441 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 5e c3 58 [binary, 4 bytes]
DEBUG:    < PONG 03 5e c3 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a a4 3a fa [binary, 4 bytes]
DEBUG:    < PONG 9a a4 3a fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 14 c2 08 [binary, 4 bytes]
DEBUG:    < PONG a0 14 c2 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:58451 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ByASpi03e0yMHxPHDuW1Uw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58452) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:36:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:36:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lKUjEyllm7uRKUFOwb9hY/Vp52Q=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:36:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 17:36:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:36:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:36:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:36:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:36:53.398166"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:58453 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Wi0VB5JX9K3BNd0itwPtsA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58455) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:36:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:36:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: H2AsrcVWukvHpg0y9ZZxh0gui28=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:36:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:36:56.419353"}' [128 bytes]
2025-09-07 17:36:56 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 17:36:56 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:36:56.419353"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x0f\x1c-=' [text, 4 bytes]
DEBUG:    < PONG '\x0f\x1c-=' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae 8e a1 3a [binary, 4 bytes]
DEBUG:    < PONG ae 8e a1 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58464 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291846431}' [46 bytes]
2025-09-07 17:37:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291846431}
2025-09-07 17:37:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291846431}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a ad 64 22 [binary, 4 bytes]
DEBUG:    < PONG 8a ad 64 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 44 ab 72 [binary, 4 bytes]
DEBUG:    < PONG df 44 ab 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c b5 8b 09 [binary, 4 bytes]
DEBUG:    < PONG 2c b5 8b 09 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58471 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291876432}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 10 1c a1 [binary, 4 bytes]
2025-09-07 17:37:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291876432}
2025-09-07 17:37:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291876432}
DEBUG:    < PONG a0 10 1c a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 fb b3 63 [binary, 4 bytes]
DEBUG:    < PONG e5 fb b3 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 54 a1 65 [binary, 4 bytes]
DEBUG:    < PONG 26 54 a1 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58498 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291906431}' [46 bytes]
2025-09-07 17:38:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291906431}
2025-09-07 17:38:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291906431}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\tÒ·y' [text, 4 bytes]
DEBUG:    < PONG '\tÒ·y' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 17 ca d2 [binary, 4 bytes]
DEBUG:    < PONG ca 17 ca d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 1b 27 05 [binary, 4 bytes]
DEBUG:    < PONG 8c 1b 27 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58502 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291936430}' [46 bytes]
2025-09-07 17:38:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291936430}
2025-09-07 17:38:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291936430}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 8c 7d ec [binary, 4 bytes]
DEBUG:    < PONG 5b 8c 7d ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 66 c1 52 [binary, 4 bytes]
DEBUG:    < PONG 6e 66 c1 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 b5 ff 70 [binary, 4 bytes]
DEBUG:    < PONG 99 b5 ff 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58524 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291966539}' [46 bytes]
2025-09-07 17:39:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291966539}
2025-09-07 17:39:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291966539}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 95 6e d2 [binary, 4 bytes]
DEBUG:    < PONG 88 95 6e d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f 41 56 6b [binary, 4 bytes]
DEBUG:    < PONG 9f 41 56 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 89 3b 10 [binary, 4 bytes]
DEBUG:    < PONG 7c 89 3b 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58544 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 67 07 91 [binary, 4 bytes]
DEBUG:    < PONG 50 67 07 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757291996539}' [46 bytes]
2025-09-07 17:39:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291996539}
2025-09-07 17:39:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757291996539}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 7d d8 2c [binary, 4 bytes]
DEBUG:    < PONG 65 7d d8 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 0f b8 e0 [binary, 4 bytes]
DEBUG:    < PONG cb 0f b8 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 99 e0 05 [binary, 4 bytes]
DEBUG:    < PONG 91 99 e0 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 d9 e9 1d [binary, 4 bytes]
DEBUG:    < PONG 52 d9 e9 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292049553}' [46 bytes]
2025-09-07 17:40:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292049553}
2025-09-07 17:40:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292049553}
INFO:     127.0.0.1:58578 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 81 ac 98 [binary, 4 bytes]
DEBUG:    < PONG 56 81 ac 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58580 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292056431}' [46 bytes]
2025-09-07 17:40:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292056431}
2025-09-07 17:40:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292056431}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee 5d 8b e6 [binary, 4 bytes]
DEBUG:    < PONG ee 5d 8b e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 9d 17 3f [binary, 4 bytes]
DEBUG:    < PONG 76 9d 17 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 83 5e 6a [binary, 4 bytes]
DEBUG:    < PONG fa 83 5e 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58606 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292086432}' [46 bytes]
2025-09-07 17:41:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292086432}
2025-09-07 17:41:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292086432}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 b8 8a cc [binary, 4 bytes]
DEBUG:    < PONG f3 b8 8a cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 d6 5c 12 [binary, 4 bytes]
DEBUG:    < PONG 17 d6 5c 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d 88 18 85 [binary, 4 bytes]
DEBUG:    < PONG 5d 88 18 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58650 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292116540}' [46 bytes]
2025-09-07 17:41:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292116540}
2025-09-07 17:41:56 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292116540}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 40 08 d3 [binary, 4 bytes]
DEBUG:    < PONG 92 40 08 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 fb 0f 61 [binary, 4 bytes]
DEBUG:    < PONG 00 fb 0f 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 27 78 ea [binary, 4 bytes]
DEBUG:    < PONG 5e 27 78 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58657 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292146540}' [46 bytes]
2025-09-07 17:42:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292146540}
2025-09-07 17:42:26 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292146540}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 46 68 d3 [binary, 4 bytes]
DEBUG:    < PONG a8 46 68 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '}\x07<I' [text, 4 bytes]
DEBUG:    < PONG '}\x07<I' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:58681 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: VeC9xbX6fBnEIjgiK70X+Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
2025-09-07 17:42:40 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:42:40 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:42:40 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:42:40 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     ('127.0.0.1', 58684) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:42:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:42:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rRmFbTa2HXbu4Dz/HRXFPKrm2sk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:42:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:42:40.583753"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:42:40.583753"}' [128 bytes]
INFO:     127.0.0.1:58685 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:58694 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ZySO+NOJH4s0o+glvDbk4A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58695) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:42:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:42:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:42:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 17:42:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:42:52.626908"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: iHo+5ksMASxQV4DgkocccmZmLm4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:42:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:42:52.626908"}' [128 bytes]
2025-09-07 17:42:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:42:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:42:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:42:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58696 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING da e9 ab 83 [binary, 4 bytes]
DEBUG:    < PONG da e9 ab 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 17 23 7e [binary, 4 bytes]
DEBUG:    < PONG be 17 23 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 c5 06 d7 [binary, 4 bytes]
DEBUG:    < PONG f8 c5 06 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 17:43:13 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:43:13 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 17:43:13 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 17:43:13 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58712 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: lU3jzND0eK+M4NcdXKEtcQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58715) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 17:43:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 17:43:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: KNmS9uf65uTsEkLzIw1WuoecCUQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 00:43:12 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:43:13.563140"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T17:43:13.563140"}' [128 bytes]
INFO:     127.0.0.1:58716 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 4a f3 57 [binary, 4 bytes]
DEBUG:    < PONG e1 4a f3 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 d2 f6 c2 [binary, 4 bytes]
DEBUG:    < PONG 45 d2 f6 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292224540}' [46 bytes]
2025-09-07 17:43:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292224540}
2025-09-07 17:43:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292224540}
INFO:     127.0.0.1:58732 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4b 86 b9 67 [binary, 4 bytes]
DEBUG:    < PONG 4b 86 b9 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 28 a0 1f [binary, 4 bytes]
DEBUG:    < PONG 98 28 a0 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 2b b6 46 [binary, 4 bytes]
DEBUG:    < PONG cf 2b b6 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a bc e5 f1 [binary, 4 bytes]
DEBUG:    < PONG 9a bc e5 f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292254541}' [46 bytes]
2025-09-07 17:44:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292254541}
2025-09-07 17:44:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292254541}
INFO:     127.0.0.1:58736 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 58 ab 38 [binary, 4 bytes]
DEBUG:    < PONG e4 58 ab 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 af 65 0a [binary, 4 bytes]
DEBUG:    < PONG 67 af 65 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292284540}' [46 bytes]
2025-09-07 17:44:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292284540}
2025-09-07 17:44:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292284540}
INFO:     127.0.0.1:58766 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 13 68 2f [binary, 4 bytes]
DEBUG:    < PONG d7 13 68 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 db e9 6a [binary, 4 bytes]
DEBUG:    < PONG c2 db e9 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 93 b4 9d [binary, 4 bytes]
DEBUG:    < PONG ce 93 b4 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 c0 5f 6a [binary, 4 bytes]
DEBUG:    < PONG 14 c0 5f 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292314541}' [46 bytes]
2025-09-07 17:45:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292314541}
2025-09-07 17:45:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292314541}
INFO:     127.0.0.1:58781 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 9b 74 31 [binary, 4 bytes]
DEBUG:    < PONG ab 9b 74 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 9c 6d f1 [binary, 4 bytes]
DEBUG:    < PONG f2 9c 6d f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292344541}' [46 bytes]
2025-09-07 17:45:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292344541}
2025-09-07 17:45:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292344541}
INFO:     127.0.0.1:58787 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 bd 50 59 [binary, 4 bytes]
DEBUG:    < PONG 49 bd 50 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x15BY!' [text, 4 bytes]
DEBUG:    < PONG '\x15BY!' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 bf 57 d8 [binary, 4 bytes]
DEBUG:    < PONG 21 bf 57 d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 d1 ca 3d [binary, 4 bytes]
DEBUG:    < PONG 35 d1 ca 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292374540}' [46 bytes]
2025-09-07 17:46:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292374540}
2025-09-07 17:46:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292374540}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 91 99 05 [binary, 4 bytes]
DEBUG:    < PONG 70 91 99 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 54 d6 2b [binary, 4 bytes]
DEBUG:    < PONG 48 54 d6 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292409542}' [46 bytes]
2025-09-07 17:46:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292409542}
2025-09-07 17:46:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292409542}
INFO:     127.0.0.1:58803 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 0a 61 dc [binary, 4 bytes]
DEBUG:    < PONG 11 0a 61 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 51 6c fa [binary, 4 bytes]
DEBUG:    < PONG 3a 51 6c fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 74 3f f5 c4 [binary, 4 bytes]
DEBUG:    < PONG 74 3f f5 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 77 fa e6 [binary, 4 bytes]
DEBUG:    < PONG 31 77 fa e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a 24 91 13 [binary, 4 bytes]
DEBUG:    < PONG 5a 24 91 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 81 9a 10 [binary, 4 bytes]
DEBUG:    < PONG b5 81 9a 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292469541}' [46 bytes]
2025-09-07 17:47:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292469541}
2025-09-07 17:47:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292469541}
INFO:     127.0.0.1:58811 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 7b 76 ac [binary, 4 bytes]
DEBUG:    < PONG 72 7b 76 ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c e7 7e e9 [binary, 4 bytes]
DEBUG:    < PONG 1c e7 7e e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 c7 e4 51 [binary, 4 bytes]
DEBUG:    < PONG 54 c7 e4 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 b3 8b d3 [binary, 4 bytes]
DEBUG:    < PONG 77 b3 8b d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 8e 2c 37 [binary, 4 bytes]
DEBUG:    < PONG 53 8e 2c 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd 0f 63 3e [binary, 4 bytes]
DEBUG:    < PONG fd 0f 63 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292529542}' [46 bytes]
INFO:     127.0.0.1:58835 - "GET /health HTTP/1.1" 200 OK
2025-09-07 17:48:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292529542}
2025-09-07 17:48:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292529542}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 50 a7 01 [binary, 4 bytes]
DEBUG:    < PONG a5 50 a7 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc dd b8 bb [binary, 4 bytes]
DEBUG:    < PONG bc dd b8 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 ff 8b e7 [binary, 4 bytes]
DEBUG:    < PONG a6 ff 8b e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 f1 0f c4 [binary, 4 bytes]
DEBUG:    < PONG 32 f1 0f c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 26 e8 29 [binary, 4 bytes]
DEBUG:    < PONG 67 26 e8 29 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 eb b1 58 [binary, 4 bytes]
DEBUG:    < PONG 53 eb b1 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292589542}' [46 bytes]
2025-09-07 17:49:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292589542}
2025-09-07 17:49:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292589542}
INFO:     127.0.0.1:58843 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d 8e d9 1b [binary, 4 bytes]
DEBUG:    < PONG 3d 8e d9 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 ee 84 9f [binary, 4 bytes]
DEBUG:    < PONG e2 ee 84 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 3b 69 44 [binary, 4 bytes]
DEBUG:    < PONG 83 3b 69 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 dd df bb [binary, 4 bytes]
DEBUG:    < PONG e1 dd df bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 7d 10 f0 [binary, 4 bytes]
DEBUG:    < PONG 87 7d 10 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 5b 26 eb [binary, 4 bytes]
DEBUG:    < PONG ac 5b 26 eb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292649543}' [46 bytes]
2025-09-07 17:50:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292649543}
2025-09-07 17:50:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292649543}
INFO:     127.0.0.1:58863 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a db cf 59 [binary, 4 bytes]
DEBUG:    < PONG 6a db cf 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '_6,\x1e' [text, 4 bytes]
DEBUG:    < PONG '_6,\x1e' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 bf 16 34 [binary, 4 bytes]
DEBUG:    < PONG 69 bf 16 34 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 3a 2a b0 [binary, 4 bytes]
DEBUG:    < PONG e1 3a 2a b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 66 49 f6 [binary, 4 bytes]
DEBUG:    < PONG 3a 66 49 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 c6 02 1b [binary, 4 bytes]
DEBUG:    < PONG 69 c6 02 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292709544}' [46 bytes]
2025-09-07 17:51:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292709544}
2025-09-07 17:51:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292709544}
INFO:     127.0.0.1:58889 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c f3 8d 55 [binary, 4 bytes]
DEBUG:    < PONG 7c f3 8d 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 28 06 56 [binary, 4 bytes]
DEBUG:    < PONG 91 28 06 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa b7 93 76 [binary, 4 bytes]
DEBUG:    < PONG aa b7 93 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 54 dc a2 [binary, 4 bytes]
DEBUG:    < PONG bc 54 dc a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb d4 4a 2b [binary, 4 bytes]
DEBUG:    < PONG fb d4 4a 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 04 b6 5d [binary, 4 bytes]
DEBUG:    < PONG 68 04 b6 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292769541}' [46 bytes]
2025-09-07 17:52:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292769541}
2025-09-07 17:52:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292769541}
INFO:     127.0.0.1:58910 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 03 a3 de [binary, 4 bytes]
DEBUG:    < PONG 3a 03 a3 de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 88 32 c2 [binary, 4 bytes]
DEBUG:    < PONG e7 88 32 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 0c d9 26 [binary, 4 bytes]
DEBUG:    < PONG 97 0c d9 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58913 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292793567}' [46 bytes]
2025-09-07 17:53:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292793567}
2025-09-07 17:53:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292793567}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c 86 9f 77 [binary, 4 bytes]
DEBUG:    < PONG 5c 86 9f 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 09 cf 18 [binary, 4 bytes]
DEBUG:    < PONG 62 09 cf 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 32 e3 1d [binary, 4 bytes]
DEBUG:    < PONG eb 32 e3 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58919 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292823568}' [46 bytes]
2025-09-07 17:53:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292823568}
2025-09-07 17:53:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292823568}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 33 f7 7b [binary, 4 bytes]
DEBUG:    < PONG b7 33 f7 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0f 85 fe 71 [binary, 4 bytes]
DEBUG:    < PONG 0f 85 fe 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 87 2f be [binary, 4 bytes]
DEBUG:    < PONG 2a 87 2f be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292853569}' [46 bytes]
2025-09-07 17:54:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292853569}
2025-09-07 17:54:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292853569}
INFO:     127.0.0.1:58922 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f fd d0 d7 [binary, 4 bytes]
DEBUG:    < PONG 6f fd d0 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 23 e3 0e [binary, 4 bytes]
DEBUG:    < PONG 77 23 e3 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f c9 60 13 [binary, 4 bytes]
DEBUG:    < PONG 5f c9 60 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58930 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292883569}' [46 bytes]
2025-09-07 17:54:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292883569}
2025-09-07 17:54:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292883569}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb 56 2a a0 [binary, 4 bytes]
DEBUG:    < PONG bb 56 2a a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2b c3 58 ce [binary, 4 bytes]
DEBUG:    < PONG 2b c3 58 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 6e f9 81 [binary, 4 bytes]
DEBUG:    < PONG 4a 6e f9 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58945 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292913568}' [46 bytes]
2025-09-07 17:55:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292913568}
2025-09-07 17:55:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292913568}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 51 f3 8d [binary, 4 bytes]
DEBUG:    < PONG 4a 51 f3 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c d1 ac dd [binary, 4 bytes]
DEBUG:    < PONG 5c d1 ac dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b d4 76 e5 [binary, 4 bytes]
DEBUG:    < PONG 8b d4 76 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58951 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292943568}' [46 bytes]
2025-09-07 17:55:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292943568}
2025-09-07 17:55:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292943568}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 b1 f9 d7 [binary, 4 bytes]
DEBUG:    < PONG 08 b1 f9 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 d2 e9 98 [binary, 4 bytes]
DEBUG:    < PONG a4 d2 e9 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 38 cb 59 [binary, 4 bytes]
DEBUG:    < PONG 17 38 cb 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58962 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757292973573}' [46 bytes]
2025-09-07 17:56:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292973573}
2025-09-07 17:56:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757292973573}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 53 8f be [binary, 4 bytes]
DEBUG:    < PONG f3 53 8f be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 1f 38 07 [binary, 4 bytes]
DEBUG:    < PONG f9 1f 38 07 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 4a c1 e2 [binary, 4 bytes]
DEBUG:    < PONG 62 4a c1 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58969 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293003573}' [46 bytes]
2025-09-07 17:56:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293003573}
2025-09-07 17:56:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293003573}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 96 22 f8 [binary, 4 bytes]
DEBUG:    < PONG f6 96 22 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 01 b6 b8 [binary, 4 bytes]
DEBUG:    < PONG 20 01 b6 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'B\x12?\x00' [text, 4 bytes]
DEBUG:    < PONG 'B\x12?\x00' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58985 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293033574}' [46 bytes]
2025-09-07 17:57:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293033574}
2025-09-07 17:57:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293033574}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'PvET' [text, 4 bytes]
DEBUG:    < PONG 'PvET' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 3b 02 d9 [binary, 4 bytes]
DEBUG:    < PONG 3a 3b 02 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 25 8b 5a [binary, 4 bytes]
DEBUG:    < PONG c9 25 8b 5a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59003 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293063574}' [46 bytes]
2025-09-07 17:57:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293063574}
2025-09-07 17:57:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293063574}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef b6 39 86 [binary, 4 bytes]
DEBUG:    < PONG ef b6 39 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2b e5 eb b0 [binary, 4 bytes]
DEBUG:    < PONG 2b e5 eb b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 cf 57 65 [binary, 4 bytes]
DEBUG:    < PONG b4 cf 57 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59006 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293093574}' [46 bytes]
2025-09-07 17:58:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293093574}
2025-09-07 17:58:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293093574}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 2a 88 4b [binary, 4 bytes]
DEBUG:    < PONG 0b 2a 88 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf a1 9f a5 [binary, 4 bytes]
DEBUG:    < PONG cf a1 9f a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 95 50 80 [binary, 4 bytes]
DEBUG:    < PONG 88 95 50 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59025 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293123574}' [46 bytes]
2025-09-07 17:58:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293123574}
2025-09-07 17:58:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293123574}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba 22 ed c7 [binary, 4 bytes]
DEBUG:    < PONG ba 22 ed c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c ae e5 bf [binary, 4 bytes]
DEBUG:    < PONG 6c ae e5 bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f dc 42 49 [binary, 4 bytes]
DEBUG:    < PONG 1f dc 42 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293153576}' [46 bytes]
INFO:     127.0.0.1:59029 - "GET /health HTTP/1.1" 200 OK
2025-09-07 17:59:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293153576}
2025-09-07 17:59:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293153576}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 47 db f7 [binary, 4 bytes]
DEBUG:    < PONG bd 47 db f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 70 2a 77 [binary, 4 bytes]
DEBUG:    < PONG 8d 70 2a 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 d6 52 7c [binary, 4 bytes]
DEBUG:    < PONG 67 d6 52 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59047 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293183575}' [46 bytes]
2025-09-07 17:59:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293183575}
2025-09-07 17:59:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293183575}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e ad c4 0e [binary, 4 bytes]
DEBUG:    < PONG 0e ad c4 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'MX!e' [text, 4 bytes]
DEBUG:    < PONG 'MX!e' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c 06 a4 bf [binary, 4 bytes]
DEBUG:    < PONG 0c 06 a4 bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59050 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293213575}' [46 bytes]
2025-09-07 18:00:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293213575}
2025-09-07 18:00:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293213575}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a 50 86 23 [binary, 4 bytes]
DEBUG:    < PONG 1a 50 86 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'g\x17\x1d}' [text, 4 bytes]
DEBUG:    < PONG 'g\x17\x1d}' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 28 e7 72 [binary, 4 bytes]
DEBUG:    < PONG a7 28 e7 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59069 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293243575}' [46 bytes]
2025-09-07 18:00:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293243575}
2025-09-07 18:00:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293243575}
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 4e f0 3e [binary, 4 bytes]
DEBUG:    < PONG fc 4e f0 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e d7 ab 86 [binary, 4 bytes]
DEBUG:    < PONG 6e d7 ab 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 5a 47 da [binary, 4 bytes]
DEBUG:    < PONG a0 5a 47 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59102 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293273575}' [46 bytes]
2025-09-07 18:01:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293273575}
2025-09-07 18:01:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293273575}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 2f 6c 0c [binary, 4 bytes]
DEBUG:    < PONG b1 2f 6c 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 db 21 ca [binary, 4 bytes]
DEBUG:    < PONG 50 db 21 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 39 d7 19 37 [binary, 4 bytes]
DEBUG:    < PONG 39 d7 19 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59108 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293303576}' [46 bytes]
2025-09-07 18:01:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293303576}
2025-09-07 18:01:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293303576}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 53 cc 4e [binary, 4 bytes]
DEBUG:    < PONG a4 53 cc 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e f0 5f e9 [binary, 4 bytes]
DEBUG:    < PONG 4e f0 5f e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 01 27 9b [binary, 4 bytes]
DEBUG:    < PONG 85 01 27 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59112 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293333574}' [46 bytes]
2025-09-07 18:02:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293333574}
2025-09-07 18:02:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293333574}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 09 ba 5f [binary, 4 bytes]
DEBUG:    < PONG b4 09 ba 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e 4d 56 ed [binary, 4 bytes]
DEBUG:    < PONG 1e 4d 56 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c 9a 62 31 [binary, 4 bytes]
DEBUG:    < PONG 3c 9a 62 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293363576}' [46 bytes]
INFO:     127.0.0.1:59122 - "GET /health HTTP/1.1" 200 OK
2025-09-07 18:02:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293363576}
2025-09-07 18:02:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293363576}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f b6 fc f3 [binary, 4 bytes]
DEBUG:    < PONG 9f b6 fc f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 07 86 47 [binary, 4 bytes]
DEBUG:    < PONG d1 07 86 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 38 33 95 [binary, 4 bytes]
DEBUG:    < PONG 12 38 33 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59151 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293393575}' [46 bytes]
2025-09-07 18:03:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293393575}
2025-09-07 18:03:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293393575}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f cb 1e 30 [binary, 4 bytes]
DEBUG:    < PONG 1f cb 1e 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 93 0b 97 [binary, 4 bytes]
DEBUG:    < PONG 48 93 0b 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 fd 60 8d [binary, 4 bytes]
DEBUG:    < PONG b3 fd 60 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59172 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293423575}' [46 bytes]
2025-09-07 18:03:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293423575}
2025-09-07 18:03:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293423575}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:03:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:03:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:03:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:03:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:59172 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 6GZe5Ldf0Wn5HMrrAXUXqQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59176) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:03:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:03:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lVLXfkmsIy3yyt+2ksSF+4/gbzY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:03:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:03:46.891227"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:03:46.891227"}' [128 bytes]
INFO:     127.0.0.1:59178 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING be ff c6 50 [binary, 4 bytes]
DEBUG:    < PONG be ff c6 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 d2 83 e2 [binary, 4 bytes]
DEBUG:    < PONG 35 d2 83 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:59186 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: P6qdcMJ/O5+bB7iYBXUkyg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59189) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:04:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:04:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:04:08 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:04:08 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: V8He84XhN1uLuIOyYWjJm2djTqE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:04:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 18:04:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:04:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:04:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:04:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:04:08.493528"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:59190 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     connection closed
INFO:     127.0.0.1:59190 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4PoVcJgsOgNzN/BTOOl+Qw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59192) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:04:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:04:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:04:08 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 18:04:08 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: X4bvQr7bOEg+99l7E7aIOXN+vuk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:04:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:59186 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:04:08.536434"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:04:08.536434"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:04:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:04:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:04:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:04:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:59186 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: h7Ntgl0qq7E3y03oij0Kog==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59195) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:04:10 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:04:10 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: srcZqg4uFb5ElSMv12K0sIqnRvw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:04:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:59190 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:04:10.459521"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:04:10.459521"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 3c 18 52 [binary, 4 bytes]
DEBUG:    < PONG 87 3c 18 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'NÖµ)' [text, 4 bytes]
DEBUG:    < PONG 'NÖµ)' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 70 0d 3c [binary, 4 bytes]
DEBUG:    < PONG f8 70 0d 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59202 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293480466}' [46 bytes]
2025-09-07 18:04:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293480466}
2025-09-07 18:04:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293480466}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 13 b1 38 [binary, 4 bytes]
DEBUG:    < PONG 68 13 b1 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 0e e0 16 [binary, 4 bytes]
DEBUG:    < PONG f4 0e e0 16 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59208 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293510466}' [46 bytes]
2025-09-07 18:05:10 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293510466}
2025-09-07 18:05:10 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293510466}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 de 33 c3 [binary, 4 bytes]
DEBUG:    < PONG b1 de 33 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 59 f0 67 [binary, 4 bytes]
DEBUG:    < PONG cb 59 f0 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 b8 4f a0 [binary, 4 bytes]
DEBUG:    < PONG c6 b8 4f a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 ff a2 0a [binary, 4 bytes]
DEBUG:    < PONG e5 ff a2 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59218 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293540466}' [46 bytes]
2025-09-07 18:05:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293540466}
2025-09-07 18:05:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293540466}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 60 f3 d5 [binary, 4 bytes]
DEBUG:    < PONG 51 60 f3 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b fc 96 0d [binary, 4 bytes]
DEBUG:    < PONG 3b fc 96 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:59230 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
2025-09-07 18:06:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:06:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:06:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:06:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: iUJvL1aYazPagUKPI1iEGw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59232) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:06:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:06:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: imiRyNj4V7J9bLEK2sTNq2fuMO0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:06:05 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:59231 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:06:05.922210"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:06:05.922210"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 16 a6 1d [binary, 4 bytes]
DEBUG:    < PONG 51 16 a6 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 52 7e 94 [binary, 4 bytes]
DEBUG:    < PONG d1 52 7e 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 1b 54 d3 [binary, 4 bytes]
DEBUG:    < PONG 08 1b 54 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59245 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293595926}' [46 bytes]
2025-09-07 18:06:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293595926}
2025-09-07 18:06:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293595926}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 9c d1 27 [binary, 4 bytes]
DEBUG:    < PONG ed 9c d1 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f af 1b ed [binary, 4 bytes]
DEBUG:    < PONG 7f af 1b ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:06:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:06:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:06:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:06:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:59258 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Mq8nK3t8mkO8IgDNg9e38w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59262) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:06:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:06:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: bSCH6/t9duTN9y87hF9Hdt1s8zM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:06:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:59261 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:06:53.460544"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:06:53.460544"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:07:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:07:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:07:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:07:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:59268 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 3kqtgi44BvQq0EcN+Tz+gw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59270) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:07:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:07:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:59268 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: jkk1knQu82A/Lai6Ab5v0iS1z4o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:07:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:07:08.977462"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:07:08.977462"}' [128 bytes]
INFO:     127.0.0.1:59272 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:59268 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: a/olYQajgPmbybcknI6xyQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59276) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:07:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:07:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 2JYBqtK9t0mZH6kc0MBMsXkj0IA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:07:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:07:08.998672"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:07:08.998672"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:07:08.998672"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 ea f2 96 [binary, 4 bytes]
DEBUG:    < PONG 54 ea f2 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:07:28 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:07:28 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:07:28 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:07:28 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 1e 23 ca [binary, 4 bytes]
DEBUG:    < PONG af 1e 23 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 47 80 33 [binary, 4 bytes]
DEBUG:    < PONG 38 47 80 33 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 2e a7 22 [binary, 4 bytes]
DEBUG:    < PONG 9d 2e a7 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf d0 14 ff [binary, 4 bytes]
DEBUG:    < PONG cf d0 14 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 ac 69 c7 [binary, 4 bytes]
DEBUG:    < PONG 49 ac 69 c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 7a 46 b1 [binary, 4 bytes]
DEBUG:    < PONG e9 7a 46 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 18:08:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:08:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:08:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:08:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
INFO:     127.0.0.1:59306 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: r8e2U1S/suAri/bYXk1TXw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59308) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:08:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:08:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: XCzIqhw2xFIBmi9PROriemjuKzM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:08:15 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:59310 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:15.941764"}' [128 bytes]
INFO:     127.0.0.1:59306 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:59310 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: AT4bDW2KD/uMzI9N6pCYzw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59312) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:08:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:08:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gd3hkba46XfVJgdfILzbXwp2WZ8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:08:15 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:15.957564"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:15.957564"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:08:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:08:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:08:26 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:26 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:26 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:08:26 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:59345 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 8dM3fu8Vv+OpJckSOx8Y8A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59347) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:08:29 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:08:29 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:59345 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: K1ow2yaYB9kjOaHE7woUmLBhv+g=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:08:28 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:29.051912"}' [128 bytes]
INFO:     127.0.0.1:59349 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: jRh92z7agHoFThgKoFjtsg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59353) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:08:29 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:08:29 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:29.099895"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: OJpOW9l0uHzK1ZStb5N0o6d6L2U=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:08:28 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:29.099895"}' [128 bytes]
INFO:     127.0.0.1:59345 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:59360 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: k7hLb92jJ67gBuD7r5AK7Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59362) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:08:34 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:08:34 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:34.078180"}' [128 bytes]
2025-09-07 18:08:34 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:08:34 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: GFd4mxg4dh6TCfKnP1b0OzG4m/I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:08:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 18:08:34 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:34 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:08:34 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:08:34 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:34.078180"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:59364 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4B+bRA7g2knJW4ATd+QU5w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59366) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:08:37 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:08:37 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 59LodhllfjqSYOzehfqYpGUsgms=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:08:36 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:37.115167"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:08:37.115167"}' [128 bytes]
2025-09-07 18:08:37 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 18:08:37 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 1d b8 ff [binary, 4 bytes]
DEBUG:    < PONG ed 1d b8 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 96 5b f4 [binary, 4 bytes]
DEBUG:    < PONG 89 96 5b f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59372 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293747138}' [46 bytes]
2025-09-07 18:09:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293747138}
2025-09-07 18:09:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293747138}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce cd 4f cf [binary, 4 bytes]
DEBUG:    < PONG ce cd 4f cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 aa a5 74 [binary, 4 bytes]
DEBUG:    < PONG f0 aa a5 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 64 6b db [binary, 4 bytes]
DEBUG:    < PONG 0e 64 6b db [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59391 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293777138}' [46 bytes]
2025-09-07 18:09:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293777138}
2025-09-07 18:09:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293777138}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b b5 ef 69 [binary, 4 bytes]
DEBUG:    < PONG 8b b5 ef 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 a1 bb d0 [binary, 4 bytes]
DEBUG:    < PONG 90 a1 bb d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 1f a5 2b [binary, 4 bytes]
DEBUG:    < PONG 25 1f a5 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59407 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293807139}' [46 bytes]
2025-09-07 18:10:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293807139}
2025-09-07 18:10:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293807139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 3e 89 51 [binary, 4 bytes]
DEBUG:    < PONG 90 3e 89 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 41 0b c9 [binary, 4 bytes]
DEBUG:    < PONG d5 41 0b c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 9e 1d 20 [binary, 4 bytes]
DEBUG:    < PONG 96 9e 1d 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59430 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293837139}' [46 bytes]
2025-09-07 18:10:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293837139}
2025-09-07 18:10:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293837139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 44 67 fa [binary, 4 bytes]
DEBUG:    < PONG f0 44 67 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 2f 98 ed [binary, 4 bytes]
DEBUG:    < PONG 38 2f 98 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb de 7f ae [binary, 4 bytes]
DEBUG:    < PONG bb de 7f ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59439 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293867139}' [46 bytes]
2025-09-07 18:11:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293867139}
2025-09-07 18:11:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293867139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 70 57 4f [binary, 4 bytes]
DEBUG:    < PONG a3 70 57 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 45 9a 4a [binary, 4 bytes]
DEBUG:    < PONG c5 45 9a 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 94 ff 8c [binary, 4 bytes]
DEBUG:    < PONG 61 94 ff 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59481 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293897138}' [46 bytes]
2025-09-07 18:11:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293897138}
2025-09-07 18:11:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293897138}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ad d4 7b 33 [binary, 4 bytes]
DEBUG:    < PONG ad d4 7b 33 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 d7 fe c6 [binary, 4 bytes]
DEBUG:    < PONG 53 d7 fe c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 04 84 44 [binary, 4 bytes]
DEBUG:    < PONG db 04 84 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59511 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293927549}' [46 bytes]
2025-09-07 18:12:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293927549}
2025-09-07 18:12:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293927549}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b ff b2 2e [binary, 4 bytes]
DEBUG:    < PONG 1b ff b2 2e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 c4 a3 e4 [binary, 4 bytes]
DEBUG:    < PONG c6 c4 a3 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'ÏŽ9?' [text, 4 bytes]
DEBUG:    < PONG 'ÏŽ9?' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59553 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 75 66 60 [binary, 4 bytes]
DEBUG:    < PONG d2 75 66 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757293957550}' [46 bytes]
2025-09-07 18:12:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293957550}
2025-09-07 18:12:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757293957550}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 27 a9 1a [binary, 4 bytes]
DEBUG:    < PONG b0 27 a9 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f 84 6d 7e [binary, 4 bytes]
DEBUG:    < PONG 9f 84 6d 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 ba b2 45 [binary, 4 bytes]
DEBUG:    < PONG 87 ba b2 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 51 68 0f [binary, 4 bytes]
DEBUG:    < PONG 88 51 68 0f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 ae f4 dc [binary, 4 bytes]
DEBUG:    < PONG f5 ae f4 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 0e 46 ea [binary, 4 bytes]
DEBUG:    < PONG 59 0e 46 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 51 81 8c [binary, 4 bytes]
DEBUG:    < PONG 6e 51 81 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294029553}' [46 bytes]
2025-09-07 18:13:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294029553}
2025-09-07 18:13:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294029553}
INFO:     127.0.0.1:59627 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 68 23 26 [binary, 4 bytes]
DEBUG:    < PONG 80 68 23 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c b0 fa f6 [binary, 4 bytes]
DEBUG:    < PONG 6c b0 fa f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 7b 63 cc [binary, 4 bytes]
DEBUG:    < PONG 82 7b 63 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 39 36 c6 [binary, 4 bytes]
DEBUG:    < PONG 2f 39 36 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'N\x7f[\x03' [text, 4 bytes]
DEBUG:    < PONG 'N\x7f[\x03' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 9a cb 24 [binary, 4 bytes]
DEBUG:    < PONG 90 9a cb 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294089555}' [46 bytes]
2025-09-07 18:14:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294089555}
2025-09-07 18:14:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294089555}
INFO:     127.0.0.1:59704 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'a\r(;' [text, 4 bytes]
DEBUG:    < PONG 'a\r(;' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 eb de 7b [binary, 4 bytes]
DEBUG:    < PONG 42 eb de 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb e1 1f df [binary, 4 bytes]
DEBUG:    < PONG eb e1 1f df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b 0a 35 de [binary, 4 bytes]
DEBUG:    < PONG 8b 0a 35 de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'S\x04!Q' [text, 4 bytes]
DEBUG:    < PONG 'S\x04!Q' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294143037}' [46 bytes]
2025-09-07 18:15:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294143037}
2025-09-07 18:15:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294143037}
INFO:     127.0.0.1:59795 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'TV]|' [text, 4 bytes]
DEBUG:    < PONG 'TV]|' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 48 d8 79 [binary, 4 bytes]
DEBUG:    < PONG 38 48 d8 79 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59806 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294167139}' [46 bytes]
2025-09-07 18:16:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294167139}
2025-09-07 18:16:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294167139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 e2 aa 51 [binary, 4 bytes]
DEBUG:    < PONG 79 e2 aa 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 5f f6 d3 [binary, 4 bytes]
DEBUG:    < PONG bd 5f f6 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 5a f9 62 [binary, 4 bytes]
DEBUG:    < PONG ef 5a f9 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59846 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294197139}' [46 bytes]
2025-09-07 18:16:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294197139}
2025-09-07 18:16:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294197139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 90 cb 4a [binary, 4 bytes]
DEBUG:    < PONG 68 90 cb 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 0f 9f 41 [binary, 4 bytes]
DEBUG:    < PONG 95 0f 9f 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 8e 20 cd [binary, 4 bytes]
DEBUG:    < PONG 06 8e 20 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59868 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294227140}' [46 bytes]
2025-09-07 18:17:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294227140}
2025-09-07 18:17:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294227140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 40 f4 e1 [binary, 4 bytes]
DEBUG:    < PONG 96 40 f4 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 09 41 9b [binary, 4 bytes]
DEBUG:    < PONG 47 09 41 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 fb eb 90 [binary, 4 bytes]
DEBUG:    < PONG 23 fb eb 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59879 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294257140}' [46 bytes]
2025-09-07 18:17:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294257140}
2025-09-07 18:17:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294257140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 1f a8 e4 [binary, 4 bytes]
DEBUG:    < PONG 45 1f a8 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 12 a3 e4 [binary, 4 bytes]
DEBUG:    < PONG b2 12 a3 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 22 27 10 [binary, 4 bytes]
DEBUG:    < PONG 84 22 27 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59885 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294287140}' [46 bytes]
2025-09-07 18:18:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294287140}
2025-09-07 18:18:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294287140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 cd ff dd [binary, 4 bytes]
DEBUG:    < PONG 56 cd ff dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 5d fb 30 [binary, 4 bytes]
DEBUG:    < PONG e7 5d fb 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 42 74 89 [binary, 4 bytes]
DEBUG:    < PONG 9b 42 74 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59899 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294317140}' [46 bytes]
2025-09-07 18:18:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294317140}
2025-09-07 18:18:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294317140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 04 c3 3c [binary, 4 bytes]
DEBUG:    < PONG ab 04 c3 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 6e e9 b8 [binary, 4 bytes]
DEBUG:    < PONG 7c 6e e9 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 9c 75 1f [binary, 4 bytes]
DEBUG:    < PONG b6 9c 75 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59909 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294347140}' [46 bytes]
2025-09-07 18:19:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294347140}
2025-09-07 18:19:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294347140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 3b 26 f6 [binary, 4 bytes]
DEBUG:    < PONG b6 3b 26 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 30 d2 30 [binary, 4 bytes]
DEBUG:    < PONG 02 30 d2 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 88 15 66 [binary, 4 bytes]
DEBUG:    < PONG a7 88 15 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59922 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294377139}' [46 bytes]
2025-09-07 18:19:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294377139}
2025-09-07 18:19:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294377139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce a9 7d 85 [binary, 4 bytes]
DEBUG:    < PONG ce a9 7d 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 16 b5 c3 a2 [binary, 4 bytes]
DEBUG:    < PONG 16 b5 c3 a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 6b 47 ff [binary, 4 bytes]
DEBUG:    < PONG 58 6b 47 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59925 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294407140}' [46 bytes]
2025-09-07 18:20:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294407140}
2025-09-07 18:20:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294407140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 48 66 ca [binary, 4 bytes]
DEBUG:    < PONG a8 48 66 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 2c a8 4f [binary, 4 bytes]
DEBUG:    < PONG 44 2c a8 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 8e c9 18 [binary, 4 bytes]
DEBUG:    < PONG c5 8e c9 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59931 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294437139}' [46 bytes]
2025-09-07 18:20:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294437139}
2025-09-07 18:20:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294437139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 21 74 98 [binary, 4 bytes]
DEBUG:    < PONG 23 21 74 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 12 22 9a [binary, 4 bytes]
DEBUG:    < PONG d4 12 22 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 eb 2a f8 [binary, 4 bytes]
DEBUG:    < PONG 84 eb 2a f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59937 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294467139}' [46 bytes]
2025-09-07 18:21:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294467139}
2025-09-07 18:21:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294467139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 34 ad 52 51 [binary, 4 bytes]
DEBUG:    < PONG 34 ad 52 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 3a 9f 60 [binary, 4 bytes]
DEBUG:    < PONG 54 3a 9f 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 3c 23 b1 [binary, 4 bytes]
DEBUG:    < PONG 41 3c 23 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59969 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294497140}' [46 bytes]
2025-09-07 18:21:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294497140}
2025-09-07 18:21:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294497140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd b3 00 cc [binary, 4 bytes]
DEBUG:    < PONG cd b3 00 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 6e e9 63 [binary, 4 bytes]
DEBUG:    < PONG d7 6e e9 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a a3 f8 48 [binary, 4 bytes]
DEBUG:    < PONG 4a a3 f8 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59972 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294527140}' [46 bytes]
2025-09-07 18:22:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294527140}
2025-09-07 18:22:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294527140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c de 6f 1c [binary, 4 bytes]
DEBUG:    < PONG 5c de 6f 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 00 b0 25 [binary, 4 bytes]
DEBUG:    < PONG 3e 00 b0 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 a8 81 f0 [binary, 4 bytes]
DEBUG:    < PONG 21 a8 81 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59979 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294557140}' [46 bytes]
2025-09-07 18:22:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294557140}
2025-09-07 18:22:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294557140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 d5 70 e7 [binary, 4 bytes]
DEBUG:    < PONG 21 d5 70 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 26 e8 d3 [binary, 4 bytes]
DEBUG:    < PONG d7 26 e8 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x12VEX' [text, 4 bytes]
DEBUG:    < PONG '\x12VEX' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59981 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294587138}' [46 bytes]
2025-09-07 18:23:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294587138}
2025-09-07 18:23:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294587138}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 6c eb 3a [binary, 4 bytes]
DEBUG:    < PONG 61 6c eb 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 e3 e6 c2 [binary, 4 bytes]
DEBUG:    < PONG f9 e3 e6 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb e4 44 a5 [binary, 4 bytes]
DEBUG:    < PONG eb e4 44 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59987 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294617139}' [46 bytes]
2025-09-07 18:23:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294617139}
2025-09-07 18:23:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294617139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 2a 16 cc [binary, 4 bytes]
DEBUG:    < PONG 18 2a 16 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 c2 b7 a0 [binary, 4 bytes]
DEBUG:    < PONG 72 c2 b7 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 32 8b cf [binary, 4 bytes]
DEBUG:    < PONG d0 32 8b cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59990 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294647138}' [46 bytes]
2025-09-07 18:24:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294647138}
2025-09-07 18:24:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294647138}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 10 f4 55 [binary, 4 bytes]
DEBUG:    < PONG 90 10 f4 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 01 1f 04 [binary, 4 bytes]
DEBUG:    < PONG fe 01 1f 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 4f 3c 41 [binary, 4 bytes]
DEBUG:    < PONG e6 4f 3c 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59997 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294677137}' [46 bytes]
2025-09-07 18:24:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294677137}
2025-09-07 18:24:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294677137}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb 5a ee e7 [binary, 4 bytes]
DEBUG:    < PONG bb 5a ee e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 3c 47 d0 [binary, 4 bytes]
DEBUG:    < PONG 29 3c 47 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 5a 2e 2c [binary, 4 bytes]
DEBUG:    < PONG a3 5a 2e 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60000 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294707140}' [46 bytes]
2025-09-07 18:25:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294707140}
2025-09-07 18:25:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294707140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 ea 9b 97 [binary, 4 bytes]
DEBUG:    < PONG 85 ea 9b 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 42 b0 77 [binary, 4 bytes]
DEBUG:    < PONG 36 42 b0 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 8a 38 63 [binary, 4 bytes]
DEBUG:    < PONG eb 8a 38 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60006 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294737139}' [46 bytes]
2025-09-07 18:25:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294737139}
2025-09-07 18:25:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294737139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 c9 b5 98 [binary, 4 bytes]
DEBUG:    < PONG 85 c9 b5 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 29 28 d0 [binary, 4 bytes]
DEBUG:    < PONG 36 29 28 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a 00 24 91 [binary, 4 bytes]
DEBUG:    < PONG 1a 00 24 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60018 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294767140}' [46 bytes]
2025-09-07 18:26:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294767140}
2025-09-07 18:26:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294767140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 31 db 7a [binary, 4 bytes]
DEBUG:    < PONG b0 31 db 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 35 be a0 [binary, 4 bytes]
DEBUG:    < PONG af 35 be a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 6e e8 0e [binary, 4 bytes]
DEBUG:    < PONG 79 6e e8 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60035 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294797139}' [46 bytes]
2025-09-07 18:26:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294797139}
2025-09-07 18:26:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294797139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 a2 1d c0 [binary, 4 bytes]
DEBUG:    < PONG 04 a2 1d c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 30 37 dc [binary, 4 bytes]
DEBUG:    < PONG 9c 30 37 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a f2 1c 7b [binary, 4 bytes]
DEBUG:    < PONG 1a f2 1c 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60038 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294827139}' [46 bytes]
2025-09-07 18:27:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294827139}
2025-09-07 18:27:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294827139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 45 05 b0 [binary, 4 bytes]
DEBUG:    < PONG 52 45 05 b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c f3 70 25 [binary, 4 bytes]
DEBUG:    < PONG 7c f3 70 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 7f c7 91 [binary, 4 bytes]
DEBUG:    < PONG cd 7f c7 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60046 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294857139}' [46 bytes]
2025-09-07 18:27:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294857139}
2025-09-07 18:27:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294857139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d 19 55 dc [binary, 4 bytes]
DEBUG:    < PONG 3d 19 55 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac ec 12 e8 [binary, 4 bytes]
DEBUG:    < PONG ac ec 12 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Ý·n_' [text, 4 bytes]
DEBUG:    < PONG 'Ý·n_' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60048 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294887139}' [46 bytes]
2025-09-07 18:28:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294887139}
2025-09-07 18:28:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294887139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 40 fc d5 [binary, 4 bytes]
DEBUG:    < PONG 80 40 fc d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 2d e5 7f [binary, 4 bytes]
DEBUG:    < PONG 22 2d e5 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING de 4b 45 a4 [binary, 4 bytes]
DEBUG:    < PONG de 4b 45 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60056 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294917140}' [46 bytes]
2025-09-07 18:28:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294917140}
2025-09-07 18:28:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294917140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 e3 46 4e [binary, 4 bytes]
DEBUG:    < PONG b2 e3 46 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 ac 17 a1 [binary, 4 bytes]
DEBUG:    < PONG f8 ac 17 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 46 1e e6 [binary, 4 bytes]
DEBUG:    < PONG a5 46 1e e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60072 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294947140}' [46 bytes]
2025-09-07 18:29:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294947140}
2025-09-07 18:29:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294947140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 87 58 94 [binary, 4 bytes]
DEBUG:    < PONG 00 87 58 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 a8 c9 d5 [binary, 4 bytes]
DEBUG:    < PONG 99 a8 c9 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 66 57 cb [binary, 4 bytes]
DEBUG:    < PONG 9d 66 57 cb [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60079 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757294977140}' [46 bytes]
2025-09-07 18:29:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294977140}
2025-09-07 18:29:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757294977140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc c7 91 36 [binary, 4 bytes]
DEBUG:    < PONG cc c7 91 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 26 b2 75 [binary, 4 bytes]
DEBUG:    < PONG 67 26 b2 75 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 ad e8 e6 [binary, 4 bytes]
DEBUG:    < PONG 54 ad e8 e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60094 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295007141}' [46 bytes]
2025-09-07 18:30:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295007141}
2025-09-07 18:30:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295007141}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 8b 39 cb [binary, 4 bytes]
DEBUG:    < PONG b7 8b 39 cb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 5f 48 ab [binary, 4 bytes]
DEBUG:    < PONG 02 5f 48 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 19 20 27 [binary, 4 bytes]
DEBUG:    < PONG ce 19 20 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60101 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295037139}' [46 bytes]
2025-09-07 18:30:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295037139}
2025-09-07 18:30:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295037139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 2f 05 a0 [binary, 4 bytes]
DEBUG:    < PONG d3 2f 05 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 71 c8 da [binary, 4 bytes]
DEBUG:    < PONG 60 71 c8 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 53 79 e4 [binary, 4 bytes]
DEBUG:    < PONG 0b 53 79 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60107 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295067141}' [46 bytes]
2025-09-07 18:31:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295067141}
2025-09-07 18:31:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295067141}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 9c 82 62 [binary, 4 bytes]
DEBUG:    < PONG 1c 9c 82 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 fb 80 e5 [binary, 4 bytes]
DEBUG:    < PONG 83 fb 80 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 d0 3a c1 [binary, 4 bytes]
DEBUG:    < PONG d7 d0 3a c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60139 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295097139}' [46 bytes]
2025-09-07 18:31:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295097139}
2025-09-07 18:31:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295097139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 99 2e 0c [binary, 4 bytes]
DEBUG:    < PONG 27 99 2e 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 ef e9 f1 [binary, 4 bytes]
DEBUG:    < PONG 10 ef e9 f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc ce b1 7c [binary, 4 bytes]
DEBUG:    < PONG fc ce b1 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60154 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295127140}' [46 bytes]
2025-09-07 18:32:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295127140}
2025-09-07 18:32:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295127140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 ca 53 a1 [binary, 4 bytes]
DEBUG:    < PONG 44 ca 53 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 1e f2 6c [binary, 4 bytes]
DEBUG:    < PONG ac 1e f2 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d 4a 70 c1 [binary, 4 bytes]
DEBUG:    < PONG 1d 4a 70 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60202 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295157139}' [46 bytes]
2025-09-07 18:32:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295157139}
2025-09-07 18:32:37 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295157139}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 0f 3b f9 [binary, 4 bytes]
DEBUG:    < PONG f5 0f 3b f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 c3 89 e9 [binary, 4 bytes]
DEBUG:    < PONG 65 c3 89 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 eb 54 b3 [binary, 4 bytes]
DEBUG:    < PONG 46 eb 54 b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60208 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295187140}' [46 bytes]
2025-09-07 18:33:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295187140}
2025-09-07 18:33:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295187140}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 8f 21 68 [binary, 4 bytes]
DEBUG:    < PONG 61 8f 21 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 2b 1b 7e [binary, 4 bytes]
DEBUG:    < PONG b6 2b 1b 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:33:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:33:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:33:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:33:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60214 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: VXAmLtJ3vWSl00SEXrnyFw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60216) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:33:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:33:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:33:22.758316"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ZTM0SHRYbwOZiZrqeMRpE8po6L4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:33:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:33:22.758316"}' [128 bytes]
INFO:     127.0.0.1:60214 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab a0 44 52 [binary, 4 bytes]
DEBUG:    < PONG ab a0 44 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 09 c1 1e [binary, 4 bytes]
DEBUG:    < PONG 96 09 c1 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1aÈ\x1d' [text, 4 bytes]
DEBUG:    < PONG '\x1aÈ\x1d' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60224 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295232769}' [46 bytes]
2025-09-07 18:33:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295232769}
2025-09-07 18:33:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295232769}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 1f c1 5d [binary, 4 bytes]
DEBUG:    < PONG bd 1f c1 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 34 90 d0 23 [binary, 4 bytes]
DEBUG:    < PONG 34 90 d0 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60238 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 00 34 cf [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295262772}' [46 bytes]
DEBUG:    < PONG 11 00 34 cf [binary, 4 bytes]
2025-09-07 18:34:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295262772}
2025-09-07 18:34:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295262772}
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 cf 85 3f [binary, 4 bytes]
DEBUG:    < PONG 88 cf 85 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 66 fe 91 [binary, 4 bytes]
DEBUG:    < PONG 01 66 fe 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:34:48 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:34:48 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:34:48 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:34:48 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60261 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: zAlHHhDWz7cLLGe2knY5Cw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60265) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:34:48 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:34:48 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:34:48.380368"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: XfLrfopQI/o/YGDpoLK1ahxc5SA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:34:47 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:34:48.380368"}' [128 bytes]
INFO:     127.0.0.1:60264 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 ec 64 12 [binary, 4 bytes]
DEBUG:    < PONG 30 ec 64 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60270 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ydz+ZDsrwGE8/GqOdt6tBw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60272) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:35:01 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:35:01 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:35:01.804377"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: FU2JHBgn3XXavcsTk9lOS6G17A4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:35:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:35:01.804377"}' [128 bytes]
2025-09-07 18:35:01 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:35:01 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:35:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:35:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:35:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:35:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60274 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:35:07 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:35:07 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:35:07 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:35:07 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 3a 81 1d [binary, 4 bytes]
DEBUG:    < PONG 7c 3a 81 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 e9 f8 2d [binary, 4 bytes]
DEBUG:    < PONG a7 e9 f8 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 0e 1a a6 [binary, 4 bytes]
DEBUG:    < PONG 05 0e 1a a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c c4 45 71 [binary, 4 bytes]
DEBUG:    < PONG 6c c4 45 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 c0 fc fe [binary, 4 bytes]
DEBUG:    < PONG 98 c0 fc fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 06 ea af [binary, 4 bytes]
DEBUG:    < PONG c3 06 ea af [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60359 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: JVyM6sLDN+JAP0kcYqIkGw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60361) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:36:49 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:36:49 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:36:49.789834"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 9TFb+jgnF5McuXazLQF3W4eXZwA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:36:48 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60365 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:36:49.789834"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: vra8MeIPc991BZorURDxvQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:60363 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 60367) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:36:49 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:36:49 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:36:49.908347"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: aJVBez2xsiZGkmnplsRoHD0l0So=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:36:48 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:36:49.908347"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:36:49.908347"}' [128 bytes]
INFO:     127.0.0.1:60365 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60386 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: yZsY4X1rCaIe4kqDeYzl2w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60389) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:07 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:07 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:07.041321"}' [128 bytes]
2025-09-07 18:37:07 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:37:07 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:07.041321"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: fJdSb85YwNMier9avVowaDKRtxg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:06 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:07.041321"}' [128 bytes]
2025-09-07 18:37:07 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:07 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:07 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:07 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60390 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60390 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Hu6tusWOL1tDXtagv6Kn/A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60393) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:09 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:09 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:09.096780"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:09.096780"}' [128 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: aXnoyvZybZjRBFMzTeWI4CS1esQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60386 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 18:37:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:09 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:37:09 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     connection closed
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING de 9d 74 f6 [binary, 4 bytes]
DEBUG:    < PONG de 9d 74 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 f3 8f e2 [binary, 4 bytes]
DEBUG:    < PONG 10 f3 8f e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XvvkxXyFR1CkFiM1s5Pvjw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60406) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:12 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:12 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:12.464961"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: fHmMxBiX0wp04RysArS+oQlFvrI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:12.464961"}' [128 bytes]
2025-09-07 18:37:12 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 18:37:12 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:12.464961"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60411 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
2025-09-07 18:37:13 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:13 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:13 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:13 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: r7CfEKHQHyvDLrGgzjnHYw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60415) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:13.989760"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:13.989760"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: vxnzsCtcO1Mp9AcJs5O9C0p+68g=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:13 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60414 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:13.989760"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:37:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60419 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 67hMv5FsjI9T14NNxUlzkw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60422) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:16 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:16 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: FVBwYd9WSRUi8mQ5TbXE5aKE0sA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:15 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:16.057817"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:16.057817"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:16.057817"}' [128 bytes]
INFO:     127.0.0.1:60423 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a be d4 fa [binary, 4 bytes]
DEBUG:    < PONG 7a be d4 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 2b 97 6f [binary, 4 bytes]
DEBUG:    < PONG 43 2b 97 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:37:34 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:34 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:34 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:34 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60430 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: fzyUdIzDYHPFt8g5XNwFGQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60432) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:34 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:34 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:34.244145"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:34.244145"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: X/nz81qE7U2xmuxUhFpTt+kXTQQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:34.244145"}' [128 bytes]
INFO:     127.0.0.1:60434 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 9f 16 aa [binary, 4 bytes]
DEBUG:    < PONG da 9f 16 aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca ee ce 95 [binary, 4 bytes]
DEBUG:    < PONG ca ee ce 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:37:50 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:50 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:50 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:50 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60450 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ky2mL9EfeIzLzwhXkV1A5w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60453) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:50 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:50 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:50.958598"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:50.958598"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gIIu1/oKeZfS/lK7+xTjDCp1U1E=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:50 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:50.958598"}' [128 bytes]
INFO:     127.0.0.1:60454 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60454 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 9WJCtpyWQ8Ta40ZW0VWW7w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60456) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:54.043131"}' [128 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 5TcyxHHm0c+gMGiGvSbjIej7vWM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60450 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:54.043131"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:54.043131"}' [128 bytes]
2025-09-07 18:37:54 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:37:54 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:37:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:37:55 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:55 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:55 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:55 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60460 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: uwN1oIV7YGZwbQP/ePoxMA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60464) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:55 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:55 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:55.382948"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: WSghhUlQSXbdP/0y5F4ql5pcfmQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:55.382948"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:55.382948"}' [128 bytes]
INFO:     127.0.0.1:60463 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60463 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: fdbXaXMAvmtQ71yZuQMuCQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60466) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:37:57 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:37:57 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: TQid9NMnTuIvFvfJvbj0pzO4xeQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:37:56 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60460 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:57.061950"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:57.061950"}' [128 bytes]
2025-09-07 18:37:57 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:37:57 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:37:57.061950"}' [128 bytes]
2025-09-07 18:37:57 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:57 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:37:57 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:37:57 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60470 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: z8VM/098Q4CTVISKaNE3dg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60473) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:38:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:38:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:38:04 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:38:04 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:04.785220"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: PKzvgcB5yK/Sy2zuEdC5SNeCMrk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:38:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:04.785220"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:04.785220"}' [128 bytes]
2025-09-07 18:38:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:38:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:38:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:38:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60474 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 b7 82 f7 [binary, 4 bytes]
DEBUG:    < PONG f6 b7 82 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 43 51 44 [binary, 4 bytes]
DEBUG:    < PONG c3 43 51 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60492 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: LPGwi7xuVkckZf5Ydj6V9Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60495) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:38:19 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:38:19 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:19.789724"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ohHN3g9iMgaKlHttjZXznP7LbQA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:38:19 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:19.789724"}' [128 bytes]
2025-09-07 18:38:19 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:38:19 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:19.789724"}' [128 bytes]
2025-09-07 18:38:19 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:38:19 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:38:19 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:38:19 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60496 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60496 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Pg7r+TlkPYyLEEx339rvSg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60502) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:38:21 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:38:21 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: pKkP0kewNcTNJK6Z5nzG9SgETNI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:38:21 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:21.670314"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:21.670314"}' [128 bytes]
2025-09-07 18:38:21 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:38:21 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:21.670314"}' [128 bytes]
INFO:     127.0.0.1:60492 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 18:38:21 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:38:21 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:38:21 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:38:21 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:38:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:38:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:38:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:38:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60508 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: M9GIWzpJry5xKlBi4pVxTQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60510) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:38:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:38:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:25.688955"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Rw0TY8Dw5XxuiRpU8PlJuDhDUSQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:38:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:25.688955"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:38:25.688955"}' [128 bytes]
INFO:     127.0.0.1:60512 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 47 42 4b [binary, 4 bytes]
DEBUG:    < PONG f1 47 42 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea fa d5 11 [binary, 4 bytes]
DEBUG:    < PONG ea fa d5 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a f2 56 76 [binary, 4 bytes]
DEBUG:    < PONG 0a f2 56 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Õš\x7f\t' [text, 4 bytes]
DEBUG:    < PONG 'Õš\x7f\t' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a f7 53 95 [binary, 4 bytes]
DEBUG:    < PONG 1a f7 53 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60520 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295535694}' [46 bytes]
2025-09-07 18:38:55 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295535694}
2025-09-07 18:38:55 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295535694}
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 73 f4 38 [binary, 4 bytes]
DEBUG:    < PONG eb 73 f4 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 78 5c 94 [binary, 4 bytes]
DEBUG:    < PONG 71 78 5c 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 ed fd b0 [binary, 4 bytes]
DEBUG:    < PONG e0 ed fd b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60538 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: kyGNlmzGvFTvUNSa10ppuQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60541) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:39:12 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:39:12 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:12.588906"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: sulW5IJrbm1cb+5lIEzZAg2VPyo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:39:12 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:12.588906"}' [128 bytes]
2025-09-07 18:39:12 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:39:12 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:12.588906"}' [128 bytes]
2025-09-07 18:39:12 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:39:12 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:39:12 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:39:12 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60542 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d e3 f0 32 [binary, 4 bytes]
DEBUG:    < PONG 1d e3 f0 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 9f a2 34 [binary, 4 bytes]
DEBUG:    < PONG b4 9f a2 34 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:39:31 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:39:31 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:39:31 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:39:31 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60556 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: EXHHisaXcH/aJwG7P6C85w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60558) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:39:31 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:39:31 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: pRi/dgd8OEB92CNEtwAEHp2viH8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:39:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:31.602816"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:31.602816"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:31.602816"}' [128 bytes]
INFO:     127.0.0.1:60560 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'B\r5E' [text, 4 bytes]
DEBUG:    < PONG 'B\r5E' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 13 85 51 [binary, 4 bytes]
DEBUG:    < PONG d7 13 85 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 68 e8 15 [binary, 4 bytes]
DEBUG:    < PONG 12 68 e8 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60565 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 2SGhcXeVTvnFtt0ZHzuT1g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60568) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:39:55 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:39:55 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:39:55 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:39:55 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:55.697887"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:55.697887"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: aDhcc3bGPGLuRBs6uHZY/jiAsK8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:39:54 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 18:39:55 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:39:55 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:39:55 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:39:55 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:55.697887"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:60569 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     127.0.0.1:60569 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ITiu7mZNq5Bq3/XJ/bcsPg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60572) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:39:57 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:39:57 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:57.410244"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:57.410244"}' [128 bytes]
2025-09-07 18:39:57 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 18:39:57 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: JIqmMgD5qDxPElcvlmxMI9jW4j0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:39:56 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:39:57.410244"}' [128 bytes]
INFO:     127.0.0.1:60565 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 31 d2 28 [binary, 4 bytes]
DEBUG:    < PONG b4 31 d2 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 06 e8 d2 [binary, 4 bytes]
DEBUG:    < PONG df 06 e8 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:40:11 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:40:11 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:40:11 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:40:11 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60579 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: QcWY/kl4LmuDkUhlIAdSCw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60582) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:40:11 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:40:11 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:40:11.675556"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: C7N/b2h1Srx/f5Vo/SWVjqzsybY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:40:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:40:11.675556"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:40:11.675556"}' [128 bytes]
INFO:     127.0.0.1:60583 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f a4 76 fb [binary, 4 bytes]
DEBUG:    < PONG 8f a4 76 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b 75 3f bc [binary, 4 bytes]
DEBUG:    < PONG 8b 75 3f bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60590 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
2025-09-07 18:40:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:40:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:40:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:40:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: qnIGkyVsVy6C6GaE9AWEYA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60593) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:40:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:40:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:40:30.717821"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:40:30.717821"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: s+0kAfxWerqabztVFSke1CPCqvE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:40:30 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:40:30.717821"}' [128 bytes]
INFO:     127.0.0.1:60594 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 ea fa 61 [binary, 4 bytes]
DEBUG:    < PONG 63 ea fa 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '%\x0e\x01(' [text, 4 bytes]
DEBUG:    < PONG '%\x0e\x01(' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 cb 64 ca [binary, 4 bytes]
DEBUG:    < PONG b4 cb 64 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60600 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295660725}' [46 bytes]
2025-09-07 18:41:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295660725}
2025-09-07 18:41:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295660725}
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa 2a e2 66 [binary, 4 bytes]
DEBUG:    < PONG aa 2a e2 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e ee 15 d9 [binary, 4 bytes]
DEBUG:    < PONG 7e ee 15 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 6a 43 fb [binary, 4 bytes]
DEBUG:    < PONG fe 6a 43 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 99 bd 2b [binary, 4 bytes]
DEBUG:    < PONG 5b 99 bd 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 21 9e 91 [binary, 4 bytes]
DEBUG:    < PONG 70 21 9e 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60625 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295690724}' [46 bytes]
2025-09-07 18:41:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295690724}
2025-09-07 18:41:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295690724}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 33 a6 5c [binary, 4 bytes]
DEBUG:    < PONG 8a 33 a6 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60631 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 b9 fe a3 [binary, 4 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 849hCz+gSfeVGIe/ccRIuw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60635) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:41:49 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:41:49 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:41:49.779481"}' [128 bytes]
DEBUG:    < PONG d3 b9 fe a3 [binary, 4 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: OIOBYDFjE4rahcj66EX+RBA9s94=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:41:49 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 18:41:49 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:41:49 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:41:49 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:41:49 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60634 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:41:49.779481"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    % received keepalive pong
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x0flF\n' [text, 4 bytes]
DEBUG:    < PONG '\x0flF\n' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ROYffnWYSrpJLNlm+CIGvQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60637) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:41:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:41:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:41:52.788905"}' [128 bytes]
2025-09-07 18:41:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 18:41:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:41:52.788905"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: H0AVq0zXNt0GId4SlMIJVcxKbQw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:41:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:41:52.788905"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 b2 53 d7 [binary, 4 bytes]
DEBUG:    < PONG 22 b2 53 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 2f 52 98 [binary, 4 bytes]
DEBUG:    < PONG 0e 2f 52 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 03 aa d7 [binary, 4 bytes]
DEBUG:    < PONG 79 03 aa d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60644 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295742792}' [46 bytes]
2025-09-07 18:42:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295742792}
2025-09-07 18:42:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295742792}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 5a 0f 79 [binary, 4 bytes]
DEBUG:    < PONG d8 5a 0f 79 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 05 93 c8 [binary, 4 bytes]
DEBUG:    < PONG 8d 05 93 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 3f 20 8f [binary, 4 bytes]
DEBUG:    < PONG c0 3f 20 8f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60661 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 9a 9a b3 [binary, 4 bytes]
DEBUG:    < PONG 5b 9a 9a b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 57 8d f7 [binary, 4 bytes]
DEBUG:    < PONG fa 57 8d f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295772793}' [46 bytes]
2025-09-07 18:42:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295772793}
2025-09-07 18:42:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295772793}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 44 88 d0 [binary, 4 bytes]
DEBUG:    < PONG d7 44 88 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 d9 6b 97 [binary, 4 bytes]
DEBUG:    < PONG 36 d9 6b 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 59 d0 11 [binary, 4 bytes]
DEBUG:    < PONG 1f 59 d0 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 c9 6c 6a [binary, 4 bytes]
DEBUG:    < PONG 82 c9 6c 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60683 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295802791}' [46 bytes]
2025-09-07 18:43:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295802791}
2025-09-07 18:43:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295802791}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 82 5e d8 [binary, 4 bytes]
DEBUG:    < PONG f3 82 5e d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b cf cd fd [binary, 4 bytes]
DEBUG:    < PONG 1b cf cd fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 24 94 1e [binary, 4 bytes]
DEBUG:    < PONG 83 24 94 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60707 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1N0FwY/Iv5MwkMlv6L2RPA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60709) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:43:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:43:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:43:46.950280"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 62AjdosJ55J4tIE9mLngFuLsj68=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:43:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:43:46.950280"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:43:46.950280"}' [128 bytes]
2025-09-07 18:43:46 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:43:46 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:43:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:43:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:43:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:43:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60711 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 b5 67 b0 [binary, 4 bytes]
DEBUG:    < PONG 15 b5 67 b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 e2 27 1c [binary, 4 bytes]
DEBUG:    < PONG a1 e2 27 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 9f 59 42 [binary, 4 bytes]
DEBUG:    < PONG f5 9f 59 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 6c a2 54 [binary, 4 bytes]
DEBUG:    < PONG 4a 6c a2 54 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 4b cb 4b [binary, 4 bytes]
DEBUG:    < PONG db 4b cb 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60718 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: uDsfij/BhDhuLDj4VWpWbw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60721) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:44:14 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:44:14 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:14.041628"}' [128 bytes]
2025-09-07 18:44:14 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:44:14 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:14.041628"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: j5CY+hZiKPgBA1VDsE0dy4kouJc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:44:13 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 18:44:14 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:44:14 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:44:14 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:44:14 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:14.041628"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:60722 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ojkVHpi2VibM0abrbxnXVg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60724) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:44:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:44:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:17.059522"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:17.059522"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: OEWx/kJwEIP7HolhZcW3G7V3Pxs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:44:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:17.059522"}' [128 bytes]
2025-09-07 18:44:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 18:44:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:44:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:44:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:44:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:44:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60730 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: DmLpAjW1EYlHJuQBWUSa6g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60732) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:44:23 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:44:23 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: R4ZAcQmEZcpz28WgTllzUp3v95o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:44:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:23.158631"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:23.158631"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:23.158631"}' [128 bytes]
INFO:     127.0.0.1:60734 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 57 ad 8d [binary, 4 bytes]
DEBUG:    < PONG a7 57 ad 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 1a ec 0e [binary, 4 bytes]
DEBUG:    < PONG 6e 1a ec 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 18 b5 4f [binary, 4 bytes]
DEBUG:    < PONG e6 18 b5 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:44:43 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:44:43 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:44:43 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:44:43 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60741 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: uJXAyyLYBGlCrSVe3gbzXg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60744) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:44:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:44:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:43.594867"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 6K230PJ0knnqvwvBfHZEU0/s7/s=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:44:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:43.594867"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:43.594867"}' [128 bytes]
INFO:     127.0.0.1:60743 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60748 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: R7LezXXSLiDGcXnb4JfsAg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60751) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:44:47 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:44:47 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:47.444725"}' [128 bytes]
2025-09-07 18:44:47 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:44:47 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: BTCuDzOy4m79Q1YwWOKOZGsztcs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:44:47 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:47.444725"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:44:47.444725"}' [128 bytes]
2025-09-07 18:44:47 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:44:47 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:44:47 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:44:47 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60752 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 6a f8 64 [binary, 4 bytes]
DEBUG:    < PONG e6 6a f8 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea 41 77 56 [binary, 4 bytes]
DEBUG:    < PONG ea 41 77 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 41 dd 41 [binary, 4 bytes]
DEBUG:    < PONG 92 41 dd 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:45:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:45:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:45:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:45:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60772 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: MHy0sh3EypNffAynkzJGuw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60775) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:45:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:45:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:45:08.391514"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 1wwCCFjHebOa34hAzmHkBUHJY7s=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:45:07 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:45:08.391514"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:45:08.391514"}' [128 bytes]
INFO:     127.0.0.1:60776 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc 19 b6 de [binary, 4 bytes]
DEBUG:    < PONG cc 19 b6 de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'S,)\x01' [text, 4 bytes]
DEBUG:    < PONG 'S,)\x01' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 12 18 52 [binary, 4 bytes]
DEBUG:    < PONG 9a 12 18 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 17 44 7f [binary, 4 bytes]
DEBUG:    < PONG c3 17 44 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 8e 4b 03 [binary, 4 bytes]
DEBUG:    < PONG 84 8e 4b 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:45:31 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:45:31 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:45:31 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:45:31 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:60787 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: dUBb9EH34udpDplj0xzn+w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60790) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:45:31 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:45:31 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Ly48WUvVkMZMHYYG1mX7YZvDvQM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:45:30 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:45:31.177858"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:45:31.177858"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:45:31.177858"}' [128 bytes]
INFO:     127.0.0.1:60791 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 17 d9 aa [binary, 4 bytes]
DEBUG:    < PONG e8 17 d9 aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 ba 3f ca [binary, 4 bytes]
DEBUG:    < PONG 06 ba 3f ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 39 98 b8 [binary, 4 bytes]
DEBUG:    < PONG d8 39 98 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60801 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295961181}' [46 bytes]
2025-09-07 18:46:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295961181}
2025-09-07 18:46:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295961181}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 62 cf f1 [binary, 4 bytes]
DEBUG:    < PONG 35 62 cf f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 6e a9 58 [binary, 4 bytes]
DEBUG:    < PONG 05 6e a9 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '-@\x10\x15' [text, 4 bytes]
DEBUG:    < PONG '-@\x10\x15' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 d9 fd 22 [binary, 4 bytes]
DEBUG:    < PONG e2 d9 fd 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 41 0e 98 [binary, 4 bytes]
DEBUG:    < PONG c6 41 0e 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60813 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757295991181}' [46 bytes]
2025-09-07 18:46:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295991181}
2025-09-07 18:46:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757295991181}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 61 a2 09 [binary, 4 bytes]
DEBUG:    < PONG 9d 61 a2 09 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 13 fe 55 [binary, 4 bytes]
DEBUG:    < PONG b3 13 fe 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 06 d5 c8 [binary, 4 bytes]
DEBUG:    < PONG 30 06 d5 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 38 96 01 [binary, 4 bytes]
DEBUG:    < PONG c3 38 96 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60828 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296021181}' [46 bytes]
2025-09-07 18:47:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296021181}
2025-09-07 18:47:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296021181}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 a9 a3 fa [binary, 4 bytes]
DEBUG:    < PONG 07 a9 a3 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c ff d7 7d [binary, 4 bytes]
DEBUG:    < PONG 2c ff d7 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 83 06 b9 [binary, 4 bytes]
DEBUG:    < PONG 90 83 06 b9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 60 31 3c [binary, 4 bytes]
DEBUG:    < PONG e5 60 31 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a 91 7c 68 [binary, 4 bytes]
DEBUG:    < PONG 0a 91 7c 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296051182}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 47 a3 00 [binary, 4 bytes]
2025-09-07 18:47:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296051182}
2025-09-07 18:47:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296051182}
INFO:     127.0.0.1:60859 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < PONG e5 47 a3 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 bd d6 bc [binary, 4 bytes]
DEBUG:    < PONG 53 bd d6 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 4d c8 64 [binary, 4 bytes]
DEBUG:    < PONG bd 4d c8 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x17tML' [text, 4 bytes]
DEBUG:    < PONG '\x17tML' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296081552}' [46 bytes]
2025-09-07 18:48:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296081552}
2025-09-07 18:48:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296081552}
INFO:     127.0.0.1:60864 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 7a 4f e9 [binary, 4 bytes]
DEBUG:    < PONG e3 7a 4f e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\r;ry' [text, 4 bytes]
DEBUG:    < PONG '\r;ry' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 5b 05 b4 [binary, 4 bytes]
DEBUG:    < PONG 33 5b 05 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60870 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1DM5cmZxqAB0oRgxbVnqiA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60873) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:48:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:48:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:48:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 18:48:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:48:17.954019"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:48:17.954019"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: mhSSLg+fRst2turPVEHKR3EXSHI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:48:17 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 18:48:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:48:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:48:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:48:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:48:17.954019"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60874 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: YS+ijaLVfE/dtVd1efjOhw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60890) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:48:20 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:48:20 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: fxdo0WQFtBnFSQdiexADackS1nQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:48:20 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:48:20.992056"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:48:20.992056"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:48:20.992056"}' [128 bytes]
2025-09-07 18:48:20 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 18:48:20 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 f7 66 49 [binary, 4 bytes]
DEBUG:    < PONG c3 f7 66 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 39 0d 99 0f [binary, 4 bytes]
DEBUG:    < PONG 39 0d 99 0f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 a6 54 a8 [binary, 4 bytes]
DEBUG:    < PONG 07 a6 54 a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60901 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 8f 94 f7 [binary, 4 bytes]
DEBUG:    < PONG 17 8f 94 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 fb 71 5d [binary, 4 bytes]
DEBUG:    < PONG e7 fb 71 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296130995}' [46 bytes]
2025-09-07 18:48:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296130995}
2025-09-07 18:48:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296130995}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 ae 6b f0 [binary, 4 bytes]
DEBUG:    < PONG 82 ae 6b f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e 56 7c cf [binary, 4 bytes]
DEBUG:    < PONG 8e 56 7c cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 4b 68 a1 [binary, 4 bytes]
DEBUG:    < PONG 2e 4b 68 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60905 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296160994}' [46 bytes]
2025-09-07 18:49:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296160994}
2025-09-07 18:49:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296160994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 99 fb c8 [binary, 4 bytes]
DEBUG:    < PONG b2 99 fb c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 ea 64 2f [binary, 4 bytes]
DEBUG:    < PONG 12 ea 64 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 c7 c6 02 [binary, 4 bytes]
DEBUG:    < PONG f9 c7 c6 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 96 fe 68 [binary, 4 bytes]
DEBUG:    < PONG 88 96 fe 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60910 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f 68 77 62 [binary, 4 bytes]
DEBUG:    < PONG 9f 68 77 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 5c 4e 6c [binary, 4 bytes]
DEBUG:    < PONG e4 5c 4e 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296190993}' [46 bytes]
2025-09-07 18:49:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296190993}
2025-09-07 18:49:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296190993}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 75 9f 99 [binary, 4 bytes]
DEBUG:    < PONG 35 75 9f 99 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a 00 d0 d4 [binary, 4 bytes]
DEBUG:    < PONG 7a 00 d0 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 25 a1 1f [binary, 4 bytes]
DEBUG:    < PONG 47 25 a1 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60925 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296220992}' [46 bytes]
2025-09-07 18:50:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296220992}
2025-09-07 18:50:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296220992}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc b1 38 04 [binary, 4 bytes]
DEBUG:    < PONG bc b1 38 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a 69 cc 47 [binary, 4 bytes]
DEBUG:    < PONG 5a 69 cc 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f c1 d1 66 [binary, 4 bytes]
DEBUG:    < PONG 2f c1 d1 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 19 38 f7 e3 [binary, 4 bytes]
DEBUG:    < PONG 19 38 f7 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60929 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c a3 5b d2 [binary, 4 bytes]
DEBUG:    < PONG 5c a3 5b d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c cb f5 8e [binary, 4 bytes]
DEBUG:    < PONG 9c cb f5 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296250994}' [46 bytes]
2025-09-07 18:50:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296250994}
2025-09-07 18:50:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296250994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 43 86 92 [binary, 4 bytes]
DEBUG:    < PONG 02 43 86 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a bc e9 dd [binary, 4 bytes]
DEBUG:    < PONG 2a bc e9 dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '}l=!' [text, 4 bytes]
DEBUG:    < PONG '}l=!' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60949 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296280992}' [46 bytes]
2025-09-07 18:51:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296280992}
2025-09-07 18:51:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296280992}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 57 0f 93 [binary, 4 bytes]
DEBUG:    < PONG 6b 57 0f 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a f9 e3 d9 [binary, 4 bytes]
DEBUG:    < PONG 1a f9 e3 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c ff bc a8 [binary, 4 bytes]
DEBUG:    < PONG 3c ff bc a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 1f 17 f9 [binary, 4 bytes]
DEBUG:    < PONG e5 1f 17 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60953 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa e6 5b 72 [binary, 4 bytes]
DEBUG:    < PONG fa e6 5b 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 8a b9 3d [binary, 4 bytes]
DEBUG:    < PONG f5 8a b9 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296310994}' [46 bytes]
2025-09-07 18:51:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296310994}
2025-09-07 18:51:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296310994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f ca f2 7b [binary, 4 bytes]
DEBUG:    < PONG 6f ca f2 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 4b ab 8d [binary, 4 bytes]
DEBUG:    < PONG 07 4b ab 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e 1b 2f b0 [binary, 4 bytes]
DEBUG:    < PONG 9e 1b 2f b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60957 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296340993}' [46 bytes]
2025-09-07 18:52:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296340993}
2025-09-07 18:52:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296340993}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 09 c9 02 [binary, 4 bytes]
DEBUG:    < PONG f5 09 c9 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 3c 33 e3 [binary, 4 bytes]
DEBUG:    < PONG 44 3c 33 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 5f 87 4f [binary, 4 bytes]
DEBUG:    < PONG 36 5f 87 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 84 3a 41 [binary, 4 bytes]
DEBUG:    < PONG 50 84 3a 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60961 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 81 cd 9c [binary, 4 bytes]
DEBUG:    < PONG 91 81 cd 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 8d 3e e6 [binary, 4 bytes]
DEBUG:    < PONG 6b 8d 3e e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296370994}' [46 bytes]
2025-09-07 18:52:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296370994}
2025-09-07 18:52:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296370994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e 3b 2e 74 [binary, 4 bytes]
DEBUG:    < PONG 9e 3b 2e 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 f3 2b 68 [binary, 4 bytes]
DEBUG:    < PONG c7 f3 2b 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 03 b7 6d [binary, 4 bytes]
DEBUG:    < PONG fc 03 b7 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60975 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296400993}' [46 bytes]
2025-09-07 18:53:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296400993}
2025-09-07 18:53:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296400993}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 4e 34 00 [binary, 4 bytes]
DEBUG:    < PONG a5 4e 34 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 c7 ce ac [binary, 4 bytes]
DEBUG:    < PONG 64 c7 ce ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x11æ’¸' [text, 4 bytes]
DEBUG:    < PONG '\x11æ’¸' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 72 50 7b [binary, 4 bytes]
DEBUG:    < PONG cb 72 50 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60991 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 65 68 7f [binary, 4 bytes]
DEBUG:    < PONG d5 65 68 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 f3 fd 24 [binary, 4 bytes]
DEBUG:    < PONG e6 f3 fd 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296430993}' [46 bytes]
2025-09-07 18:53:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296430993}
2025-09-07 18:53:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296430993}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 7e e9 d8 [binary, 4 bytes]
DEBUG:    < PONG 54 7e e9 d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 e8 75 6b [binary, 4 bytes]
DEBUG:    < PONG f0 e8 75 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '_d0P' [text, 4 bytes]
DEBUG:    < PONG '_d0P' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61006 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296460994}' [46 bytes]
2025-09-07 18:54:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296460994}
2025-09-07 18:54:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296460994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 0a 97 ff [binary, 4 bytes]
DEBUG:    < PONG 9c 0a 97 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c 66 df 45 [binary, 4 bytes]
DEBUG:    < PONG 5c 66 df 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\\DFm' [text, 4 bytes]
DEBUG:    < PONG '\\DFm' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee de e2 67 [binary, 4 bytes]
DEBUG:    < PONG ee de e2 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61012 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd 86 c0 2f [binary, 4 bytes]
DEBUG:    < PONG fd 86 c0 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 5b 90 bb [binary, 4 bytes]
DEBUG:    < PONG 25 5b 90 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296490995}' [46 bytes]
2025-09-07 18:54:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296490995}
2025-09-07 18:54:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296490995}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 e5 5d 96 [binary, 4 bytes]
DEBUG:    < PONG 33 e5 5d 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 2e 4a df [binary, 4 bytes]
DEBUG:    < PONG 76 2e 4a df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 7e 8d 91 [binary, 4 bytes]
DEBUG:    < PONG 7e 7e 8d 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61027 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296520994}' [46 bytes]
2025-09-07 18:55:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296520994}
2025-09-07 18:55:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296520994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 ce dd fd [binary, 4 bytes]
DEBUG:    < PONG a7 ce dd fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 44 0c e8 [binary, 4 bytes]
DEBUG:    < PONG d0 44 0c e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb e2 98 9c [binary, 4 bytes]
DEBUG:    < PONG cb e2 98 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 51 f8 9a [binary, 4 bytes]
DEBUG:    < PONG 40 51 f8 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61031 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 d4 94 d9 [binary, 4 bytes]
DEBUG:    < PONG e1 d4 94 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 8c 7e ce [binary, 4 bytes]
DEBUG:    < PONG 65 8c 7e ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296550994}' [46 bytes]
2025-09-07 18:55:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296550994}
2025-09-07 18:55:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296550994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 e8 70 5f [binary, 4 bytes]
DEBUG:    < PONG a3 e8 70 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 92 43 f0 [binary, 4 bytes]
DEBUG:    < PONG a7 92 43 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 3a 16 e9 [binary, 4 bytes]
DEBUG:    < PONG 75 3a 16 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61055 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296580994}' [46 bytes]
2025-09-07 18:56:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296580994}
2025-09-07 18:56:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296580994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 1a 5f bc [binary, 4 bytes]
DEBUG:    < PONG 49 1a 5f bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 03 a3 e0 [binary, 4 bytes]
DEBUG:    < PONG d4 03 a3 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 34 12 7f [binary, 4 bytes]
DEBUG:    < PONG d5 34 12 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 14 39 84 [binary, 4 bytes]
DEBUG:    < PONG e1 14 39 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61062 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING db ec 33 9e [binary, 4 bytes]
DEBUG:    < PONG db ec 33 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 16 05 96 e5 [binary, 4 bytes]
DEBUG:    < PONG 16 05 96 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296610995}' [46 bytes]
2025-09-07 18:56:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296610995}
2025-09-07 18:56:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296610995}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Ú¼U1' [text, 4 bytes]
DEBUG:    < PONG 'Ú¼U1' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d f5 e4 e5 [binary, 4 bytes]
DEBUG:    < PONG 7d f5 e4 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 09 cf b3 [binary, 4 bytes]
DEBUG:    < PONG e8 09 cf b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61078 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296640994}' [46 bytes]
2025-09-07 18:57:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296640994}
2025-09-07 18:57:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296640994}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 a3 91 76 [binary, 4 bytes]
DEBUG:    < PONG 42 a3 91 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 5d 34 bb [binary, 4 bytes]
DEBUG:    < PONG 8f 5d 34 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 98 03 b1 [binary, 4 bytes]
DEBUG:    < PONG c2 98 03 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 59 2c b7 [binary, 4 bytes]
DEBUG:    < PONG 01 59 2c b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61109 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 85 ca d1 [binary, 4 bytes]
DEBUG:    < PONG e7 85 ca d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 35 5e 50 [binary, 4 bytes]
DEBUG:    < PONG a6 35 5e 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296670995}' [46 bytes]
2025-09-07 18:57:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296670995}
2025-09-07 18:57:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296670995}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec ac bf ab [binary, 4 bytes]
DEBUG:    < PONG ec ac bf ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 34 24 8b [binary, 4 bytes]
DEBUG:    < PONG 79 34 24 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a 85 71 ae [binary, 4 bytes]
DEBUG:    < PONG 7a 85 71 ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:58:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:58:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:58:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:58:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61141 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: EC/RjN7/PidtrQyFclqaPw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61144) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:58:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:58:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4tc0jtJZIKrWRfj22INU5E9TQVs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:58:14 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:58:15.227544"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:58:15.227544"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:58:15.227544"}' [128 bytes]
INFO:     127.0.0.1:61145 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 04 72 32 [binary, 4 bytes]
DEBUG:    < PONG fa 04 72 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a ff 42 f2 [binary, 4 bytes]
DEBUG:    < PONG 3a ff 42 f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 21 45 2a [binary, 4 bytes]
DEBUG:    < PONG 84 21 45 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61152 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296725239}' [46 bytes]
2025-09-07 18:58:45 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296725239}
2025-09-07 18:58:45 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296725239}
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 2f 5e 51 [binary, 4 bytes]
DEBUG:    < PONG fb 2f 5e 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f bf 54 7a [binary, 4 bytes]
DEBUG:    < PONG 8f bf 54 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee d7 08 73 [binary, 4 bytes]
DEBUG:    < PONG ee d7 08 73 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:59:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:59:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:59:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:59:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61158 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: LDJKCnDgKzF3LqIAJShxyA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61160) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:59:09 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:59:09 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:09.197680"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: fAQchoADWpUqYdDyxX9G0dxxRmA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:59:09 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:09.197680"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:09.197680"}' [128 bytes]
INFO:     127.0.0.1:61162 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '+v/=' [text, 4 bytes]
DEBUG:    < PONG '+v/=' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 0b e0 06 [binary, 4 bytes]
DEBUG:    < PONG 59 0b e0 06 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:61162 - "GET /health HTTP/1.1" 200 OK
2025-09-07 18:59:12 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:59:12 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:59:12 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:59:12 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: UTH/735vDeb07DAmFxZ9hg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61165) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:59:12 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:59:12 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:12.398533"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:12.398533"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 1mZBO1S3wYwJp0fYR+oAbi9ON1M=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:59:12 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:12.398533"}' [128 bytes]
INFO:     127.0.0.1:61158 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:59:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:59:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:59:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:59:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61170 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1vfbuFltA0K+NyLa1uo3CQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61173) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:59:23 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:59:23 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:23.726424"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:23.726424"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QCwA7ZZPQN45kuO4rkxv1UBTHxQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:59:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:23.726424"}' [128 bytes]
INFO:     127.0.0.1:61174 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 2d d9 d9 [binary, 4 bytes]
DEBUG:    < PONG bd 2d d9 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 74 65 c7 25 [binary, 4 bytes]
DEBUG:    < PONG 74 65 c7 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 18:59:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:59:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 18:59:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 18:59:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61180 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Z+gN6mzzszsSbWkJzBbRZg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61183) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 18:59:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 18:59:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:30.561829"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:30.561829"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QT3Mgl4bSBjU9Kztf94SvilE1iQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 01:59:30 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T18:59:30.561829"}' [128 bytes]
INFO:     127.0.0.1:61184 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 cc 4e 2a [binary, 4 bytes]
DEBUG:    < PONG b9 cc 4e 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING "\r\x0fY'" [text, 4 bytes]
DEBUG:    < PONG "\r\x0fY'" [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 00 4b 0c [binary, 4 bytes]
DEBUG:    < PONG 87 00 4b 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61189 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296800565}' [46 bytes]
2025-09-07 19:00:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296800565}
2025-09-07 19:00:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296800565}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 23 5f 28 [binary, 4 bytes]
DEBUG:    < PONG 96 23 5f 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 4f e2 f5 [binary, 4 bytes]
DEBUG:    < PONG 80 4f e2 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd f3 90 62 [binary, 4 bytes]
DEBUG:    < PONG cd f3 90 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Í»1p' [text, 4 bytes]
DEBUG:    < PONG 'Í»1p' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 58 d0 9c [binary, 4 bytes]
DEBUG:    < PONG fc 58 d0 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61202 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296830565}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 10 90 95 [binary, 4 bytes]
2025-09-07 19:00:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296830565}
2025-09-07 19:00:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296830565}
DEBUG:    < PONG fc 10 90 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef bc 1e 5f [binary, 4 bytes]
DEBUG:    < PONG ef bc 1e 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 23 7a 86 [binary, 4 bytes]
DEBUG:    < PONG 27 23 7a 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 68 89 52 [binary, 4 bytes]
DEBUG:    < PONG 2a 68 89 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296860565}' [46 bytes]
2025-09-07 19:01:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296860565}
2025-09-07 19:01:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296860565}
INFO:     127.0.0.1:61212 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 ca d8 4d [binary, 4 bytes]
DEBUG:    < PONG 63 ca d8 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea ee ff 3b [binary, 4 bytes]
DEBUG:    < PONG ea ee ff 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 a3 51 42 [binary, 4 bytes]
DEBUG:    < PONG a0 a3 51 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac d5 12 e3 [binary, 4 bytes]
DEBUG:    < PONG ac d5 12 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 36 dc c3 [binary, 4 bytes]
DEBUG:    < PONG 68 36 dc c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296890565}' [46 bytes]
2025-09-07 19:01:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296890565}
2025-09-07 19:01:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296890565}
INFO:     127.0.0.1:61243 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 ea f9 ce [binary, 4 bytes]
DEBUG:    < PONG e2 ea f9 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d 7f 69 c7 [binary, 4 bytes]
DEBUG:    < PONG 3d 7f 69 c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 83 1c c9 [binary, 4 bytes]
DEBUG:    < PONG 70 83 1c c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 19 41 a7 [binary, 4 bytes]
DEBUG:    < PONG 78 19 41 a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296920565}' [46 bytes]
2025-09-07 19:02:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296920565}
2025-09-07 19:02:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296920565}
INFO:     127.0.0.1:61279 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 01 3a 6c [binary, 4 bytes]
DEBUG:    < PONG 8f 01 3a 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 35 ad 3a [binary, 4 bytes]
DEBUG:    < PONG 95 35 ad 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 cf ef dc [binary, 4 bytes]
DEBUG:    < PONG 64 cf ef dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 19:02:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:02:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:02:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:02:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61290 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /L6x1HDW3Fb3HQRAvf+rkA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61292) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:02:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:02:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:02:22.369046"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:02:22.369046"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 1cbURQbpP4tIYPnE3G08ONf/uaU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:02:21 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:02:22.369046"}' [128 bytes]
INFO:     127.0.0.1:61294 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 ea d8 f8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 d5 30 a4 [binary, 4 bytes]
DEBUG:    < PONG 14 ea d8 f8 [binary, 4 bytes]
DEBUG:    < PONG d0 d5 30 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 28 c5 73 [binary, 4 bytes]
DEBUG:    < PONG cf 28 c5 73 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 91 9d 83 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 09 a9 18 [binary, 4 bytes]
DEBUG:    < PONG 12 91 9d 83 [binary, 4 bytes]
DEBUG:    < PONG 2f 09 a9 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61300 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757296972400}' [46 bytes]
2025-09-07 19:02:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296972400}
2025-09-07 19:02:52 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757296972400}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 1d e5 8c [binary, 4 bytes]
DEBUG:    < PONG 87 1d e5 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae 16 40 2c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 6c a6 f4 [binary, 4 bytes]
DEBUG:    < PONG ae 16 40 2c [binary, 4 bytes]
DEBUG:    < PONG 97 6c a6 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61306 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297002399}' [46 bytes]
2025-09-07 19:03:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297002399}
2025-09-07 19:03:22 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297002399}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 06 58 9a [binary, 4 bytes]
DEBUG:    < PONG 02 06 58 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 19:03:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:03:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:03:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:03:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61314 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: qgnxLfoPxBqIz/2Lyr5VLQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61317) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:03:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:03:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:25.375338"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:25.375338"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: RgNMY2syM2TyOkOSyW6lNdp5960=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:03:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:25.375338"}' [128 bytes]
INFO:     127.0.0.1:61318 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 63 ab ef [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 72 4b a0 [binary, 4 bytes]
DEBUG:    < PONG 51 63 ab ef [binary, 4 bytes]
DEBUG:    < PONG 46 72 4b a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:61324 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: HngPdVvzuB2vqwvng66FWA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61327) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:03:36 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:03:36 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:36.892773"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:36.892773"}' [128 bytes]
2025-09-07 19:03:36 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:03:36 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 23H742i3QmKqvm9Z/V7lY5eAHqc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:03:36 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:36.892773"}' [128 bytes]
2025-09-07 19:03:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:03:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:03:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:03:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61328 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:61333 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: uysQF6D5oe4UCAIdR37B7A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61337) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:03:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:03:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:40.636549"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:40.636549"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: hb95IhldOBh0IFM+uur61zM536A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:03:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 19:03:40 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:03:40 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:03:40 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:03:40 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61335 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:40.636549"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     127.0.0.1:61335 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: rrBdyZiVhEnsV2TvZTKOuQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61340) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:03:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:03:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:43.682191"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:43.682191"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 9aF6jBv9jW95w53jHrj92oaf+NA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:03:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:61333 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:43.682191"}' [128 bytes]
2025-09-07 19:03:43 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 19:03:43 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 3Ub9C9mzZwTuRxXPRQ9UUQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61342) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:03:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:03:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:43.704738"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:43.704738"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: qj+2OECgfB9SbNThVNAOIPugZ4A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:03:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:43.704738"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:43.704738"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:61346 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: cnerjgrsbtSQ7kzfqLomug==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61350) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:03:47 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:03:47 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:47.832257"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:47.832257"}' [128 bytes]
2025-09-07 19:03:47 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:03:47 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:47.832257"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rHu93vrPMx5UsI57BsPB/CCtn7I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:03:47 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 19:03:47 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:03:47 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:03:47 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:03:47 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61349 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:47.832257"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING '0Æ§W' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 08 e4 bf [binary, 4 bytes]
DEBUG:    < PONG '0Æ§W' [text, 4 bytes]
DEBUG:    < PONG 13 08 e4 bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61355 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 6BbQ0sgHjCu//mhHc5aQmQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61358) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:03:50 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:03:50 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:50.770805"}' [128 bytes]
2025-09-07 19:03:50 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 19:03:50 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:50.770805"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:50.770805"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: GtHwJHGlv/KFybKq8+f1dBxs0Vs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:03:50 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:03:50.770805"}' [128 bytes]
INFO:     127.0.0.1:61359 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 7b c8 16 [binary, 4 bytes]
DEBUG:    < PONG 91 7b c8 16 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f 14 16 f4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f b7 b1 06 [binary, 4 bytes]
DEBUG:    < PONG 5f 14 16 f4 [binary, 4 bytes]
DEBUG:    < PONG 1f b7 b1 06 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x14O;\r' [text, 4 bytes]
DEBUG:    < PONG '\x14O;\r' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61371 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297060776}' [46 bytes]
2025-09-07 19:04:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297060776}
2025-09-07 19:04:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297060776}
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd cd a7 cc [binary, 4 bytes]
DEBUG:    < PONG fd cd a7 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 04 30 9e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '×²\x05a' [text, 4 bytes]
DEBUG:    < PONG 1c 04 30 9e [binary, 4 bytes]
DEBUG:    < PONG '×²\x05a' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'p\x14Ã¶' [text, 4 bytes]
DEBUG:    < PONG 'p\x14Ã¶' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 99 32 25 [binary, 4 bytes]
DEBUG:    < PONG 28 99 32 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 50 8c 87 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 5c 1b 80 [binary, 4 bytes]
DEBUG:    < PONG dc 50 8c 87 [binary, 4 bytes]
DEBUG:    < PONG 6f 5c 1b 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61382 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297090777}' [46 bytes]
2025-09-07 19:04:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297090777}
2025-09-07 19:04:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297090777}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 74 16 6d f8 [binary, 4 bytes]
DEBUG:    < PONG 74 16 6d f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'F1[n' [text, 4 bytes]
DEBUG:    < PONG 'F1[n' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 11 f2 41 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 74 80 dc [binary, 4 bytes]
DEBUG:    < PONG 23 11 f2 41 [binary, 4 bytes]
DEBUG:    < PONG 71 74 80 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e b3 a5 f5 [binary, 4 bytes]
DEBUG:    < PONG 4e b3 a5 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61413 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297120778}' [46 bytes]
2025-09-07 19:05:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297120778}
2025-09-07 19:05:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297120778}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 e8 3b a7 [binary, 4 bytes]
DEBUG:    < PONG d9 e8 3b a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 02 d4 05 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 8f 7d 02 [binary, 4 bytes]
DEBUG:    < PONG c9 02 d4 05 [binary, 4 bytes]
DEBUG:    < PONG a2 8f 7d 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 94 40 93 [binary, 4 bytes]
DEBUG:    < PONG d0 94 40 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c c0 b6 b7 [binary, 4 bytes]
DEBUG:    < PONG 6c c0 b6 b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 92 71 fd [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 5d 03 5d [binary, 4 bytes]
DEBUG:    < PONG 67 92 71 fd [binary, 4 bytes]
DEBUG:    < PONG 8f 5d 03 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61419 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297150777}' [46 bytes]
2025-09-07 19:05:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297150777}
2025-09-07 19:05:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297150777}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 21 7f cd [binary, 4 bytes]
DEBUG:    < PONG 03 21 7f cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 ce 59 a4 [binary, 4 bytes]
DEBUG:    < PONG 89 ce 59 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 42 7c 65 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 27 45 2b [binary, 4 bytes]
DEBUG:    < PONG b5 42 7c 65 [binary, 4 bytes]
DEBUG:    < PONG 8f 27 45 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d 3b 91 95 [binary, 4 bytes]
DEBUG:    < PONG 4d 3b 91 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61440 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297180776}' [46 bytes]
2025-09-07 19:06:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297180776}
2025-09-07 19:06:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297180776}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 fe 77 4f [binary, 4 bytes]
DEBUG:    < PONG 30 fe 77 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 f6 76 41 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e cd 2f ec [binary, 4 bytes]
DEBUG:    < PONG 32 f6 76 41 [binary, 4 bytes]
DEBUG:    < PONG 7e cd 2f ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c 86 e9 3c [binary, 4 bytes]
DEBUG:    < PONG 5c 86 e9 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 63 72 9c [binary, 4 bytes]
DEBUG:    < PONG 6f 63 72 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 10 5d ab [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 17 bf 2f [binary, 4 bytes]
DEBUG:    < PONG 06 10 5d ab [binary, 4 bytes]
DEBUG:    < PONG d2 17 bf 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61449 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297210777}' [46 bytes]
2025-09-07 19:06:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297210777}
2025-09-07 19:06:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297210777}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 bd 57 59 [binary, 4 bytes]
DEBUG:    < PONG 40 bd 57 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 19:06:56 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/services/openai_service.py')}
WARNING:  WatchFiles detected changes in 'app/services/openai_service.py'. Reloading...
INFO:     Shutting down
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
2025-09-07 19:06:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:06:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:06:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:06:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:06:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:06:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:06:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:06:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:06:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:06:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:06:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:06:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:06:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:06:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:06:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:06:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [32282]
ðŸ›‘ Shutting down Enculture Backend API...
INFO:     Started server process [48775]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: p3ZgXhAOoekuwjmv67rMPA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61458) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
2025-09-07 19:06:59 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:06:59 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: VJNFcRc1S3VDZw1KxmVOl3AuqN4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:06:58 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:06:59.570903"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'f\t)F' [text, 4 bytes]
DEBUG:    < PONG 'f\t)F' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61476 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297249574}' [46 bytes]
2025-09-07 19:07:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297249574}
2025-09-07 19:07:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297249574}
2025-09-07 19:07:37 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/chat.py')}
WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/chat.py'. Reloading...
INFO:     Shutting down
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
2025-09-07 19:07:37 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:07:37 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:07:37 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:07:37 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [48775]
ðŸ›‘ Shutting down Enculture Backend API...
INFO:     Started server process [48807]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: OvGe7X7VirJJisOoFQIZxg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61495) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
2025-09-07 19:07:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:07:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 82AydWbNeXIZNI3SWHHyZhYGT8Y=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:07:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:07:40.654112"}' [128 bytes]
INFO:     127.0.0.1:61497 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'hUm%' [text, 4 bytes]
DEBUG:    < PONG 'hUm%' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297290659}' [46 bytes]
2025-09-07 19:08:10 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297290659}
2025-09-07 19:08:10 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297290659}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 cf 46 65 [binary, 4 bytes]
DEBUG:    < PONG 90 cf 46 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 19:08:20 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:08:20 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:08:20 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:08:20 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61503 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Hpei8ou7MLNJ9nvM7imIig==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61505) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:08:20 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:08:20 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: JZ2NDsiSkF/YH1rmw0Sc/qV1KpU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:08:20 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:08:20.734000"}' [128 bytes]
INFO:     127.0.0.1:61507 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:61517 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: j8EB0AYLh873Qspg4zMVNQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61520) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:08:37 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:08:37 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: nEyxv1ZQKQqHphQv6rTR9Y7ifS8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:08:36 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:08:37.424652"}' [128 bytes]
2025-09-07 19:08:37 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:08:37 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:08:37 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:08:37 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:08:37 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:08:37 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61521 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 90 90 c9 [binary, 4 bytes]
DEBUG:    < PONG b5 90 90 c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61526 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297347432}' [46 bytes]
2025-09-07 19:09:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297347432}
2025-09-07 19:09:07 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297347432}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 3b 1e d7 [binary, 4 bytes]
DEBUG:    < PONG 36 3b 1e d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61536 - "OPTIONS /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
2025-09-07 19:09:30 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create an employee satisfaction survey...
2025-09-07 19:09:30 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create an employee satisfaction survey...
2025-09-07 19:09:30 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 19:09:30 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 19:09:30 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11662e0a0>
2025-09-07 19:09:30 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11662e0a0>
2025-09-07 19:09:30 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1100c9f90> server_hostname='api.openai.com' timeout=5.0
2025-09-07 19:09:30 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1100c9f90> server_hostname='api.openai.com' timeout=5.0
2025-09-07 19:09:30 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1166a3e50>
2025-09-07 19:09:30 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1166a3e50>
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 19:09:30 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 19:09:32 - watchfiles.main - DEBUG - 2 changes detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/services/openai_service.py'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/chat.py')}
WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/chat.py', 'app/services/openai_service.py'. Reloading...
INFO:     Shutting down
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
2025-09-07 19:09:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:09:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:09:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:09:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     Waiting for connections to close. (CTRL+C to force quit)
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 02:09:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449132'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'115ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_d18aa6ac1b70ebd1722c00f4ff6f59f4'), (b'openai-processing-ms', b'10125'), (b'x-envoy-upstream-service-time', b'10127'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=IacsWfIXAat743ypcunYvW8R.pQZf23px_wWG4Rk2qA-1757297380-1.0.1.1-e4YGk547cUPmXbcuzGo5Irwx.87WDC72p0Pd9XpeuW11YJRINvfSGpg5rHT5VxM9x3ZG42rd47.1lNS4R2mPv7KwumcT5rFTe6kzAP2UoTg; path=/; expires=Mon, 08-Sep-25 02:39:40 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=K8bVPvRy4mIT.heUX2149G2WTUq0FNkfsnpI.1HhGBI-1757297380917-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bae7756f5fa335-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 02:09:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449132'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'115ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_d18aa6ac1b70ebd1722c00f4ff6f59f4'), (b'openai-processing-ms', b'10125'), (b'x-envoy-upstream-service-time', b'10127'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=IacsWfIXAat743ypcunYvW8R.pQZf23px_wWG4Rk2qA-1757297380-1.0.1.1-e4YGk547cUPmXbcuzGo5Irwx.87WDC72p0Pd9XpeuW11YJRINvfSGpg5rHT5VxM9x3ZG42rd47.1lNS4R2mPv7KwumcT5rFTe6kzAP2UoTg; path=/; expires=Mon, 08-Sep-25 02:39:40 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=K8bVPvRy4mIT.heUX2149G2WTUq0FNkfsnpI.1HhGBI-1757297380917-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bae7756f5fa335-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 19:09:40 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:61536 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [48807]
ðŸ›‘ Shutting down Enculture Backend API...
INFO:     Started server process [48878]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:61541 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: y9sa+nPc8/eFb6SLzl0t8A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61544) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:09:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:09:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: NLV6opW/Tz3vaqfDoQyTEusezOo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:09:42 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:09:42.012863"}' [128 bytes]
INFO:     127.0.0.1:61545 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: cNTNOjtwbtKsLBrG7yxDNQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61555) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:09:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:09:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gg9TulSZiDZWIT5llTo5Swb3Vj8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:09:42 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:09:42.029197"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:09:42.029197"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe fb 08 0b [binary, 4 bytes]
DEBUG:    < PONG fe fb 08 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 02 f4 f3 [binary, 4 bytes]
DEBUG:    < PONG 2a 02 f4 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61563 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297412033}' [46 bytes]
2025-09-07 19:10:12 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297412033}
2025-09-07 19:10:12 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297412033}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 f7 c7 5e [binary, 4 bytes]
DEBUG:    < PONG 43 f7 c7 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 2a c4 e0 [binary, 4 bytes]
DEBUG:    < PONG c1 2a c4 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61571 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 65 14 d3 [binary, 4 bytes]
DEBUG:    < PONG a3 65 14 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297442033}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 6e 48 85 [binary, 4 bytes]
2025-09-07 19:10:42 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297442033}
2025-09-07 19:10:42 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297442033}
DEBUG:    < PONG da 6e 48 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 19:10:58 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/services/openai_service.py')}
WARNING:  WatchFiles detected changes in 'app/services/openai_service.py'. Reloading...
INFO:     Shutting down
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
2025-09-07 19:10:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:10:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:10:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:10:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:10:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:10:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:10:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:10:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [48878]
ðŸ›‘ Shutting down Enculture Backend API...
INFO:     Started server process [48997]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:61593 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Hi57Wu4Uf0UIj8Ic9jaiMg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61595) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:10:59 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:10:59 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: K5T5XL43R7mXLbnJludT7UxGhq8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:10:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:10:59.654147"}' [128 bytes]
INFO:     127.0.0.1:61597 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 51 17 b8 [binary, 4 bytes]
DEBUG:    < PONG 01 51 17 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61653 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297489659}' [46 bytes]
2025-09-07 19:11:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297489659}
2025-09-07 19:11:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297489659}
INFO:     127.0.0.1:61653 - "OPTIONS /api/v1/chat/enhance-survey-name HTTP/1.1" 200 OK
2025-09-07 19:11:34 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 19:11:34 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 19:11:34 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114b04070>
2025-09-07 19:11:34 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114b04070>
2025-09-07 19:11:34 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10e4c9f90> server_hostname='api.openai.com' timeout=5.0
2025-09-07 19:11:34 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10e4c9f90> server_hostname='api.openai.com' timeout=5.0
2025-09-07 19:11:34 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114aeceb0>
2025-09-07 19:11:34 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114aeceb0>
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 19:11:34 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 02:11:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449847'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'20ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_f9d0257590a82a55b017edd59b5ecba3'), (b'openai-processing-ms', b'848'), (b'x-envoy-upstream-service-time', b'851'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=JpXt2betOoao9kPigSA_7S7D_AcYbNhP_f6WUPj3TI0-1757297495-1.0.1.1-a8U30x.qC0Ly66Td4.fXG8G4Du2JzdQ.V6ODtkn0675FZWkzfF39NeP7Wkv6WYRCJVVi5834d9545qzZkKC05RQj1p6qNgH.wr5nQAg5Qbs; path=/; expires=Mon, 08-Sep-25 02:41:35 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=m5jMjhbDnf_uXzTMe_EKQoK6sqpHJ3v3XfOOimQrONU-1757297495519-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97baea7b09a97569-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 02:11:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449847'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'20ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_f9d0257590a82a55b017edd59b5ecba3'), (b'openai-processing-ms', b'848'), (b'x-envoy-upstream-service-time', b'851'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=JpXt2betOoao9kPigSA_7S7D_AcYbNhP_f6WUPj3TI0-1757297495-1.0.1.1-a8U30x.qC0Ly66Td4.fXG8G4Du2JzdQ.V6ODtkn0675FZWkzfF39NeP7Wkv6WYRCJVVi5834d9545qzZkKC05RQj1p6qNgH.wr5nQAg5Qbs; path=/; expires=Mon, 08-Sep-25 02:41:35 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=m5jMjhbDnf_uXzTMe_EKQoK6sqpHJ3v3XfOOimQrONU-1757297495519-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97baea7b09a97569-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 19:11:35 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:61653 - "POST /api/v1/chat/enhance-survey-name HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:61653 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Bac3fcJ8Ex11H7MGMk3FRw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
2025-09-07 19:11:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:11:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:11:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:11:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     ('127.0.0.1', 61661) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:11:35 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:11:35 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: S6aYpt0pci+/ZoZDGpcC19vDkYA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:11:35 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:11:35.787874"}' [128 bytes]
INFO:     127.0.0.1:61663 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b b7 c9 3e [binary, 4 bytes]
DEBUG:    < PONG 3b b7 c9 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61671 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297525790}' [46 bytes]
2025-09-07 19:12:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297525790}
2025-09-07 19:12:05 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297525790}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '~7pz' [text, 4 bytes]
DEBUG:    < PONG '~7pz' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297555791}' [46 bytes]
INFO:     127.0.0.1:61697 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 1f fa 0c [binary, 4 bytes]
2025-09-07 19:12:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297555791}
2025-09-07 19:12:35 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297555791}
DEBUG:    < PONG a1 1f fa 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 52 2a 26 [binary, 4 bytes]
DEBUG:    < PONG c0 52 2a 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 19:13:00 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:13:00 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:13:00 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:13:00 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:61716 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XXhjj+VXlQUoEvh0IpEstg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61719) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:13:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:13:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: BdOTILOwZa7ABB87vXq+Jnsdp0g=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:13:00 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:13:00.528075"}' [128 bytes]
INFO:     127.0.0.1:61720 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 8e 13 09 [binary, 4 bytes]
DEBUG:    < PONG 37 8e 13 09 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61729 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297610536}' [46 bytes]
2025-09-07 19:13:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297610536}
2025-09-07 19:13:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297610536}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 29 27 69 [binary, 4 bytes]
DEBUG:    < PONG ab 29 27 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61737 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297640536}' [46 bytes]
2025-09-07 19:14:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297640536}
2025-09-07 19:14:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297640536}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d 28 ae ac [binary, 4 bytes]
DEBUG:    < PONG 0d 28 ae ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 ad ac 96 [binary, 4 bytes]
DEBUG:    < PONG f9 ad ac 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61777 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297670535}' [46 bytes]
2025-09-07 19:14:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297670535}
2025-09-07 19:14:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297670535}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 82 74 ad [binary, 4 bytes]
DEBUG:    < PONG 40 82 74 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61783 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297700536}' [46 bytes]
2025-09-07 19:15:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297700536}
2025-09-07 19:15:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297700536}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 95 51 db [binary, 4 bytes]
DEBUG:    < PONG 37 95 51 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 74 46 b4 [binary, 4 bytes]
DEBUG:    < PONG 62 74 46 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61792 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297730521}' [46 bytes]
2025-09-07 19:15:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297730521}
2025-09-07 19:15:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297730521}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 6f ce a9 [binary, 4 bytes]
DEBUG:    < PONG ff 6f ce a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61799 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297760518}' [46 bytes]
2025-09-07 19:16:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297760518}
2025-09-07 19:16:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297760518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 6a 76 88 [binary, 4 bytes]
DEBUG:    < PONG 60 6a 76 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 33 14 91 [binary, 4 bytes]
DEBUG:    < PONG c8 33 14 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297790518}' [46 bytes]
2025-09-07 19:16:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297790518}
2025-09-07 19:16:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297790518}
INFO:     127.0.0.1:61819 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f b7 aa ea [binary, 4 bytes]
DEBUG:    < PONG 4f b7 aa ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61835 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297820518}' [46 bytes]
2025-09-07 19:17:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297820518}
2025-09-07 19:17:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297820518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 8e 0e 1c [binary, 4 bytes]
DEBUG:    < PONG 28 8e 0e 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 48 1a e2 [binary, 4 bytes]
DEBUG:    < PONG b4 48 1a e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61855 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297850518}' [46 bytes]
2025-09-07 19:17:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297850518}
2025-09-07 19:17:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297850518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e a1 08 d3 [binary, 4 bytes]
DEBUG:    < PONG 0e a1 08 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61860 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297880518}' [46 bytes]
2025-09-07 19:18:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297880518}
2025-09-07 19:18:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297880518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 38 bc d3 [binary, 4 bytes]
DEBUG:    < PONG 47 38 bc d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2b cb b0 ee [binary, 4 bytes]
DEBUG:    < PONG 2b cb b0 ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61872 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297910518}' [46 bytes]
2025-09-07 19:18:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297910518}
2025-09-07 19:18:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297910518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c c3 d8 60 [binary, 4 bytes]
DEBUG:    < PONG 9c c3 d8 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61880 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297940517}' [46 bytes]
2025-09-07 19:19:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297940517}
2025-09-07 19:19:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297940517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 73 5e 49 [binary, 4 bytes]
DEBUG:    < PONG ef 73 5e 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c 0f e5 e3 [binary, 4 bytes]
DEBUG:    < PONG 3c 0f e5 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61899 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757297970519}' [46 bytes]
2025-09-07 19:19:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297970519}
2025-09-07 19:19:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757297970519}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae a4 a5 1a [binary, 4 bytes]
DEBUG:    < PONG ae a4 a5 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61902 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298000518}' [46 bytes]
2025-09-07 19:20:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298000518}
2025-09-07 19:20:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298000518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 71 06 f6 [binary, 4 bytes]
DEBUG:    < PONG e2 71 06 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 1c 1a c6 [binary, 4 bytes]
DEBUG:    < PONG 00 1c 1a c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61921 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298030517}' [46 bytes]
2025-09-07 19:20:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298030517}
2025-09-07 19:20:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298030517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc 8c 81 30 [binary, 4 bytes]
DEBUG:    < PONG cc 8c 81 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61923 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298060518}' [46 bytes]
2025-09-07 19:21:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298060518}
2025-09-07 19:21:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298060518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 e7 d7 24 [binary, 4 bytes]
DEBUG:    < PONG 04 e7 d7 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 56 63 5c [binary, 4 bytes]
DEBUG:    < PONG c6 56 63 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61947 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298090517}' [46 bytes]
2025-09-07 19:21:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298090517}
2025-09-07 19:21:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298090517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '-d\x01\x00' [text, 4 bytes]
DEBUG:    < PONG '-d\x01\x00' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61963 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298120518}' [46 bytes]
2025-09-07 19:22:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298120518}
2025-09-07 19:22:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298120518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 3c 62 9f [binary, 4 bytes]
DEBUG:    < PONG 56 3c 62 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 92 8e 10 [binary, 4 bytes]
DEBUG:    < PONG c5 92 8e 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61970 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298150518}' [46 bytes]
2025-09-07 19:22:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298150518}
2025-09-07 19:22:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298150518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 18 e5 4f [binary, 4 bytes]
DEBUG:    < PONG 68 18 e5 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61972 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298180518}' [46 bytes]
2025-09-07 19:23:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298180518}
2025-09-07 19:23:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298180518}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 1b 76 f0 [binary, 4 bytes]
DEBUG:    < PONG 11 1b 76 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 40 7a 92 [binary, 4 bytes]
DEBUG:    < PONG 50 40 7a 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61978 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298210517}' [46 bytes]
2025-09-07 19:23:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298210517}
2025-09-07 19:23:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298210517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 c1 1b d9 [binary, 4 bytes]
DEBUG:    < PONG 84 c1 1b d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298240518}' [46 bytes]
2025-09-07 19:24:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298240518}
2025-09-07 19:24:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298240518}
INFO:     127.0.0.1:61981 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 db 69 b2 [binary, 4 bytes]
DEBUG:    < PONG d5 db 69 b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c 33 70 99 [binary, 4 bytes]
DEBUG:    < PONG 0c 33 70 99 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61987 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298270517}' [46 bytes]
2025-09-07 19:24:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298270517}
2025-09-07 19:24:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298270517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d a3 c2 58 [binary, 4 bytes]
DEBUG:    < PONG 2d a3 c2 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61990 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298300516}' [46 bytes]
2025-09-07 19:25:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298300516}
2025-09-07 19:25:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298300516}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '3íª' [text, 4 bytes]
DEBUG:    < PONG '3íª' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 29 ee f7 [binary, 4 bytes]
DEBUG:    < PONG 7f 29 ee f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61997 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298330516}' [46 bytes]
2025-09-07 19:25:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298330516}
2025-09-07 19:25:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298330516}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 16 1e 99 dd [binary, 4 bytes]
DEBUG:    < PONG 16 1e 99 dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:61999 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298360517}' [46 bytes]
2025-09-07 19:26:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298360517}
2025-09-07 19:26:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298360517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 a6 c4 8d [binary, 4 bytes]
DEBUG:    < PONG a6 a6 c4 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c 98 a7 95 [binary, 4 bytes]
DEBUG:    < PONG 5c 98 a7 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62027 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298390517}' [46 bytes]
2025-09-07 19:26:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298390517}
2025-09-07 19:26:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298390517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'P\x0b\x0bC' [text, 4 bytes]
DEBUG:    < PONG 'P\x0b\x0bC' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62030 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298420517}' [46 bytes]
2025-09-07 19:27:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298420517}
2025-09-07 19:27:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298420517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 d6 7b c2 [binary, 4 bytes]
DEBUG:    < PONG 54 d6 7b c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 d1 fe 8e [binary, 4 bytes]
DEBUG:    < PONG d3 d1 fe 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62037 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298450516}' [46 bytes]
2025-09-07 19:27:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298450516}
2025-09-07 19:27:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298450516}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'LÖŠA' [text, 4 bytes]
DEBUG:    < PONG 'LÖŠA' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62039 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298480516}' [46 bytes]
2025-09-07 19:28:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298480516}
2025-09-07 19:28:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298480516}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 7b 80 11 [binary, 4 bytes]
DEBUG:    < PONG d6 7b 80 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 91 31 26 [binary, 4 bytes]
DEBUG:    < PONG 12 91 31 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62070 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298510516}' [46 bytes]
2025-09-07 19:28:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298510516}
2025-09-07 19:28:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298510516}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc a2 31 13 [binary, 4 bytes]
DEBUG:    < PONG bc a2 31 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62074 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298540517}' [46 bytes]
2025-09-07 19:29:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298540517}
2025-09-07 19:29:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298540517}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d f0 09 93 [binary, 4 bytes]
DEBUG:    < PONG 3d f0 09 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 b0 91 4f [binary, 4 bytes]
DEBUG:    < PONG 41 b0 91 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62080 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298570515}' [46 bytes]
2025-09-07 19:29:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298570515}
2025-09-07 19:29:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298570515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 7a 9b 53 [binary, 4 bytes]
DEBUG:    < PONG 63 7a 9b 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62082 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298600515}' [46 bytes]
2025-09-07 19:30:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298600515}
2025-09-07 19:30:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298600515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b a2 de 0c [binary, 4 bytes]
DEBUG:    < PONG 9b a2 de 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 1b 39 f3 [binary, 4 bytes]
DEBUG:    < PONG 24 1b 39 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62101 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298630516}' [46 bytes]
2025-09-07 19:30:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298630516}
2025-09-07 19:30:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298630516}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'c/[\\' [text, 4 bytes]
DEBUG:    < PONG 'c/[\\' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62106 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298660516}' [46 bytes]
2025-09-07 19:31:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298660516}
2025-09-07 19:31:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298660516}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'x\x1a{G' [text, 4 bytes]
DEBUG:    < PONG 'x\x1a{G' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 15 2b 0a [binary, 4 bytes]
DEBUG:    < PONG af 15 2b 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62130 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298690516}' [46 bytes]
2025-09-07 19:31:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298690516}
2025-09-07 19:31:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298690516}
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 58 65 f8 [binary, 4 bytes]
DEBUG:    < PONG dd 58 65 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62133 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298720515}' [46 bytes]
2025-09-07 19:32:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298720515}
2025-09-07 19:32:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298720515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 0e 8d 45 [binary, 4 bytes]
DEBUG:    < PONG 83 0e 8d 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 91 a9 c1 [binary, 4 bytes]
DEBUG:    < PONG a0 91 a9 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62152 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298750515}' [46 bytes]
2025-09-07 19:32:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298750515}
2025-09-07 19:32:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298750515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 8c 81 6e [binary, 4 bytes]
DEBUG:    < PONG cf 8c 81 6e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62166 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298780515}' [46 bytes]
2025-09-07 19:33:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298780515}
2025-09-07 19:33:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298780515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 0f e7 94 [binary, 4 bytes]
DEBUG:    < PONG 53 0f e7 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 cc d6 0b [binary, 4 bytes]
DEBUG:    < PONG 33 cc d6 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62186 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298810515}' [46 bytes]
2025-09-07 19:33:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298810515}
2025-09-07 19:33:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298810515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a f2 53 ab [binary, 4 bytes]
DEBUG:    < PONG 8a f2 53 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62212 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298840515}' [46 bytes]
2025-09-07 19:34:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298840515}
2025-09-07 19:34:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298840515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 8d d6 e3 [binary, 4 bytes]
DEBUG:    < PONG c0 8d d6 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc bc ad 18 [binary, 4 bytes]
DEBUG:    < PONG bc bc ad 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62225 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298870514}' [46 bytes]
2025-09-07 19:34:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298870514}
2025-09-07 19:34:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298870514}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x0b\x03\x7fZ' [text, 4 bytes]
DEBUG:    < PONG '\x0b\x03\x7fZ' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62254 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298900515}' [46 bytes]
2025-09-07 19:35:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298900515}
2025-09-07 19:35:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298900515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d 58 a7 c4 [binary, 4 bytes]
DEBUG:    < PONG 7d 58 a7 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 7b 4d fe [binary, 4 bytes]
DEBUG:    < PONG f6 7b 4d fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62291 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298930514}' [46 bytes]
2025-09-07 19:35:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298930514}
2025-09-07 19:35:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298930514}
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 4b c8 e5 [binary, 4 bytes]
DEBUG:    < PONG c0 4b c8 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62310 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298960515}' [46 bytes]
2025-09-07 19:36:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298960515}
2025-09-07 19:36:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298960515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 c6 1c 56 [binary, 4 bytes]
DEBUG:    < PONG 96 c6 1c 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 8e 17 fb [binary, 4 bytes]
DEBUG:    < PONG 52 8e 17 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62350 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757298990514}' [46 bytes]
2025-09-07 19:36:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298990514}
2025-09-07 19:36:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757298990514}
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 a5 86 f4 [binary, 4 bytes]
DEBUG:    < PONG c7 a5 86 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62372 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299020515}' [46 bytes]
2025-09-07 19:37:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299020515}
2025-09-07 19:37:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299020515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 c6 a7 99 [binary, 4 bytes]
DEBUG:    < PONG 08 c6 a7 99 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 cc 44 e5 [binary, 4 bytes]
DEBUG:    < PONG 96 cc 44 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62383 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299050515}' [46 bytes]
2025-09-07 19:37:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299050515}
2025-09-07 19:37:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299050515}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 10 9e 9f [binary, 4 bytes]
DEBUG:    < PONG 56 10 9e 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62403 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299080514}' [46 bytes]
2025-09-07 19:38:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299080514}
2025-09-07 19:38:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299080514}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 f1 4a 70 [binary, 4 bytes]
DEBUG:    < PONG 27 f1 4a 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 cc a0 da [binary, 4 bytes]
DEBUG:    < PONG 29 cc a0 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62426 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299110513}' [46 bytes]
2025-09-07 19:38:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299110513}
2025-09-07 19:38:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299110513}
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 85 4e e5 [binary, 4 bytes]
DEBUG:    < PONG dc 85 4e e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 19:38:58 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/services/openai_service.py')}
WARNING:  WatchFiles detected changes in 'app/services/openai_service.py'. Reloading...
INFO:     Shutting down
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
2025-09-07 19:38:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:38:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:38:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:38:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [48997]
ðŸ›‘ Shutting down Enculture Backend API...
2025-09-07 19:38:59 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/chat.py')}
WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/chat.py'. Reloading...
INFO:     Started server process [50367]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:62442 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
INFO:     127.0.0.1:62442 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: d3sVvKg7PYyZT8BkUVV9Kw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62446) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:39:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:39:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: SKjrHlNudXe54yzcjPHFsZ/B+Ok=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:39:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:62453 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62445 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:04.272259"}' [128 bytes]
INFO:     127.0.0.1:62453 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: pHOtDT4qVxZAAj6ghAMPMA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62454) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:39:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:39:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: tZdqJhaumFK/HCrL+nrtjYntEQA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:39:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:04.295274"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:04.295274"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: KGdvwN2mgz2T05GjUpU6GQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62455) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:39:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:39:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:04.314437"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:04.314437"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: NfLRco0MG8SycmfWo13tOrShVa8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:39:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:04.314437"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 9c 8f dc [binary, 4 bytes]
DEBUG:    < PONG cb 9c 8f dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 99 a5 c1 [binary, 4 bytes]
DEBUG:    < PONG b7 99 a5 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 df 37 04 [binary, 4 bytes]
DEBUG:    < PONG 95 df 37 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62477 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299174328}' [46 bytes]
2025-09-07 19:39:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299174328}
2025-09-07 19:39:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299174328}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 92 89 58 [binary, 4 bytes]
DEBUG:    < PONG 36 92 89 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e ee 43 b7 [binary, 4 bytes]
DEBUG:    < PONG 7e ee 43 b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 2c 2f e3 [binary, 4 bytes]
DEBUG:    < PONG ef 2c 2f e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 19:39:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:39:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:39:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:39:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:62495 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: OiC+3O30drlXgcEMrUSyDA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62497) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:39:45 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:39:45 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:45.656530"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:45.656530"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 9MhAGU6FWJgfku/HCEz9P89ChW8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:39:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:45.656530"}' [128 bytes]
INFO:     127.0.0.1:62499 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:62516 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: LhqlumDVVR+bv8c4oiEv1Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62519) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:39:55 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:39:55 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:55.144659"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 2tSSUaWbavkwwcP14FXarYZSTZw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:39:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:55.144659"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:39:55.144659"}' [128 bytes]
2025-09-07 19:39:55 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:39:55 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:39:55 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:39:55 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:39:55 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:39:55 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:62520 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 38 57 e4 [binary, 4 bytes]
DEBUG:    < PONG cf 38 57 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 aa 7c 92 [binary, 4 bytes]
DEBUG:    < PONG 08 aa 7c 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 ac 81 15 [binary, 4 bytes]
DEBUG:    < PONG 18 ac 81 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 f7 2b 07 [binary, 4 bytes]
DEBUG:    < PONG 81 f7 2b 07 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 d2 d7 c4 [binary, 4 bytes]
DEBUG:    < PONG d4 d2 d7 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62525 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299225186}' [46 bytes]
2025-09-07 19:40:25 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299225186}
2025-09-07 19:40:25 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299225186}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 64 fc a3 [binary, 4 bytes]
DEBUG:    < PONG 7f 64 fc a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 7a 3a bc [binary, 4 bytes]
DEBUG:    < PONG c6 7a 3a bc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 f0 5a fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 95 f0 5a fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62541 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299255189}' [46 bytes]
2025-09-07 19:40:55 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299255189}
2025-09-07 19:40:55 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299255189}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 80 9c c6 [binary, 4 bytes]
DEBUG:    < PONG f9 80 9c c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 66 92 dc 7b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 81 f7 67 [binary, 4 bytes]
DEBUG:    < PONG 66 92 dc 7b [binary, 4 bytes]
DEBUG:    < PONG f8 81 f7 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:62557 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: RWtxQsPrXdD4cQZ+4dADmQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62561) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:41:09 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:41:09 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:09.727126"}' [128 bytes]
2025-09-07 19:41:09 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:41:09 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: WQfGUcDIAUHEczx3iUu42Y73OG0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:41:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 19:41:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:41:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:41:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:41:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:62560 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:09.727126"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: G/ZEbFX3OSE7oAFmd2dtUg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62567) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:41:12 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:41:12 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:12.790967"}' [128 bytes]
2025-09-07 19:41:12 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 19:41:12 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4EYreLHbEyAi1FAdgg9sVMpGD1A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:41:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:12.790967"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:12.790967"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 0a d4 fb [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a be 5d 61 [binary, 4 bytes]
DEBUG:    < PONG 65 0a d4 fb [binary, 4 bytes]
DEBUG:    < PONG 1a be 5d 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 4c 03 d4 [binary, 4 bytes]
DEBUG:    < PONG 32 4c 03 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62596 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299302796}' [46 bytes]
2025-09-07 19:41:42 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299302796}
2025-09-07 19:41:42 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299302796}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 3f fa 59 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 3a 1d 67 [binary, 4 bytes]
DEBUG:    < PONG 45 3f fa 59 [binary, 4 bytes]
DEBUG:    < PONG 90 3a 1d 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:62604 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: WF67maWqlsqKZ1NRFJaU6Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62606) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:41:48 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:41:48 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:48.439009"}' [128 bytes]
2025-09-07 19:41:48 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:41:48 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:48.439009"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: U/B1X+a/sGKgE7XPwwhYl7YXz78=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:41:47 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:48.439009"}' [128 bytes]
2025-09-07 19:41:48 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:41:48 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:41:48 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:41:48 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:62608 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:62611 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: +CNwugky+mnOE1wZgxjLQw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62613) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:41:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:41:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ihrXtkP2dwrJGQ7uGxIAdpz+mIw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:41:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:52.837748"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:52.837748"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:52.837748"}' [128 bytes]
2025-09-07 19:41:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:41:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:41:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:41:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:41:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:41:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:62615 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 19:41:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:41:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:41:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:41:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:62615 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Y+bNeT0N3+qrhKXOiWqMaA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62617) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:41:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:41:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:54.414894"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 3Ec7E11kN0pTqrZQY9jNygpSb8c=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:41:54 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:62611 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:54.414894"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:41:54.414894"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:62623 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: GlSDwnZ11f2bUlHAFhgDqA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62625) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:42:01 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:42:01 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:42:01.569649"}' [128 bytes]
2025-09-07 19:42:01 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:42:01 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:42:01.569649"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QW/26BKG6cwQiR4Hg2YI8zFjM+o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:42:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:42:01.569649"}' [128 bytes]
2025-09-07 19:42:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:42:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:42:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:42:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:62627 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb d3 5c 4b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 25 47 02 [binary, 4 bytes]
DEBUG:    < PONG eb d3 5c 4b [binary, 4 bytes]
DEBUG:    < PONG 9b 25 47 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c 08 b2 d2 [binary, 4 bytes]
DEBUG:    < PONG 2c 08 b2 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\rÍ€!' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 d4 ef aa [binary, 4 bytes]
DEBUG:    < PONG '\rÍ€!' [text, 4 bytes]
DEBUG:    < PONG 23 d4 ef aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62636 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299351581}' [46 bytes]
2025-09-07 19:42:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299351581}
2025-09-07 19:42:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299351581}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 2b 16 28 [binary, 4 bytes]
DEBUG:    < PONG a3 2b 16 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 3b a4 02 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 f5 a3 c3 [binary, 4 bytes]
DEBUG:    < PONG 60 3b a4 02 [binary, 4 bytes]
DEBUG:    < PONG e8 f5 a3 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62651 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299381582}' [46 bytes]
2025-09-07 19:43:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299381582}
2025-09-07 19:43:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299381582}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 c0 93 3d [binary, 4 bytes]
DEBUG:    < PONG 48 c0 93 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 ff f1 9b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc df d9 db [binary, 4 bytes]
DEBUG:    < PONG 81 ff f1 9b [binary, 4 bytes]
DEBUG:    < PONG cc df d9 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 bc 1e 9d [binary, 4 bytes]
DEBUG:    < PONG 13 bc 1e 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c 8d 11 78 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e c8 5a 7c [binary, 4 bytes]
DEBUG:    < PONG 0c 8d 11 78 [binary, 4 bytes]
DEBUG:    < PONG 5e c8 5a 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:62657 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299411582}' [46 bytes]
2025-09-07 19:43:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299411582}
2025-09-07 19:43:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299411582}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b 1b 1c 91 [binary, 4 bytes]
DEBUG:    < PONG 3b 1b 1c 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f ba ba 1e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf f9 0b ac [binary, 4 bytes]
DEBUG:    < PONG 7f ba ba 1e [binary, 4 bytes]
DEBUG:    < PONG cf f9 0b ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 4f f4 b7 [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757299441581}' [46 bytes]
INFO:     127.0.0.1:62675 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < PONG 24 4f f4 b7 [binary, 4 bytes]
2025-09-07 19:44:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299441581}
2025-09-07 19:44:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757299441581}
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 9f 08 b5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f b3 ae 88 [binary, 4 bytes]
DEBUG:    < PONG 9d 9f 08 b5 [binary, 4 bytes]
DEBUG:    < PONG 7f b3 ae 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:62693 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: nHvt4TBatFSp6I2+ty3glw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62695) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 19:44:19 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 19:44:19 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:44:19.287667"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: O5Ce/8RUdm/xCYf6tTi2Vr4sni0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 02:44:18 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:44:19.287667"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T19:44:19.287667"}' [128 bytes]
2025-09-07 19:44:19 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:44:19 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 19:44:19 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:44:19 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 19:44:19 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 19:44:19 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:62697 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 f4 f8 5b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd e7 7a 67 [binary, 4 bytes]
DEBUG:    < PONG 62 f4 f8 5b [binary, 4 bytes]
DEBUG:    < PONG dd e7 7a 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e 1c 3f 3d [binary, 4 bytes]
DEBUG:    < PONG 8e 1c 3f 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
