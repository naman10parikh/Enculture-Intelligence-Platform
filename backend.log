INFO:     Will watch for changes in these directories: ['/Users/naman/Enculture-Intelligence-Platform/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [60650] using WatchFiles
INFO:     Started server process [60662]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
üöÄ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:50490 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50492 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/david_williams HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: fj2sTB+Gl8uOenGD5fwrug==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50486) - "WebSocket /api/v1/notifications/ws/david_williams" [accepted]
2025-09-07 14:21:52 - app.services.websocket_manager - INFO - WebSocket connection established for user david_williams
2025-09-07 14:21:52 - app.services.websocket_manager - INFO - WebSocket connection established for user david_williams
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: pu5TzBCvdEj8ZVCZgFohYLboMC4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:21:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:21:52.951778"}' [128 bytes]
2025-09-07 14:21:52 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:21:52 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:21:53 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115d3c160>
2025-09-07 14:21:53 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115d3c160>
2025-09-07 14:21:53 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10f851890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:21:53 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10f851890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:21:53 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115d72fa0>
2025-09-07 14:21:53 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115d72fa0>
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:21:53 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
INFO:     127.0.0.1:50505 - "GET /health HTTP/1.1" 200 OK
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:22:05 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_efac8888df2c9c16c52beeb6c1c6f017'), (b'openai-processing-ms', b'11963'), (b'x-envoy-upstream-service-time', b'11967'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=HIgNlnajtyBrkLjxVJmTl8RLDGGRX9NbqSVKf845Em8-1757280125-1.0.1.1-cJGwW9VCqoZngqHfTuWRYebodq_7V7Icrm4TJ4r8NGPywuG2SifeSSa6.LMkGrEWdFAWXfy4h.6k0D31Hlde889NKwY2BFJ6paPPsbjlotw; path=/; expires=Sun, 07-Sep-25 21:52:05 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=7aXL28Gl9VMtmfQMhGAtUGFUeZhFbpGHE4G.FqDKvY0-1757280125151-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b94222c98b7615-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:22:05 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_efac8888df2c9c16c52beeb6c1c6f017'), (b'openai-processing-ms', b'11963'), (b'x-envoy-upstream-service-time', b'11967'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=HIgNlnajtyBrkLjxVJmTl8RLDGGRX9NbqSVKf845Em8-1757280125-1.0.1.1-cJGwW9VCqoZngqHfTuWRYebodq_7V7Icrm4TJ4r8NGPywuG2SifeSSa6.LMkGrEWdFAWXfy4h.6k0D31Hlde889NKwY2BFJ6paPPsbjlotw; path=/; expires=Sun, 07-Sep-25 21:52:05 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=7aXL28Gl9VMtmfQMhGAtUGFUeZhFbpGHE4G.FqDKvY0-1757280125151-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b94222c98b7615-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:50494 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50530 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 14:22:05 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 583dfdb5-cbdd-40f1-aa3b-000f00669f3f
2025-09-07 14:22:05 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 583dfdb5-cbdd-40f1-aa3b-000f00669f3f
INFO:     127.0.0.1:50532 - "POST /api/v1/chat/stream-with-thread?thread_id=583dfdb5-cbdd-40f1-aa3b-000f00669f3f&prompt=hello HTTP/1.1" 200 OK
2025-09-07 14:22:05 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:22:05 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:22:05 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:22:05 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:22:08 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449485'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_99f9fb5021b99678c5ff00a1d0199d0f'), (b'openai-processing-ms', b'3116'), (b'x-envoy-upstream-service-time', b'3127'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b9426fbad77615-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:22:08 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449485'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_99f9fb5021b99678c5ff00a1d0199d0f'), (b'openai-processing-ms', b'3116'), (b'x-envoy-upstream-service-time', b'3127'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b9426fbad77615-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:22:08 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:22:09 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:22:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user david_williams
2025-09-07 14:22:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user david_williams
2025-09-07 14:22:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user david_williams
2025-09-07 14:22:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user david_williams
INFO:     connection closed
INFO:     127.0.0.1:50578 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: SLHeUbhZ2+E/LJCZ+C7Y7g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50579) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:22:11 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:22:11 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:50578 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: oCUAbuOrPNC7g+e9AcFekZ5InjI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:22:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:11.502863"}' [128 bytes]
INFO:     127.0.0.1:50581 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:50578 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: z7dDBt36+Ja2kZab6G8h3w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50583) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:22:11 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:22:11 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:11.528110"}' [128 bytes]
INFO:     127.0.0.1:50578 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:50581 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 1A12nVwzPRM6Xt/V8+uHra0pjpM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:22:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:11.528110"}' [128 bytes]
INFO:     127.0.0.1:50578 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:50581 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:50578 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:50581 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:22:11 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab b5 86 fb [binary, 4 bytes]
DEBUG:    < PONG ab b5 86 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 59 51 4c [binary, 4 bytes]
DEBUG:    < PONG d7 59 51 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50692 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50692 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: owRQfSu5mp80+51pvTMoQA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50694) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:22:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:22:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:40.727314"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: be7yXseHRhiyNPLqKwzbgXK5njc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:22:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:40.727314"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:40.727314"}' [128 bytes]
INFO:     127.0.0.1:50692 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50692 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: xWPFOYxfHSl+MduicdTpaA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50696) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:22:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:22:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:40.811266"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:40.811266"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:40.811266"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 9XxDqr8ib0ISvLu/UmvYrv9gkXc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:22:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:22:40.811266"}' [128 bytes]
INFO:     127.0.0.1:50698 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280161590}' [46 bytes]
2025-09-07 14:22:41 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280161590}
2025-09-07 14:22:41 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280161590}
INFO:     127.0.0.1:50692 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:50692 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:50692 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:50692 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:50692 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 14:22:43 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:50692 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:50692 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'ÎÄè\x17' [text, 4 bytes]
DEBUG:    < PONG 'ÎÄè\x17' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 9f 6c ff [binary, 4 bytes]
DEBUG:    < PONG f8 9f 6c ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50701 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=Hello%2C%20this%20is%20Michael%20Chen%20testing%20the%20chat%20history%20persistence HTTP/1.1" 200 OK
2025-09-07 14:23:00 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
2025-09-07 14:23:00 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
INFO:     127.0.0.1:50701 - "POST /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=Hello%2C%20this%20is%20Michael%20Chen%20testing%20the%20chat%20history%20persistence HTTP/1.1" 200 OK
2025-09-07 14:23:00 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:23:00 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:23:00 - httpcore.connection - DEBUG - close.started
2025-09-07 14:23:00 - httpcore.connection - DEBUG - close.started
2025-09-07 14:23:00 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:23:00 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:23:00 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:23:00 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:23:00 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f53a0>
2025-09-07 14:23:00 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f53a0>
2025-09-07 14:23:00 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10f851890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:23:00 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10f851890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:23:00 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f7e20>
2025-09-07 14:23:00 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f7e20>
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:23:00 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:23:00 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 87 2f 7f [binary, 4 bytes]
DEBUG:    < PONG 83 87 2f 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a bc de 6c [binary, 4 bytes]
DEBUG:    < PONG 0a bc de 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:23:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449475'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'70ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_0c598d96567811241ba185bd84399fb2'), (b'openai-processing-ms', b'1870'), (b'x-envoy-upstream-service-time', b'1874'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b943c79a237627-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:23:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449475'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'70ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_0c598d96567811241ba185bd84399fb2'), (b'openai-processing-ms', b'1870'), (b'x-envoy-upstream-service-time', b'1874'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b943c79a237627-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:23:02 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:23:03 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:23:03 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:23:03 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f7f70>
2025-09-07 14:23:03 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f7f70>
2025-09-07 14:23:03 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10f957b30> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:23:03 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10f957b30> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:23:03 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f7f40>
2025-09-07 14:23:03 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f7f40>
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:23:03 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:23:03 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:23:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449847'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'20ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_eb0b0ed6b81ea9c1a62f2863d27886cc'), (b'openai-processing-ms', b'514'), (b'x-envoy-upstream-service-time', b'517'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=33uTaJaZIum.b07YWLybrhNgAzrZSlX5wBKZ53gMUgo-1757280184-1.0.1.1-x3sr6x32_fUtazGCRc58V8h33sOugvUwaeXTANQBME3_6PbRqs74uEdOJOmZKFSJp4uugnFOrIPQhGwcNO.15oA9XTtdyPlQkVldh2222IE; path=/; expires=Sun, 07-Sep-25 21:53:04 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=M9Hk179PfzkpPSGSWOxX4GSF7VGDUf.PMNGYto5OdsM-1757280184102-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b943da9fed8694-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:23:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449847'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'20ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_eb0b0ed6b81ea9c1a62f2863d27886cc'), (b'openai-processing-ms', b'514'), (b'x-envoy-upstream-service-time', b'517'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=33uTaJaZIum.b07YWLybrhNgAzrZSlX5wBKZ53gMUgo-1757280184-1.0.1.1-x3sr6x32_fUtazGCRc58V8h33sOugvUwaeXTANQBME3_6PbRqs74uEdOJOmZKFSJp4uugnFOrIPQhGwcNO.15oA9XTtdyPlQkVldh2222IE; path=/; expires=Sun, 07-Sep-25 21:53:04 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=M9Hk179PfzkpPSGSWOxX4GSF7VGDUf.PMNGYto5OdsM-1757280184102-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b943da9fed8694-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:23:04 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:23:04 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:50701 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:50701 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50714 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 cd d8 ee [binary, 4 bytes]
DEBUG:    < PONG 96 cd d8 ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 f4 bd f7 [binary, 4 bytes]
DEBUG:    < PONG c5 f4 bd f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280191589}' [46 bytes]
2025-09-07 14:23:11 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280191589}
2025-09-07 14:23:11 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280191589}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280193271}' [46 bytes]
2025-09-07 14:23:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280193271}
2025-09-07 14:23:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280193271}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '!}Y:' [text, 4 bytes]
DEBUG:    < PONG '!}Y:' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc b6 08 79 [binary, 4 bytes]
DEBUG:    < PONG fc b6 08 79 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:23:26 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:23:26 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:23:26 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:23:26 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 56d/ozWye4LsNPlmIMwjAA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50719) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:23:26 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:23:26 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4HxTBMv71KXAmdZyDq6K1Jg223k=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:23:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:23:26.820487"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '6\x00ck' [text, 4 bytes]
DEBUG:    < PONG '6\x00ck' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 d6 89 8d [binary, 4 bytes]
DEBUG:    < PONG 44 d6 89 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '1œõ\r' [text, 4 bytes]
DEBUG:    < PONG '1œõ\r' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50709 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50725 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280221589}' [46 bytes]
2025-09-07 14:23:41 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280221589}
2025-09-07 14:23:41 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280221589}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 ad c1 ea [binary, 4 bytes]
DEBUG:    < PONG 47 ad c1 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50727 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=Hi%2C%20this%20is%20Emily%20Rodriguez.%20I%20should%20not%20see%20Michael%27s%20chat%20history! HTTP/1.1" 200 OK
2025-09-07 14:23:47 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
2025-09-07 14:23:47 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
INFO:     127.0.0.1:50727 - "POST /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=Hi%2C%20this%20is%20Emily%20Rodriguez.%20I%20should%20not%20see%20Michael%27s%20chat%20history! HTTP/1.1" 200 OK
2025-09-07 14:23:47 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:23:47 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:23:47 - httpcore.connection - DEBUG - close.started
2025-09-07 14:23:47 - httpcore.connection - DEBUG - close.started
2025-09-07 14:23:47 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:23:47 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:23:47 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:23:47 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:23:47 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162cadf0>
2025-09-07 14:23:47 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162cadf0>
2025-09-07 14:23:47 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10f851890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:23:47 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10f851890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:23:47 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f3190>
2025-09-07 14:23:47 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162f3190>
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:23:47 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:23:47 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 d4 cd 0a [binary, 4 bytes]
DEBUG:    < PONG c8 d4 cd 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 8a b6 97 [binary, 4 bytes]
DEBUG:    < PONG 8f 8a b6 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:23:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449391'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'81ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_14d8d2ebfd0100bbaadb79db3c3e7dde'), (b'openai-processing-ms', b'3621'), (b'x-envoy-upstream-service-time', b'3630'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b944ef2b9a3087-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:23:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449391'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'81ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_14d8d2ebfd0100bbaadb79db3c3e7dde'), (b'openai-processing-ms', b'3621'), (b'x-envoy-upstream-service-time', b'3630'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b944ef2b9a3087-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:23:51 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:23:54 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280236962}' [46 bytes]
2025-09-07 14:23:56 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757280236962}
2025-09-07 14:23:56 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757280236962}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 55 20 61 [binary, 4 bytes]
DEBUG:    < PONG 80 55 20 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 14:24:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:24:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:24:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:24:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:24:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:24:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     connection closed
INFO:     127.0.0.1:50734 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee 3f e5 3b [binary, 4 bytes]
DEBUG:    < PONG ee 3f e5 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 2a a6 37 [binary, 4 bytes]
DEBUG:    < PONG e0 2a a6 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280251590}' [46 bytes]
2025-09-07 14:24:11 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280251590}
2025-09-07 14:24:11 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280251590}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 18 87 ec [binary, 4 bytes]
DEBUG:    < PONG 2a 18 87 ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee 49 39 17 [binary, 4 bytes]
DEBUG:    < PONG ee 49 39 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50740 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280281590}' [46 bytes]
2025-09-07 14:24:41 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280281590}
2025-09-07 14:24:41 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280281590}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:24:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:24:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:50743 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 3eMwn6QDmjBVZZvGX+2pIw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50746) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:24:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:24:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:46.662874"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 23/5PnAaJm5biCs+x5Tnu3WH8r4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:24:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:46.662874"}' [128 bytes]
INFO:     127.0.0.1:50747 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:24:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:24:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: KGB/Zwa0wbkMFZLK0QgABg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50749) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:24:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:24:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:46.761841"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QFxp2aGG5Bn6X5dGpHpNWpWleHM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:24:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:46.761841"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 44 ea e2 [binary, 4 bytes]
DEBUG:    < PONG 89 44 ea e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:50755 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /47bJGX0S4I/WIEMYmO4Tg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50756) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:24:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:24:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:52.918464"}' [128 bytes]
2025-09-07 14:24:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 14:24:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
INFO:     127.0.0.1:50755 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: oGnFNfy8F6L3z46sTSH7P0sQisw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:24:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 14:24:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:24:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:52.918464"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    ! failing connection with code 1006
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: yyxTtQ7eaFrEdZSIcgCCSA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:50758 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 50760) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:24:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:24:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:52.983727"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: y7Kvl3RljvKfnkhgCe7f8vX+ffQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:24:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:52.983727"}' [128 bytes]
2025-09-07 14:24:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 14:24:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
INFO:     127.0.0.1:50755 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:50758 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:50755 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:50758 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: teW4o+PmZOyz+17YJowP4w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:50755 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 50762) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:24:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:24:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:53.017817"}' [128 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: iWevDP2BRVtYLNFsd1JnV3fciLY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:24:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 14:24:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:24:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:24:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:24:53 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 14:24:53 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     connection closed
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: WRDTgSAJiiEmqLCDP3jk6Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50764) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:24:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:24:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: FEUJRbucAwIaktRESf0Og1q1oxE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:24:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:53.030417"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:24:53.030417"}' [128 bytes]
2025-09-07 14:24:53 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 14:24:53 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 14:24:53 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:25:00 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:25:00 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:25:00 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:25:00 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:50769 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: k4nwLSXvNUmir14kLpcT7g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50770) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:25:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:25:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:25:00.331082"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: cKFWzxBmlwiq2FB3fJPYo5pMB0E=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:24:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:25:00.331082"}' [128 bytes]
INFO:     127.0.0.1:50771 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:25:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:25:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:25:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:25:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:50777 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: VAbyaX6UrzD341XfyjgWlA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50778) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:25:10 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:25:10 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:25:10.795208"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Pdj0RFX0Z1vm/uYsB4IFfiC5Wos=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:25:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:25:10.795208"}' [128 bytes]
INFO:     127.0.0.1:50779 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 fe c1 d7 [binary, 4 bytes]
DEBUG:    < PONG 41 fe c1 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 dd 1f 7f [binary, 4 bytes]
DEBUG:    < PONG a7 dd 1f 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 54 aa 99 [binary, 4 bytes]
DEBUG:    < PONG 0b 54 aa 99 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50829 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280340799}' [46 bytes]
2025-09-07 14:25:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280340799}
2025-09-07 14:25:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280340799}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b 8c 3c 51 [binary, 4 bytes]
DEBUG:    < PONG 3b 8c 3c 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 6e 74 ca [binary, 4 bytes]
DEBUG:    < PONG 94 6e 74 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 ea 12 0f [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280370799}' [46 bytes]
DEBUG:    < PONG 05 ea 12 0f [binary, 4 bytes]
INFO:     127.0.0.1:50898 - "GET /health HTTP/1.1" 200 OK
2025-09-07 14:26:10 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280370799}
2025-09-07 14:26:10 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280370799}
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 09 26 d4 [binary, 4 bytes]
DEBUG:    < PONG d0 09 26 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'F?\x18P' [text, 4 bytes]
DEBUG:    < PONG 'F?\x18P' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 50 5f 1f [binary, 4 bytes]
DEBUG:    < PONG 99 50 5f 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50904 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280400800}' [46 bytes]
2025-09-07 14:26:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280400800}
2025-09-07 14:26:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280400800}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b ec ec e3 [binary, 4 bytes]
DEBUG:    < PONG 3b ec ec e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 eb e6 d4 [binary, 4 bytes]
DEBUG:    < PONG 50 eb e6 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50916 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280430799}' [46 bytes]
2025-09-07 14:27:10 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280430799}
2025-09-07 14:27:10 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280430799}
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf bd d3 ca [binary, 4 bytes]
DEBUG:    < PONG cf bd d3 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 6b 98 46 [binary, 4 bytes]
DEBUG:    < PONG ab 6b 98 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b f5 a4 20 [binary, 4 bytes]
DEBUG:    < PONG 7b f5 a4 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 8a 2f ca [binary, 4 bytes]
DEBUG:    < PONG 90 8a 2f ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280460799}' [46 bytes]
2025-09-07 14:27:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280460799}
2025-09-07 14:27:40 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280460799}
INFO:     127.0.0.1:50932 - "GET /health HTTP/1.1" 200 OK
2025-09-07 14:27:44 - watchfiles.main - DEBUG - 3 changes detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/chat_threads.py'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/models/chat_thread.py'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/services/chat_thread_service.py')}
WARNING:  WatchFiles detected changes in 'app/services/chat_thread_service.py', 'app/api/v1/endpoints/chat_threads.py', 'app/models/chat_thread.py'. Reloading...
INFO:     Shutting down
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
2025-09-07 14:27:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:27:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:27:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:27:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:27:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:27:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:27:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:27:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [60662]
üõë Shutting down Enculture Backend API...
INFO:     Started server process [65460]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: R8i5CgUvFjQsnIQ0MuF6FQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50937) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
üöÄ Starting Enculture Backend API...
Environment: development
Debug Mode: True
2025-09-07 14:27:47 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:27:47 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: bLZ78C9g8SSG1FGv5kmjp5tvgIc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:27:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:27:47.923762"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 de 70 ca [binary, 4 bytes]
DEBUG:    < PONG 43 de 70 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50950 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280498153}' [46 bytes]
2025-09-07 14:28:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280498153}
2025-09-07 14:28:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280498153}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 7b 06 bd [binary, 4 bytes]
DEBUG:    < PONG d9 7b 06 bd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50970 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 70 89 1f [binary, 4 bytes]
DEBUG:    < PONG 52 70 89 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280528154}' [46 bytes]
2025-09-07 14:28:48 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280528154}
2025-09-07 14:28:48 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280528154}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d 24 9e 1d [binary, 4 bytes]
DEBUG:    < PONG 1d 24 9e 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50974 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280558154}' [46 bytes]
2025-09-07 14:29:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280558154}
2025-09-07 14:29:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280558154}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 09 6a 54 [binary, 4 bytes]
DEBUG:    < PONG f6 09 6a 54 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '{\x0bB\x7f' [text, 4 bytes]
DEBUG:    < PONG '{\x0bB\x7f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280588154}' [46 bytes]
2025-09-07 14:29:48 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280588154}
2025-09-07 14:29:48 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757280588154}
INFO:     127.0.0.1:50988 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:29:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:29:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:29:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:29:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/david_williams HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Wrb7xVso/+1YAxNMgI0h/A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50991) - "WebSocket /api/v1/notifications/ws/david_williams" [accepted]
2025-09-07 14:29:56 - app.services.websocket_manager - INFO - WebSocket connection established for user david_williams
2025-09-07 14:29:56 - app.services.websocket_manager - INFO - WebSocket connection established for user david_williams
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: l39LDkVEybt0TLRQIE9yfDo7xl8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:29:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:29:56.117719"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: wBvMsD4tRG/5TR8lyKuG1g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50993) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:29:58 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:29:58 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: LxEKBRImWVzS20c6pVVCKbIhFJM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:29:58 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:29:58.607026"}' [128 bytes]
2025-09-07 14:29:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user david_williams
2025-09-07 14:29:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user david_williams
2025-09-07 14:29:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user david_williams
2025-09-07 14:29:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user david_williams
INFO:     connection closed
INFO:     127.0.0.1:51004 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:51007 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=local_1757280612245_536rx6bng&prompt=hi%20hows%20it%20going HTTP/1.1" 200 OK
2025-09-07 14:30:14 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread local_1757280612245_536rx6bng
2025-09-07 14:30:14 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread local_1757280612245_536rx6bng
INFO:     127.0.0.1:51007 - "POST /api/v1/chat/stream-with-thread?thread_id=local_1757280612245_536rx6bng&prompt=hi%20hows%20it%20going HTTP/1.1" 404 Not Found
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 d1 d2 47 [binary, 4 bytes]
DEBUG:    < PONG d0 d1 d2 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
2025-09-07 14:30:24 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:30:24 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:30:24 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:30:24 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: EbnVEytq2o9e2LX8eNMeeA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51011) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:30:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:30:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: PX21p98bL7rKqSzKSu6Xr14CaHE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:30:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:30:24.234310"}' [128 bytes]
INFO:     127.0.0.1:51013 - "GET /api/v1/chat-threads/threads/5d24be12-3ffb-400f-b46a-10dc1edb216a HTTP/1.1" 200 OK
INFO:     127.0.0.1:51015 - "GET /api/v1/chat-threads/threads/42898881-a438-41dc-badc-f6d2eedb5d3f HTTP/1.1" 200 OK
INFO:     127.0.0.1:51015 - "GET /api/v1/chat-threads/threads/f4ad082b-b8a5-4421-8f8e-cf018e6405b7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51015 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=hows%20it%20going HTTP/1.1" 200 OK
2025-09-07 14:30:30 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
2025-09-07 14:30:30 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
INFO:     127.0.0.1:51015 - "POST /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=hows%20it%20going HTTP/1.1" 200 OK
2025-09-07 14:30:30 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:30:30 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:30:30 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:30:30 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:30:30 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:30:30 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11495c100>
2025-09-07 14:30:30 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11495c100>
2025-09-07 14:30:30 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10e2d3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:30:30 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10e2d3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:30:30 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114951d60>
2025-09-07 14:30:30 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114951d60>
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:30:30 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:30:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449211'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'105ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_68214770906bb6f9b7c4f07e3052073e'), (b'openai-processing-ms', b'1578'), (b'x-envoy-upstream-service-time', b'1583'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=An4.qDci3RADk7rpoLeAJTj2u6lN9ukhgCxx4EeobIM-1757280632-1.0.1.1-RNznEjswalW2DZIc7lyTUpB3sWNoPu5nwN2GIADdUFpmtdJJIs8oiOmSbUeGw_sa2HjyN5aHX42txAlY1XfetRzb7YzC8LB3uZZPA64WsGM; path=/; expires=Sun, 07-Sep-25 22:00:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=r.uEkaUfao3.AOzHEaMIbigJkOi4bxerf1.lZePYu7c-1757280632493-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b94ec6bf9fa38a-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:30:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449211'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'105ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_68214770906bb6f9b7c4f07e3052073e'), (b'openai-processing-ms', b'1578'), (b'x-envoy-upstream-service-time', b'1583'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=An4.qDci3RADk7rpoLeAJTj2u6lN9ukhgCxx4EeobIM-1757280632-1.0.1.1-RNznEjswalW2DZIc7lyTUpB3sWNoPu5nwN2GIADdUFpmtdJJIs8oiOmSbUeGw_sa2HjyN5aHX42txAlY1XfetRzb7YzC8LB3uZZPA64WsGM; path=/; expires=Sun, 07-Sep-25 22:00:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=r.uEkaUfao3.AOzHEaMIbigJkOi4bxerf1.lZePYu7c-1757280632493-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b94ec6bf9fa38a-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:30:32 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:30:33 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/david_williams HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: f5Y0uby6HjdlKdNKYkoeKw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51021) - "WebSocket /api/v1/notifications/ws/david_williams" [accepted]
2025-09-07 14:30:40 - app.services.websocket_manager - INFO - WebSocket connection established for user david_williams
2025-09-07 14:30:40 - app.services.websocket_manager - INFO - WebSocket connection established for user david_williams
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: b975gb5ZbvPMyh0+SMIYb86scpE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:30:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:30:40.572021"}' [128 bytes]
2025-09-07 14:30:40 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:30:40 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:30:40 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:30:40 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:51023 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:51025 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=22e13e90-a50b-41fc-990f-6ae081ca3245&prompt=whats%20up HTTP/1.1" 200 OK
2025-09-07 14:30:43 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 22e13e90-a50b-41fc-990f-6ae081ca3245
2025-09-07 14:30:43 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 22e13e90-a50b-41fc-990f-6ae081ca3245
INFO:     127.0.0.1:51025 - "POST /api/v1/chat/stream-with-thread?thread_id=22e13e90-a50b-41fc-990f-6ae081ca3245&prompt=whats%20up HTTP/1.1" 200 OK
2025-09-07 14:30:43 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:30:43 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:30:43 - httpcore.connection - DEBUG - close.started
2025-09-07 14:30:43 - httpcore.connection - DEBUG - close.started
2025-09-07 14:30:43 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:30:43 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:30:43 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:30:43 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:30:43 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114d15310>
2025-09-07 14:30:43 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114d15310>
2025-09-07 14:30:43 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10e2d3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:30:43 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10e2d3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:30:43 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114d75d90>
2025-09-07 14:30:43 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114d75d90>
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:30:43 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:30:43 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:30:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449424'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'76ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_66da23722a01196aaf26ac3d2be51b92'), (b'openai-processing-ms', b'1703'), (b'x-envoy-upstream-service-time', b'1705'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b94f180e3690db-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:30:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449424'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'76ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_66da23722a01196aaf26ac3d2be51b92'), (b'openai-processing-ms', b'1703'), (b'x-envoy-upstream-service-time', b'1705'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b94f180e3690db-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:30:45 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:30:47 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: DWk5b+ZDUcNSXjnMb8BBzQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51029) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:30:50 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:30:50 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: DS1wdhgBDe+OQMeDkT/w8EZE52o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:30:49 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:30:50.730913"}' [128 bytes]
2025-09-07 14:30:50 - app.services.websocket_manager - INFO - WebSocket connection closed for user david_williams
2025-09-07 14:30:50 - app.services.websocket_manager - INFO - WebSocket connection closed for user david_williams
2025-09-07 14:30:50 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user david_williams
2025-09-07 14:30:50 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user david_williams
INFO:     connection closed
INFO:     127.0.0.1:51031 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=local_1757280612245_536rx6bng&prompt=whats%20up HTTP/1.1" 200 OK
2025-09-07 14:30:56 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread local_1757280612245_536rx6bng
2025-09-07 14:30:56 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread local_1757280612245_536rx6bng
INFO:     127.0.0.1:51031 - "POST /api/v1/chat/stream-with-thread?thread_id=local_1757280612245_536rx6bng&prompt=whats%20up HTTP/1.1" 404 Not Found
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: M3ZiE3CqIzdYGPJu9cR3FA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51033) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 14:30:59 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 14:30:59 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: vSAVFnzXgWmGNbP5qIN2XUAUYZ0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:30:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:30:59.617341"}' [128 bytes]
2025-09-07 14:30:59 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:30:59 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:30:59 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:30:59 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:51035 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=local_1757280662403_l83uiie7q&prompt=hi! HTTP/1.1" 200 OK
2025-09-07 14:31:03 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread local_1757280662403_l83uiie7q
2025-09-07 14:31:03 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread local_1757280662403_l83uiie7q
INFO:     127.0.0.1:51035 - "POST /api/v1/chat/stream-with-thread?thread_id=local_1757280662403_l83uiie7q&prompt=hi! HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51038 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 43 4b 85 [binary, 4 bytes]
DEBUG:    < PONG 61 43 4b 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280689623}' [46 bytes]
2025-09-07 14:31:29 - app.api.v1.endpoints.websocket - INFO - Received message from gayathri_sriram: {"type":"heartbeat","timestamp":1757280689623}
2025-09-07 14:31:29 - app.api.v1.endpoints.websocket - INFO - Received message from gayathri_sriram: {"type":"heartbeat","timestamp":1757280689623}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'uL,Y' [text, 4 bytes]
DEBUG:    < PONG 'uL,Y' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51044 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757280719624}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 00 c1 61 [binary, 4 bytes]
2025-09-07 14:31:59 - app.api.v1.endpoints.websocket - INFO - Received message from gayathri_sriram: {"type":"heartbeat","timestamp":1757280719624}
2025-09-07 14:31:59 - app.api.v1.endpoints.websocket - INFO - Received message from gayathri_sriram: {"type":"heartbeat","timestamp":1757280719624}
DEBUG:    < PONG c3 00 c1 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51053 - "GET /health HTTP/1.1" 200 OK
