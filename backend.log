INFO:     Will watch for changes in these directories: ['/Users/naman/Enculture-Intelligence-Platform/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [68811] using WatchFiles
INFO:     Started server process [68822]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/user_demo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3001
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: nz9Id8kJkpzYJCOHhN7qUw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56072) - "WebSocket /api/v1/notifications/ws/user_demo" [accepted]
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
2025-09-07 11:02:25 - app.services.websocket_manager - INFO - WebSocket connection established for user user_demo
2025-09-07 11:02:25 - app.services.websocket_manager - INFO - WebSocket connection established for user user_demo
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 8rTMdDsih7LlnGX89m/8NF74X1s=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:02:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:02:25.117642"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/user_demo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3001
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ctZGdgoqFv80Incy5JfEBw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56075) - "WebSocket /api/v1/notifications/ws/user_demo" [accepted]
2025-09-07 11:02:25 - app.services.websocket_manager - INFO - WebSocket connection established for user user_demo
2025-09-07 11:02:25 - app.services.websocket_manager - INFO - WebSocket connection established for user user_demo
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: m+ONKkytHSZn0BlH7VguCAlBtao=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:02:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:02:25.131042"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:02:25.131042"}' [128 bytes]
INFO:     127.0.0.1:56070 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:56080 - "GET /health HTTP/1.1" 200 OK
2025-09-07 11:02:25 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:02:25 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:02:25 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115ff7a90>
2025-09-07 11:02:25 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115ff7a90>
2025-09-07 11:02:25 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:02:25 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:02:25 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115ff7a30>
2025-09-07 11:02:25 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115ff7a30>
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:02:25 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 9ZSytI8jj6GvxjnD6EGBfQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56097) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 11:02:27 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 11:02:27 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: SnkmKF78XKUsQ5Vap7Kb2fWNoYY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:02:27 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:02:27.219442"}' [128 bytes]
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:02:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_3e76cd57e81f19ed6ca7822231c874b2'), (b'openai-processing-ms', b'6789'), (b'x-envoy-upstream-service-time', b'6791'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=mgBvh0X1yE4wnsA4d6FswuW0PJd0FMS5_7ErRi32xAE-1757268152-1.0.1.1-tZdi9ethwmKsoZpkrTlVwj1KJyEhUAzhcedBqHRQqS5pvbQcuI73Lu6NYH0Hxi5ahNOXGDdqVZMzOzdZ17eIlAlYfGbhLjSsJXM6zLqSkgw; path=/; expires=Sun, 07-Sep-25 18:32:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=r6x77gyEBdUWsZevI_Uc__RmwR0RWOYgjWU2N9egob8-1757268152767-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81df7eeb7dedc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:02:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_3e76cd57e81f19ed6ca7822231c874b2'), (b'openai-processing-ms', b'6789'), (b'x-envoy-upstream-service-time', b'6791'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=mgBvh0X1yE4wnsA4d6FswuW0PJd0FMS5_7ErRi32xAE-1757268152-1.0.1.1-tZdi9ethwmKsoZpkrTlVwj1KJyEhUAzhcedBqHRQqS5pvbQcuI73Lu6NYH0Hxi5ahNOXGDdqVZMzOzdZ17eIlAlYfGbhLjSsJXM6zLqSkgw; path=/; expires=Sun, 07-Sep-25 18:32:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=r6x77gyEBdUWsZevI_Uc__RmwR0RWOYgjWU2N9egob8-1757268152767-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81df7eeb7dedc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:02:32 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56082 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:56143 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 11:02:32 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 2ca401b8-88a7-4935-b871-080c3c7c7f49
2025-09-07 11:02:32 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 2ca401b8-88a7-4935-b871-080c3c7c7f49
INFO:     127.0.0.1:56145 - "POST /api/v1/chat/stream-with-thread?thread_id=2ca401b8-88a7-4935-b871-080c3c7c7f49&prompt=hello HTTP/1.1" 200 OK
2025-09-07 11:02:33 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 11:02:33 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:02:33 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:02:33 - watchfiles.main - DEBUG - 2 changes detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:02:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_68ab350a5596666b9095649da27914b6'), (b'openai-processing-ms', b'1138'), (b'x-envoy-upstream-service-time', b'1141'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81e248801dedc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:02:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_68ab350a5596666b9095649da27914b6'), (b'openai-processing-ms', b'1138'), (b'x-envoy-upstream-service-time', b'1141'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81e248801dedc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:02:34 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:02:35 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 11:02:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 11:02:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 11:02:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
2025-09-07 11:02:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: N3m734qUy9LgwKyQZ1Z5aw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56186) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 11:02:37 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 11:02:37 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: voDQpc+Re5kaSBGhoYpJvM/sOo0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:02:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:02:37.243319"}' [128 bytes]
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
INFO:     127.0.0.1:56188 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:02:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
INFO:     127.0.0.1:56188 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: RVbXt5QTaJvZiHmEjpKv3Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56194) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 11:02:37 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 11:02:37 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:02:37.257082"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: UeM4+bnoCIk1aaRRMyBmhyWpGpM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:02:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:02:37.257082"}' [128 bytes]
INFO:     127.0.0.1:56188 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56193 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56188 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56193 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56193 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56188 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:02:37 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 11:02:38 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:02:44 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_62a247fef8cc644cd6660307223c7ddc'), (b'openai-processing-ms', b'6742'), (b'x-envoy-upstream-service-time', b'6745'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81e3f195adedc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:02:44 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_62a247fef8cc644cd6660307223c7ddc'), (b'openai-processing-ms', b'6742'), (b'x-envoy-upstream-service-time', b'6745'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81e3f195adedc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56190 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:02:44 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 b2 b7 b2 [binary, 4 bytes]
DEBUG:    < PONG 27 b2 b7 b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb e0 fb 81 [binary, 4 bytes]
DEBUG:    < PONG bb e0 fb 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:02:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_1ab4ef40b31c83c6668c677387c01b38'), (b'openai-processing-ms', b'5964'), (b'x-envoy-upstream-service-time', b'5966'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81e6abe07dedc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:02:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_1ab4ef40b31c83c6668c677387c01b38'), (b'openai-processing-ms', b'5964'), (b'x-envoy-upstream-service-time', b'5966'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81e6abe07dedc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:02:50 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56190 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 7c 29 74 [binary, 4 bytes]
DEBUG:    < PONG fe 7c 29 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 7a d6 57 [binary, 4 bytes]
DEBUG:    < PONG 20 7a d6 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 97 a9 a1 [binary, 4 bytes]
DEBUG:    < PONG eb 97 a9 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 60 5e 7f [binary, 4 bytes]
DEBUG:    < PONG b0 60 5e 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 d3 a6 08 [binary, 4 bytes]
DEBUG:    < PONG 84 d3 a6 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 1d a2 6b [binary, 4 bytes]
DEBUG:    < PONG c9 1d a2 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d 10 37 a3 [binary, 4 bytes]
DEBUG:    < PONG 4d 10 37 a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 d2 df 0d [binary, 4 bytes]
DEBUG:    < PONG b2 d2 df 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 67 28 82 [binary, 4 bytes]
DEBUG:    < PONG 24 67 28 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd d4 b4 63 [binary, 4 bytes]
DEBUG:    < PONG fd d4 b4 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb fe 6e f9 [binary, 4 bytes]
DEBUG:    < PONG fb fe 6e f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 d0 9c f3 [binary, 4 bytes]
DEBUG:    < PONG 82 d0 9c f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
2025-09-07 11:03:45 - httpcore.connection - DEBUG - close.started
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
2025-09-07 11:03:45 - httpcore.connection - DEBUG - close.started
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
2025-09-07 11:03:45 - httpcore.connection - DEBUG - close.complete
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: JrBkm5iXHY2Njr2+E+vl5g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
2025-09-07 11:03:45 - httpcore.connection - DEBUG - close.complete
INFO:     ('127.0.0.1', 56245) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 11:03:45 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:03:45 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:03:45 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 11:03:45 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 11:03:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 11:03:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 11:03:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
2025-09-07 11:03:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: n2ohkyTI01vrsrQaPzSm/+dI2i8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:03:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:03:45.251722"}' [128 bytes]
2025-09-07 11:03:45 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11527e730>
2025-09-07 11:03:45 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11527e730>
2025-09-07 11:03:45 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:03:45 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     127.0.0.1:56244 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
2025-09-07 11:03:45 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1164fdeb0>
2025-09-07 11:03:45 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1164fdeb0>
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:03:45 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: WvbNGmV02C2dshWxQAfr1g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56248) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 11:03:48 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 11:03:48 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 11:03:48 - app.services.websocket_manager - ERROR - Error sending message to gayathri_sriram: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 11:03:48 - app.services.websocket_manager - ERROR - Error sending message to gayathri_sriram: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:03:48.294604"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: dvcJwpBR+sYVgbmlCsmwlU7rcj4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:03:48 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:03:48.294604"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 11:03:51 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 11:03:51 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 11:03:51 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
2025-09-07 11:03:51 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: BMU25eommFNIThSqM2iNTQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56254) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 11:03:51 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 11:03:51 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 00jYxLXtQozQMFuZg1mz7Vf4la8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:03:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:03:51.448695"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:03:51.448695"}' [128 bytes]
INFO:     127.0.0.1:56253 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:03:53 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_85737ae563dbfdf97ebffa0beeb9666a'), (b'openai-processing-ms', b'7995'), (b'x-envoy-upstream-service-time', b'7999'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81fe85f69a36e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:03:53 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_85737ae563dbfdf97ebffa0beeb9666a'), (b'openai-processing-ms', b'7995'), (b'x-envoy-upstream-service-time', b'7999'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b81fe85f69a36e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56243 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:03:53 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: BSXFEBRbR70ZW1nBM6jpjQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56256) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:03:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:03:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: hLdJ8eH3VWxp9h6E2v5mfYOyWcM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:03:54 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:56243 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:03:54.159241"}' [128 bytes]
2025-09-07 11:03:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 11:03:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 11:03:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
2025-09-07 11:03:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
INFO:     connection closed
INFO:     127.0.0.1:56243 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Qw7S2KQD1edP6lwbQLfJfg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56260) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:03:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:03:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: kdMrJCNHpyLi8Cw6lDLwymWXbNQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:03:54 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:03:54.175906"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:03:54.175906"}' [128 bytes]
INFO:     127.0.0.1:56243 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56258 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56243 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56258 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:03:54 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 11:03:54 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 b6 5f 0a [binary, 4 bytes]
DEBUG:    < PONG 65 b6 5f 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_652f5694739db23da82bf2299cab66bd'), (b'openai-processing-ms', b'7121'), (b'x-envoy-upstream-service-time', b'7124'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8201b6cb5a36e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_652f5694739db23da82bf2299cab66bd'), (b'openai-processing-ms', b'7121'), (b'x-envoy-upstream-service-time', b'7124'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8201b6cb5a36e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56253 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:04:00 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 34 17 13 [binary, 4 bytes]
DEBUG:    < PONG fb 34 17 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 94 e9 53 [binary, 4 bytes]
DEBUG:    < PONG 43 94 e9 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:07 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_e3728bf2630198a3cb75b0db83de274e'), (b'openai-processing-ms', b'6642'), (b'x-envoy-upstream-service-time', b'6674'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82048eb39a36e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:07 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_e3728bf2630198a3cb75b0db83de274e'), (b'openai-processing-ms', b'6642'), (b'x-envoy-upstream-service-time', b'6674'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82048eb39a36e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56253 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:04:07 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_029399a81fc201a9f4ffe245207acf72'), (b'openai-processing-ms', b'4763'), (b'x-envoy-upstream-service-time', b'4804'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b820744822a36e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_029399a81fc201a9f4ffe245207acf72'), (b'openai-processing-ms', b'4763'), (b'x-envoy-upstream-service-time', b'4804'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b820744822a36e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:04:12 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56253 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING de 6a d9 e7 [binary, 4 bytes]
DEBUG:    < PONG de 6a d9 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 61 1f 18 [binary, 4 bytes]
DEBUG:    < PONG cd 61 1f 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd ee 4e 77 [binary, 4 bytes]
DEBUG:    < PONG fd ee 4e 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 bd 20 37 [binary, 4 bytes]
DEBUG:    < PONG f1 bd 20 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 92 91 7a [binary, 4 bytes]
DEBUG:    < PONG df 92 91 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
2025-09-07 11:04:33 - httpcore.connection - DEBUG - close.started
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
2025-09-07 11:04:33 - httpcore.connection - DEBUG - close.started
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: TEQUxkb60YyLSoUBPWQ8yQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
2025-09-07 11:04:33 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:04:33 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:04:33 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:04:33 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
INFO:     ('127.0.0.1', 56282) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:04:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:04:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:04:33 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 11:04:33 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:33.150858"}' [128 bytes]
2025-09-07 11:04:33 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:04:33 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:04:33 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:04:33 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 3WFKoygC0F1xHU5xK+/hmyM5xU4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:04:32 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:33.150858"}' [128 bytes]
2025-09-07 11:04:33 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660d520>
2025-09-07 11:04:33 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660d520>
2025-09-07 11:04:33 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:04:33 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    ! failing connection with code 1006
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /H1bcsPNdGxNaIctqb1UnQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:56283 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 56286) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:04:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:04:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: w90vH5rYCF6UBK4DvYoo5S7OsH4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:04:32 GMT
DEBUG:    > server: uvicorn
2025-09-07 11:04:33 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1164fd340>
2025-09-07 11:04:33 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1164fd340>
INFO:     connection open
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
DEBUG:    = connection is OPEN
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:33.201661"}' [128 bytes]
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:33.201661"}' [128 bytes]
2025-09-07 11:04:33 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 11:04:33 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:04:33 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
INFO:     127.0.0.1:56283 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56288 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56288 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56283 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56283 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:04:33 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING be fc 76 79 [binary, 4 bytes]
DEBUG:    < PONG be fc 76 79 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:04:37 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 38 d5 81 [binary, 4 bytes]
DEBUG:    < PONG d0 38 d5 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_cff06348c94ecb38afeb8e9e04157b59'), (b'openai-processing-ms', b'6508'), (b'x-envoy-upstream-service-time', b'6512'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82113ebc7df23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_cff06348c94ecb38afeb8e9e04157b59'), (b'openai-processing-ms', b'6508'), (b'x-envoy-upstream-service-time', b'6512'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82113ebc7df23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56280 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:04:39 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_43c85043ce207bb2f32be32b9df81d92'), (b'openai-processing-ms', b'5026'), (b'x-envoy-upstream-service-time', b'5031'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8213def36df23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_43c85043ce207bb2f32be32b9df81d92'), (b'openai-processing-ms', b'5026'), (b'x-envoy-upstream-service-time', b'5031'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8213def36df23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:04:45 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56280 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 60 62 d4 [binary, 4 bytes]
DEBUG:    < PONG 6f 60 62 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 5f e0 af [binary, 4 bytes]
DEBUG:    < PONG e6 5f e0 af [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 11:04:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:04:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:04:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:04:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:04:46 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /4O66nlj0ijK1fAIS8bMlw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56296) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:04:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:04:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:46.513364"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: yL0I1316CpWae8PHyPbOUEyBArU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:04:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:46.513364"}' [128 bytes]
INFO:     127.0.0.1:56297 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_b7dfbd31363c58924d6604a801157aa3'), (b'openai-processing-ms', b'5140'), (b'x-envoy-upstream-service-time', b'5143'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b821674bd1df23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:04:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_b7dfbd31363c58924d6604a801157aa3'), (b'openai-processing-ms', b'5140'), (b'x-envoy-upstream-service-time', b'5143'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b821674bd1df23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:04:51 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56280 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 39 c5 ff [binary, 4 bytes]
DEBUG:    < PONG 17 39 c5 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: rMq+U7gbbxmMZfOHOHZByg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56304) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:04:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:04:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
DEBUG:    > Upgrade: websocket
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: KkrFVrofHmEVsUeoZC5lhqyX604=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:04:56 GMT
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:04:56 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:56.898393"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:56.898393"}' [128 bytes]
2025-09-07 11:04:56 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 11:04:56 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 11:04:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:04:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:04:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:04:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:56307 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56307 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4JWYheha09tXLI0wH+IhYw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56311) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:04:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:04:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 3FCRtj+DXGTI9rbFLXmEPBDdJY0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:04:56 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:56.924387"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:56.924387"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:04:56.924387"}' [128 bytes]
INFO:     127.0.0.1:56307 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56310 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56307 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56307 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:04:57 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 22 0f af [binary, 4 bytes]
DEBUG:    < PONG 98 22 0f af [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:05:01 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_2909bb2462fba453dff31a41d3084237'), (b'openai-processing-ms', b'5796'), (b'x-envoy-upstream-service-time', b'5798'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b821a7fa6ddf23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_2909bb2462fba453dff31a41d3084237'), (b'openai-processing-ms', b'5796'), (b'x-envoy-upstream-service-time', b'5798'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b821a7fa6ddf23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56306 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:05:02 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 02 f0 18 [binary, 4 bytes]
DEBUG:    < PONG e3 02 f0 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3f 5a 95 80 [binary, 4 bytes]
DEBUG:    < PONG 3f 5a 95 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_a4161f3d21dcd26dca64749d9f99b389'), (b'openai-processing-ms', b'7925'), (b'x-envoy-upstream-service-time', b'7928'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b821cd4ae1df23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_a4161f3d21dcd26dca64749d9f99b389'), (b'openai-processing-ms', b'7925'), (b'x-envoy-upstream-service-time', b'7928'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b821cd4ae1df23-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:05:10 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56306 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 fb e6 6a [binary, 4 bytes]
DEBUG:    < PONG 07 fb e6 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
2025-09-07 11:05:16 - httpcore.connection - DEBUG - close.started
DEBUG:    < connection: Upgrade
2025-09-07 11:05:16 - httpcore.connection - DEBUG - close.started
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
2025-09-07 11:05:16 - httpcore.connection - DEBUG - close.complete
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
2025-09-07 11:05:16 - httpcore.connection - DEBUG - close.complete
DEBUG:    < origin: http://localhost:3000
2025-09-07 11:05:16 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:05:16 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 97X7VizsEosOnsOMANfsSA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 5f 2c c9 [binary, 4 bytes]
INFO:     ('127.0.0.1', 56334) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:05:16 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:05:16 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:05:16 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 11:05:16 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:16.995871"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: huIDhgjxLAFF3CrHZvsCYSCGKd4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:05:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    < PONG d9 5f 2c c9 [binary, 4 bytes]
2025-09-07 11:05:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:05:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:05:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:05:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:16.995871"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    % received keepalive pong
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:56335 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: rpPUOUUfYA4VIj9MXoRSYA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56339) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:05:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:05:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:17.013797"}' [128 bytes]
INFO:     127.0.0.1:56335 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
2025-09-07 11:05:17 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660db50>
DEBUG:    > Upgrade: websocket
2025-09-07 11:05:17 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660db50>
DEBUG:    > Connection: Upgrade
2025-09-07 11:05:17 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
DEBUG:    > Sec-WebSocket-Accept: Iqai98QFBDdc9ooCKYXJrifuppQ=
2025-09-07 11:05:17 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:05:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:56338 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:17.013797"}' [128 bytes]
2025-09-07 11:05:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 11:05:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:17.013797"}' [128 bytes]
2025-09-07 11:05:17 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660d4f0>
2025-09-07 11:05:17 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660d4f0>
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:05:17 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
INFO:     127.0.0.1:56335 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56338 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56335 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:05:17 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 11:05:17 - app.api.v1.endpoints.surveys - INFO - Created survey survey_1757268317.235285: Q4 Team Culture Assessment
2025-09-07 11:05:17 - app.api.v1.endpoints.surveys - INFO - Created survey survey_1757268317.235285: Q4 Team Culture Assessment
INFO:     127.0.0.1:56342 - "POST /api/v1/surveys/create HTTP/1.1" 200 OK
2025-09-07 11:05:17 - app.services.websocket_manager - WARNING - No active connections for user john_smith
2025-09-07 11:05:17 - app.services.websocket_manager - WARNING - No active connections for user john_smith
2025-09-07 11:05:17 - app.services.websocket_manager - WARNING - No active connections for user maria_garcia
2025-09-07 11:05:17 - app.services.websocket_manager - WARNING - No active connections for user maria_garcia
2025-09-07 11:05:17 - app.services.websocket_manager - WARNING - No active connections for user alex_chen
2025-09-07 11:05:17 - app.services.websocket_manager - WARNING - No active connections for user alex_chen
2025-09-07 11:05:17 - app.services.websocket_manager - INFO - Survey notification sent to 0/3 users
2025-09-07 11:05:17 - app.services.websocket_manager - INFO - Survey notification sent to 0/3 users
2025-09-07 11:05:17 - app.api.v1.endpoints.surveys - INFO - Published survey survey_1757268317.235285 to 3 users, 0 notifications sent
2025-09-07 11:05:17 - app.api.v1.endpoints.surveys - INFO - Published survey survey_1757268317.235285 to 3 users, 0 notifications sent
INFO:     127.0.0.1:56342 - "POST /api/v1/surveys/publish HTTP/1.1" 200 OK
2025-09-07 11:05:17 - app.api.v1.endpoints.surveys - INFO - Received survey response response_1757268317.248645 for survey survey_1757268317.235285 from user maria_garcia
2025-09-07 11:05:17 - app.api.v1.endpoints.surveys - INFO - Received survey response response_1757268317.248645 for survey survey_1757268317.235285 from user maria_garcia
INFO:     127.0.0.1:56342 - "POST /api/v1/surveys/submit-response HTTP/1.1" 200 OK
INFO:     127.0.0.1:56342 - "GET /api/v1/surveys/survey_1757268317.235285/responses HTTP/1.1" 200 OK
INFO:     127.0.0.1:56342 - "GET /api/v1/notifications/ws/status HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb ee 6d 4e [binary, 4 bytes]
DEBUG:    < PONG cb ee 6d 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_c2aaff8d6272a64b3dc5f99e6b0e2b4c'), (b'openai-processing-ms', b'5019'), (b'x-envoy-upstream-service-time', b'5022'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82225dc53766c-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_c2aaff8d6272a64b3dc5f99e6b0e2b4c'), (b'openai-processing-ms', b'5019'), (b'x-envoy-upstream-service-time', b'5022'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82225dc53766c-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56331 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:05:22 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:05:22 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c e9 8e e6 [binary, 4 bytes]
DEBUG:    < PONG 2c e9 8e e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'á†¯j' [text, 4 bytes]
DEBUG:    < PONG 'á†¯j' [text, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:27 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_186541fa4c6ee27047f0903ad2b4531e'), (b'openai-processing-ms', b'4773'), (b'x-envoy-upstream-service-time', b'4776'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b822461e91766c-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:27 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_186541fa4c6ee27047f0903ad2b4531e'), (b'openai-processing-ms', b'4773'), (b'x-envoy-upstream-service-time', b'4776'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b822461e91766c-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:05:27 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56347 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e ad 27 6d [binary, 4 bytes]
DEBUG:    < PONG 9e ad 27 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 f7 a3 74 [binary, 4 bytes]
DEBUG:    < PONG d1 f7 a3 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1bÆ¢\x01' [text, 4 bytes]
DEBUG:    < PONG '\x1bÆ¢\x01' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 d4 0c 26 [binary, 4 bytes]
DEBUG:    < PONG 65 d4 0c 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 11:05:42 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:05:42 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:05:42 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:05:42 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
2025-09-07 11:05:42 - httpcore.connection - DEBUG - close.started
2025-09-07 11:05:42 - httpcore.connection - DEBUG - close.started
2025-09-07 11:05:42 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:05:42 - httpcore.connection - DEBUG - close.complete
DEBUG:    = connection is CONNECTING
2025-09-07 11:05:42 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
2025-09-07 11:05:42 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: AiH5qmrPUoFpXFfhAQLr2w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56362) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:05:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:05:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:42.401370"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:42.401370"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: sJqqMYIenyEQlPmzQTYnM15mvUU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:05:41 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:56361 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:42.401370"}' [128 bytes]
INFO:     127.0.0.1:56361 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:05:42 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116509cd0>
2025-09-07 11:05:42 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116509cd0>
2025-09-07 11:05:42 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:05:42 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
INFO:     127.0.0.1:56361 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: sMDycBN0Iygf1leOst4UCA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:56366 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 56367) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:05:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:05:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:42.425604"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: TSX4mssu71nc6nULjPwL6zmWvLQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:05:41 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:42.425604"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:42.425604"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:42.425604"}' [128 bytes]
2025-09-07 11:05:42 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116507280>
2025-09-07 11:05:42 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116507280>
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
INFO:     127.0.0.1:56361 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
INFO:     127.0.0.1:56366 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:05:42 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:05:42 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '*n1.' [text, 4 bytes]
DEBUG:    < PONG '*n1.' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 ba aa 2d [binary, 4 bytes]
DEBUG:    < PONG 77 ba aa 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:05:46 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: inf1ofHst6WWAY8Tt74jRQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56374) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 11:05:47 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 11:05:47 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 11:05:47 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:05:47 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:05:47 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:05:47 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: uVyrnQiSC2soCKOezEKPInFHggY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:05:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:47.269943"}' [128 bytes]
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_7f4f202a4c4b8fac0af4b1e9dffc28b1'), (b'openai-processing-ms', b'9297'), (b'x-envoy-upstream-service-time', b'9302'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b822c47d21c366-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:05:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_7f4f202a4c4b8fac0af4b1e9dffc28b1'), (b'openai-processing-ms', b'9297'), (b'x-envoy-upstream-service-time', b'9302'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b822c47d21c366-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56359 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:05:51 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 11:05:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 11:05:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 11:05:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 11:05:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: V2tISQgp6tAszRXyhIphNA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56378) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:05:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:05:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:52.366228"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: DGd/xlLKXwwXVRQ9fgufs3VusZA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:05:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:52.366228"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:52.366228"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:05:52.366228"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c 96 25 3d [binary, 4 bytes]
DEBUG:    < PONG 5c 96 25 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 12 d0 ef [binary, 4 bytes]
DEBUG:    < PONG f7 12 d0 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 04 b1 c5 [binary, 4 bytes]
DEBUG:    < PONG f4 04 b1 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f eb 14 df [binary, 4 bytes]
DEBUG:    < PONG 9f eb 14 df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 98 47 5e [binary, 4 bytes]
DEBUG:    < PONG 02 98 47 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d 9c 94 dd [binary, 4 bytes]
DEBUG:    < PONG 7d 9c 94 dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56386 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56386 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:10 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:06:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_60ae5961e060de1daf75041ce0ff0b2c'), (b'openai-processing-ms', b'19598'), (b'x-envoy-upstream-service-time', b'19601'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b822ffeb4cc366-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:06:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_60ae5961e060de1daf75041ce0ff0b2c'), (b'openai-processing-ms', b'19598'), (b'x-envoy-upstream-service-time', b'19601'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b822ffeb4cc366-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:06:11 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56359 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 9e ff bc [binary, 4 bytes]
DEBUG:    < PONG 15 9e ff bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d 2e 1a c1 [binary, 4 bytes]
DEBUG:    < PONG 0d 2e 1a c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:06:14 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=2792bf8b-a214-45a1-aed1-c9ef392acc87&prompt=%5BSurvey%20Creation%20Context%3A%20Currently%20working%20on%20survey%20%22Untitled%22%20at%20step%201%20(name).%20Current%20survey%20data%3A%20name%3D%22%22%2C%20context%3D%22%22%2C%200%20questions%20defined%2C%200%20classifiers%2C%200%20metrics.%5D%20User%20request%3A%20hi HTTP/1.1" 200 OK
2025-09-07 11:06:14 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 2792bf8b-a214-45a1-aed1-c9ef392acc87
2025-09-07 11:06:14 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 2792bf8b-a214-45a1-aed1-c9ef392acc87
INFO:     127.0.0.1:56390 - "POST /api/v1/chat/stream-with-thread?thread_id=2792bf8b-a214-45a1-aed1-c9ef392acc87&prompt=%5BSurvey%20Creation%20Context%3A%20Currently%20working%20on%20survey%20%22Untitled%22%20at%20step%201%20(name).%20Current%20survey%20data%3A%20name%3D%22%22%2C%20context%3D%22%22%2C%200%20questions%20defined%2C%200%20classifiers%2C%200%20metrics.%5D%20User%20request%3A%20hi HTTP/1.1" 200 OK
2025-09-07 11:06:14 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 11:06:14 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:06:14 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:06:14 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:06:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449441'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'74ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_478af17cca642cff6d2787dce9f6443a'), (b'openai-processing-ms', b'1447'), (b'x-envoy-upstream-service-time', b'1451'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8238e7b43c366-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:06:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449441'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'74ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_478af17cca642cff6d2787dce9f6443a'), (b'openai-processing-ms', b'1447'), (b'x-envoy-upstream-service-time', b'1451'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8238e7b43c366-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:06:16 - httpcore.http11 - DEBUG - response_closed.complete
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 27 ad 69 [binary, 4 bytes]
DEBUG:    < PONG 6f 27 ad 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'X\x13\\F' [text, 4 bytes]
DEBUG:    < PONG 'X\x13\\F' [text, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:06:17 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:06:17 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:06:17 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116639bb0>
2025-09-07 11:06:17 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116639bb0>
2025-09-07 11:06:17 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fbff900> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:06:17 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fbff900> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:06:17 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116639b80>
2025-09-07 11:06:17 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116639b80>
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:06:17 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:06:17 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 11:06:19 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:06:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449808'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'25ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_58c37b4226c54d2073c4b0d8559cd912'), (b'openai-processing-ms', b'1429'), (b'x-envoy-upstream-service-time', b'1615'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=daoIBvRcfDckUYkkRfJ8qZLHkvZCy3tIol8py.aL4qI-1757268379-1.0.1.1-UPkzSAnaw34ZkPHizCI_isbL3R2pXFWhLl4GlVy2LQ.XGOLKVJb388SN8q_3XkcJH.LTVcyIAc.ASaLMcY5OJVmgHB8CTl6R0DNQz5nEy3c; path=/; expires=Sun, 07-Sep-25 18:36:19 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=kEdt6oSauB2r9n0vi889R3aF9Ga2HJAxyFdiBGpu.T4-1757268379400-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b823a00a8ddf2f-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:06:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449808'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'25ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_58c37b4226c54d2073c4b0d8559cd912'), (b'openai-processing-ms', b'1429'), (b'x-envoy-upstream-service-time', b'1615'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=daoIBvRcfDckUYkkRfJ8qZLHkvZCy3tIol8py.aL4qI-1757268379-1.0.1.1-UPkzSAnaw34ZkPHizCI_isbL3R2pXFWhLl4GlVy2LQ.XGOLKVJb388SN8q_3XkcJH.LTVcyIAc.ASaLMcY5OJVmgHB8CTl6R0DNQz5nEy3c; path=/; expires=Sun, 07-Sep-25 18:36:19 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=kEdt6oSauB2r9n0vi889R3aF9Ga2HJAxyFdiBGpu.T4-1757268379400-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b823a00a8ddf2f-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:06:19 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:19 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 01 12 4e [binary, 4 bytes]
DEBUG:    < PONG dc 01 12 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/cfe25361-51a8-4ef7-9efe-a49be96015d2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/cfe25361-51a8-4ef7-9efe-a49be96015d2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:22 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/1aadd9d6-da5a-4981-b996-49cfed3421fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/1aadd9d6-da5a-4981-b996-49cfed3421fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:22 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/fb034933-b503-412d-bfb1-80d9084fc0da HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/fb034933-b503-412d-bfb1-80d9084fc0da HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/bc48de98-ce99-4119-b207-195f5bed66df HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/bc48de98-ce99-4119-b207-195f5bed66df HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:23 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/23176af0-a645-45e9-a669-b35d1e5556a3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/23176af0-a645-45e9-a669-b35d1e5556a3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/013422ef-6058-47d3-99af-7fc4aa0b8553 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/013422ef-6058-47d3-99af-7fc4aa0b8553 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:23 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/5f23b022-0a07-427e-851a-3f2f15989d25 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/5f23b022-0a07-427e-851a-3f2f15989d25 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/bc6cca85-aee0-4e5e-a99d-90b3b8375ecd HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/bc6cca85-aee0-4e5e-a99d-90b3b8375ecd HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:24 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/ac484df8-2717-4efd-9ce6-4d73afc4d392 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/ac484df8-2717-4efd-9ce6-4d73afc4d392 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:24 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/4c77be3e-0c21-4251-8707-a26b812e5424 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/4c77be3e-0c21-4251-8707-a26b812e5424 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:24 - watchfiles.main - DEBUG - 2 changes detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/1c42e4cc-dcdf-452c-a01f-7adec3639c3f HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/1c42e4cc-dcdf-452c-a01f-7adec3639c3f HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/9793dff0-4c52-4e33-b13c-7b6bfb0333f6 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/9793dff0-4c52-4e33-b13c-7b6bfb0333f6 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:25 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 af 02 f1 [binary, 4 bytes]
DEBUG:    < PONG 91 af 02 f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 a7 a8 70 [binary, 4 bytes]
DEBUG:    < PONG a8 a7 a8 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/1ccaf7a4-d7ff-4fdf-8c68-c125c7983d8f HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/1ccaf7a4-d7ff-4fdf-8c68-c125c7983d8f HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:26 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:56390 - "OPTIONS /api/v1/chat-threads/threads/c5a43df7-c0a4-4543-a8ce-d8d70a2d8946 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "DELETE /api/v1/chat-threads/threads/c5a43df7-c0a4-4543-a8ce-d8d70a2d8946 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56390 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:06:26 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 11:06:29 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 4c ad 0d [binary, 4 bytes]
DEBUG:    < PONG 6e 4c ad 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '!gH\x16' [text, 4 bytes]
DEBUG:    < PONG '!gH\x16' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56400 - "OPTIONS /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
2025-09-07 11:06:36 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create one on employee satisfaction...
2025-09-07 11:06:36 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create one on employee satisfaction...
2025-09-07 11:06:36 - httpcore.connection - DEBUG - close.started
2025-09-07 11:06:36 - httpcore.connection - DEBUG - close.started
2025-09-07 11:06:36 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:06:36 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:06:36 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:06:36 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:06:36 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660f100>
2025-09-07 11:06:36 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660f100>
2025-09-07 11:06:36 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:06:36 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:06:36 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660fbb0>
2025-09-07 11:06:36 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660fbb0>
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:06:36 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d 41 f4 38 [binary, 4 bytes]
DEBUG:    < PONG 6d 41 f4 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 34 db a0 [binary, 4 bytes]
DEBUG:    < PONG 88 34 db a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x19w9N' [text, 4 bytes]
DEBUG:    < PONG '\x19w9N' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 bd c4 14 [binary, 4 bytes]
DEBUG:    < PONG 28 bd c4 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 ba 86 f6 [binary, 4 bytes]
DEBUG:    < PONG 49 ba 86 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:06:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449132'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'115ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_088142f37ce15615976e8a87bf71eee3'), (b'openai-processing-ms', b'12674'), (b'x-envoy-upstream-service-time', b'12703'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82415181575be-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:06:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449132'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'115ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_088142f37ce15615976e8a87bf71eee3'), (b'openai-processing-ms', b'12674'), (b'x-envoy-upstream-service-time', b'12703'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82415181575be-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:06:49 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56400 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'M\x18\x11\x07' [text, 4 bytes]
DEBUG:    < PONG 'M\x18\x11\x07' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 36 56 36 [binary, 4 bytes]
DEBUG:    < PONG b6 36 56 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Í—\x0fY' [text, 4 bytes]
DEBUG:    < PONG 'Í—\x0fY' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 27 42 7f [binary, 4 bytes]
DEBUG:    < PONG 9a 27 42 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 5b 5c 80 [binary, 4 bytes]
DEBUG:    < PONG 03 5b 5c 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 7a 7b 88 [binary, 4 bytes]
DEBUG:    < PONG ef 7a 7b 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 75 f9 6c [binary, 4 bytes]
DEBUG:    < PONG fc 75 f9 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e a4 60 44 [binary, 4 bytes]
DEBUG:    < PONG 1e a4 60 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc f2 54 fb [binary, 4 bytes]
DEBUG:    < PONG bc f2 54 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 93 78 46 [binary, 4 bytes]
DEBUG:    < PONG 88 93 78 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '+i\x17<' [text, 4 bytes]
DEBUG:    < PONG '+i\x17<' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x04=[L' [text, 4 bytes]
DEBUG:    < PONG '\x04=[L' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 46 a8 64 [binary, 4 bytes]
DEBUG:    < PONG 06 46 a8 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 95 65 b1 [binary, 4 bytes]
DEBUG:    < PONG c7 95 65 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 06 41 cf [binary, 4 bytes]
DEBUG:    < PONG d1 06 41 cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 89 5f 82 [binary, 4 bytes]
DEBUG:    < PONG d4 89 5f 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 80 a4 b4 [binary, 4 bytes]
DEBUG:    < PONG c9 80 a4 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ad 3c 13 5a [binary, 4 bytes]
DEBUG:    < PONG ad 3c 13 5a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'XÐž!' [text, 4 bytes]
DEBUG:    < PONG 'XÐž!' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 f5 6e 47 [binary, 4 bytes]
DEBUG:    < PONG 61 f5 6e 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 4f e0 f4 [binary, 4 bytes]
DEBUG:    < PONG 5e 4f e0 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 4f dc fa [binary, 4 bytes]
DEBUG:    < PONG 3a 4f dc fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 dc 23 a5 [binary, 4 bytes]
DEBUG:    < PONG 84 dc 23 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a bd 5d 19 [binary, 4 bytes]
DEBUG:    < PONG 0a bd 5d 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 4a 7d 1d [binary, 4 bytes]
DEBUG:    < PONG 8f 4a 7d 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 b0 fe 09 [binary, 4 bytes]
DEBUG:    < PONG 62 b0 fe 09 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ':\x0b\x02:' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Ê»R?' [text, 4 bytes]
DEBUG:    < PONG ':\x0b\x02:' [text, 4 bytes]
DEBUG:    < PONG 'Ê»R?' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'H\x0eÄ›' [text, 4 bytes]
DEBUG:    < PONG 'H\x0eÄ›' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 d0 ca dd [binary, 4 bytes]
DEBUG:    < PONG f1 d0 ca dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'S,C~' [text, 4 bytes]
DEBUG:    < PONG 'S,C~' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 a9 8c df [binary, 4 bytes]
DEBUG:    < PONG 97 a9 8c df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 73 9f 96 [binary, 4 bytes]
DEBUG:    < PONG 62 73 9f 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 c0 eb 3c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 25 c5 e5 [binary, 4 bytes]
DEBUG:    < PONG 68 c0 eb 3c [binary, 4 bytes]
DEBUG:    < PONG 76 25 c5 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '$bÅ”' [text, 4 bytes]
DEBUG:    < PONG '$bÅ”' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 20 d6 95 [binary, 4 bytes]
DEBUG:    < PONG f4 20 d6 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 11 4b e2 [binary, 4 bytes]
DEBUG:    < PONG 11 11 4b e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 26 11 b3 [binary, 4 bytes]
DEBUG:    < PONG b8 26 11 b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 2c b9 56 [binary, 4 bytes]
DEBUG:    < PONG ac 2c b9 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b 58 11 da [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce ee 63 d9 [binary, 4 bytes]
DEBUG:    < PONG 3b 58 11 da [binary, 4 bytes]
DEBUG:    < PONG ce ee 63 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 fe 98 09 [binary, 4 bytes]
DEBUG:    < PONG 38 fe 98 09 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c a1 cd ee [binary, 4 bytes]
DEBUG:    < PONG 9c a1 cd ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 d4 1d fd [binary, 4 bytes]
DEBUG:    < PONG 75 d4 1d fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 87 c6 a7 [binary, 4 bytes]
DEBUG:    < PONG 87 87 c6 a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c a9 c1 ea [binary, 4 bytes]
DEBUG:    < PONG 2c a9 c1 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 19 7e 59 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 31 59 52 [binary, 4 bytes]
DEBUG:    < PONG be 19 7e 59 [binary, 4 bytes]
DEBUG:    < PONG dd 31 59 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 50 33 d8 [binary, 4 bytes]
DEBUG:    < PONG df 50 33 d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 b3 fc c4 [binary, 4 bytes]
DEBUG:    < PONG d3 b3 fc c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 17 91 68 [binary, 4 bytes]
DEBUG:    < PONG 42 17 91 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 53 b1 89 [binary, 4 bytes]
DEBUG:    < PONG 4a 53 b1 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 cc 5f 11 [binary, 4 bytes]
DEBUG:    < PONG 93 cc 5f 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d 2c a2 90 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ';?5C' [text, 4 bytes]
DEBUG:    < PONG 5d 2c a2 90 [binary, 4 bytes]
DEBUG:    < PONG ';?5C' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 06 ce e0 [binary, 4 bytes]
DEBUG:    < PONG 72 06 ce e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 ff 59 00 [binary, 4 bytes]
DEBUG:    < PONG d9 ff 59 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 fb 28 cb [binary, 4 bytes]
DEBUG:    < PONG 03 fb 28 cb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 0a 91 c5 [binary, 4 bytes]
DEBUG:    < PONG df 0a 91 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 5c 81 69 [binary, 4 bytes]
DEBUG:    < PONG 58 5c 81 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 d1 32 be [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 46 25 bb [binary, 4 bytes]
DEBUG:    < PONG 10 d1 32 be [binary, 4 bytes]
DEBUG:    < PONG 8c 46 25 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 cf ae e8 [binary, 4 bytes]
DEBUG:    < PONG c0 cf ae e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 23 cb ff [binary, 4 bytes]
DEBUG:    < PONG 6e 23 cb ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 b6 5b f2 [binary, 4 bytes]
DEBUG:    < PONG 27 b6 5b f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba 05 dd fc [binary, 4 bytes]
DEBUG:    < PONG ba 05 dd fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 f2 52 e7 [binary, 4 bytes]
DEBUG:    < PONG 00 f2 52 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 d4 41 90 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 34 4b 47 fb [binary, 4 bytes]
DEBUG:    < PONG 63 d4 41 90 [binary, 4 bytes]
DEBUG:    < PONG 34 4b 47 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 a1 94 b2 [binary, 4 bytes]
DEBUG:    < PONG d2 a1 94 b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 0d c3 78 [binary, 4 bytes]
DEBUG:    < PONG 9a 0d c3 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 11:10:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:10:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:10:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:10:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
2025-09-07 11:10:15 - httpcore.connection - DEBUG - close.started
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
2025-09-07 11:10:15 - httpcore.connection - DEBUG - close.started
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
2025-09-07 11:10:15 - httpcore.connection - DEBUG - close.complete
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 3KD+mY6LIHml4XUhmDMpow==
2025-09-07 11:10:15 - httpcore.connection - DEBUG - close.complete
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
2025-09-07 11:10:15 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:10:15 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
INFO:     ('127.0.0.1', 56497) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:10:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:10:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:15.190058"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:15.190058"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Lk1gaaSsQeAX9/4jNjFYS9ofr5o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:10:14 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:56496 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:15.190058"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:15.190058"}' [128 bytes]
2025-09-07 11:10:15 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1164fa790>
2025-09-07 11:10:15 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1164fa790>
2025-09-07 11:10:15 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:10:15 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:10:15 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116605040>
2025-09-07 11:10:15 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116605040>
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:10:15 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'j:o\\' [text, 4 bytes]
DEBUG:    < PONG 'j:o\\' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 65 b8 8c [binary, 4 bytes]
DEBUG:    < PONG c3 65 b8 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d cb 2a e7 [binary, 4 bytes]
DEBUG:    < PONG 6d cb 2a e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 7KJ+2WfK4Qvck7oQfVzwLQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56504) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:10:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:10:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:22.897676"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:22.897676"}' [128 bytes]
2025-09-07 11:10:22 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 11:10:22 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:22.897676"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: A4cU/SMAKe0RqP2ePS76ZZ4gBTs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:10:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:56502 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:22.897676"}' [128 bytes]
2025-09-07 11:10:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:10:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:10:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:10:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:56502 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56502 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:10:23 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 1f 92 9f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba e8 15 7e [binary, 4 bytes]
DEBUG:    < PONG 36 1f 92 9f [binary, 4 bytes]
DEBUG:    < PONG ba e8 15 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
2025-09-07 11:10:27 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:10:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_f95e232e279afeefba0a3e9a1b86883d'), (b'openai-processing-ms', b'14266'), (b'x-envoy-upstream-service-time', b'14270'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8296deca2d43e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:10:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_f95e232e279afeefba0a3e9a1b86883d'), (b'openai-processing-ms', b'14266'), (b'x-envoy-upstream-service-time', b'14270'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8296deca2d43e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56494 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:10:29 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:10:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_9698046d401469df6e1a103c3b975858'), (b'openai-processing-ms', b'3534'), (b'x-envoy-upstream-service-time', b'3537'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b829c7ebcfd43e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:10:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_9698046d401469df6e1a103c3b975858'), (b'openai-processing-ms', b'3534'), (b'x-envoy-upstream-service-time', b'3537'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b829c7ebcfd43e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:10:33 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56494 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 6d 0d 22 [binary, 4 bytes]
DEBUG:    < PONG e9 6d 0d 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 cd e8 53 [binary, 4 bytes]
DEBUG:    < PONG 38 cd e8 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 8d 53 d3 [binary, 4 bytes]
DEBUG:    < PONG 86 8d 53 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 cc 9f d5 [binary, 4 bytes]
DEBUG:    < PONG 98 cc 9f d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 7b e9 a4 [binary, 4 bytes]
DEBUG:    < PONG e1 7b e9 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '<\x1eNH' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d 83 01 5c [binary, 4 bytes]
DEBUG:    < PONG '<\x1eNH' [text, 4 bytes]
DEBUG:    < PONG 3d 83 01 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
2025-09-07 11:10:52 - httpcore.connection - DEBUG - close.started
2025-09-07 11:10:52 - httpcore.connection - DEBUG - close.started
DEBUG:    < connection: Upgrade
2025-09-07 11:10:52 - httpcore.connection - DEBUG - close.complete
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
2025-09-07 11:10:52 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:10:52 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:10:52 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: q/XVblvqPPlPP9uo4g2Qgg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56519) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:10:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:10:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:52.525565"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Djs9swhv191cw4SgVViOQ1f8xx8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:10:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 11:10:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:10:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:10:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:10:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:56517 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:52.525565"}' [128 bytes]
2025-09-07 11:10:52 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660f220>
2025-09-07 11:10:52 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660f220>
2025-09-07 11:10:52 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:10:52 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
2025-09-07 11:10:52 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116639220>
2025-09-07 11:10:52 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116639220>
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:10:52 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: RKJBJALGp6jqcH19u9FmKw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56522) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:10:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:10:52 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:52.967606"}' [128 bytes]
2025-09-07 11:10:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 11:10:52 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:52.967606"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:52.967606"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 19pswPvuzBQC3IcF3fkegoze/vQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:10:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:10:52.967606"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 e5 2c 4d [binary, 4 bytes]
DEBUG:    < PONG 67 e5 2c 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 e9 2f ed [binary, 4 bytes]
DEBUG:    < PONG a5 e9 2f ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '0Ó»=' [text, 4 bytes]
DEBUG:    < PONG '0Ó»=' [text, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:10:58 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_71a75a54c672b56678811cac4f875439'), (b'openai-processing-ms', b'5344'), (b'x-envoy-upstream-service-time', b'5349'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82a56a8dd27fe-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:10:58 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_71a75a54c672b56678811cac4f875439'), (b'openai-processing-ms', b'5344'), (b'x-envoy-upstream-service-time', b'5349'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82a56a8dd27fe-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:10:57 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56516 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 41 67 be [binary, 4 bytes]
DEBUG:    < PONG 2e 41 67 be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 cf f8 8f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a 38 85 d4 [binary, 4 bytes]
DEBUG:    < PONG 59 cf f8 8f [binary, 4 bytes]
DEBUG:    < PONG 7a 38 85 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 72 74 ae [binary, 4 bytes]
DEBUG:    < PONG 57 72 74 ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb 7b 9b ff [binary, 4 bytes]
DEBUG:    < PONG bb 7b 9b ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 b1 6b eb [binary, 4 bytes]
DEBUG:    < PONG a0 b1 6b eb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '/1Ñ¿' [text, 4 bytes]
DEBUG:    < PONG '/1Ñ¿' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 cd cd 08 [binary, 4 bytes]
DEBUG:    < PONG 98 cd cd 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 1a 50 d6 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 47 cc 64 [binary, 4 bytes]
DEBUG:    < PONG 2f 1a 50 d6 [binary, 4 bytes]
DEBUG:    < PONG 83 47 cc 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d 2b e6 65 [binary, 4 bytes]
DEBUG:    < PONG 6d 2b e6 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 64 80 a0 [binary, 4 bytes]
DEBUG:    < PONG 2f 64 80 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 54 23 90 [binary, 4 bytes]
DEBUG:    < PONG 17 54 23 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 4e b8 49 [binary, 4 bytes]
DEBUG:    < PONG d7 4e b8 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 65 49 f6 [binary, 4 bytes]
DEBUG:    < PONG c8 65 49 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: L6+qg6z8bnZrjMzEvh6cQQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56562) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:11:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:11:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.459442"}' [128 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lbMWlhHUmdPsnhIYQO3qzCbitCg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:11:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.459442"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.459442"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.459442"}' [128 bytes]
2025-09-07 11:11:44 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 11:11:44 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 11:11:44 - httpcore.connection - DEBUG - close.started
DEBUG:    = connection is CONNECTING
2025-09-07 11:11:44 - httpcore.connection - DEBUG - close.started
2025-09-07 11:11:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:11:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:11:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:11:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
2025-09-07 11:11:44 - httpcore.connection - DEBUG - close.complete
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
2025-09-07 11:11:44 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:11:44 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:11:44 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: xQqlvgO/MOOPna58t1WHxA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:56565 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 56569) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:11:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:11:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.541565"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.541565"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.541565"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.541565"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: xtKVqFaGXATtrcMzQB//lVN6j9o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:11:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:11:44.541565"}' [128 bytes]
2025-09-07 11:11:44 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116616040>
2025-09-07 11:11:44 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116616040>
2025-09-07 11:11:44 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:11:44 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
INFO:     127.0.0.1:56565 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56572 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 11:11:44 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116616580>
2025-09-07 11:11:44 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116616580>
INFO:     127.0.0.1:56565 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
INFO:     127.0.0.1:56572 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:11:44 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
INFO:     127.0.0.1:56565 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:11:44 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac a3 a2 e7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 0f fc a3 [binary, 4 bytes]
DEBUG:    < PONG ac a3 a2 e7 [binary, 4 bytes]
DEBUG:    < PONG 25 0f fc a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
2025-09-07 11:11:49 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:11:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_ca56e6d884aca025b2d1de37e5102c02'), (b'openai-processing-ms', b'6579'), (b'x-envoy-upstream-service-time', b'6582'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82b9c8da0e574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:11:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_ca56e6d884aca025b2d1de37e5102c02'), (b'openai-processing-ms', b'6579'), (b'x-envoy-upstream-service-time', b'6582'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82b9c8da0e574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56563 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:11:51 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 45 41 d2 [binary, 4 bytes]
DEBUG:    < PONG 49 45 41 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 8f 96 a4 [binary, 4 bytes]
DEBUG:    < PONG 54 8f 96 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 87 45 7a [binary, 4 bytes]
DEBUG:    < PONG 02 87 45 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: tmapASE0zZlJ4FpRnOkM5g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56581) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:12:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:12:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.343092"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.343092"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.343092"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.343092"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: TPrQi2VBA01RhPUELqaDA4yUgEM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:12:00 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 11:12:00 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:12:00 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:12:00 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:12:00 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.343092"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:56583 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
INFO:     connection closed
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: axuv8GAzZzoiZIE+saj+EA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56585) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:12:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:12:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.381146"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.381146"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.381146"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.381146"}' [128 bytes]
2025-09-07 11:12:00 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 11:12:00 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 5/OTguxwGyPLq8qeienuizkkUQQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:12:00 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:00.381146"}' [128 bytes]
INFO:     127.0.0.1:56583 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56587 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56583 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56587 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56583 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:12:00 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 09I4pVYE55qe1SA9pmJbog==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56590) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:12:01 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:12:01 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:01.902201"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:01.902201"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:01.902201"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:01.902201"}' [128 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 0TTV7QIMDFAPqUbW+G8ezVlJvDs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:12:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:01.902201"}' [128 bytes]
2025-09-07 11:12:01 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 11:12:01 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
INFO:     127.0.0.1:56583 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:12:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:12:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:12:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:12:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_38ee374b16590b0db1e009490af0a648'), (b'openai-processing-ms', b'10914'), (b'x-envoy-upstream-service-time', b'10918'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82bc67970e574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_38ee374b16590b0db1e009490af0a648'), (b'openai-processing-ms', b'10914'), (b'x-envoy-upstream-service-time', b'10918'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82bc67970e574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56563 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:12:02 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 fb a3 37 [binary, 4 bytes]
DEBUG:    < PONG 71 fb a3 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:12:02 - app.api.v1.endpoints.surveys - INFO - Created survey survey_1757268722.775788: Q4 Team Culture Assessment
2025-09-07 11:12:02 - app.api.v1.endpoints.surveys - INFO - Created survey survey_1757268722.775788: Q4 Team Culture Assessment
INFO:     127.0.0.1:56593 - "POST /api/v1/surveys/create HTTP/1.1" 200 OK
2025-09-07 11:12:02 - app.services.websocket_manager - WARNING - No active connections for user john_smith
2025-09-07 11:12:02 - app.services.websocket_manager - WARNING - No active connections for user john_smith
2025-09-07 11:12:02 - app.services.websocket_manager - WARNING - No active connections for user maria_garcia
2025-09-07 11:12:02 - app.services.websocket_manager - WARNING - No active connections for user maria_garcia
2025-09-07 11:12:02 - app.services.websocket_manager - WARNING - No active connections for user alex_chen
2025-09-07 11:12:02 - app.services.websocket_manager - WARNING - No active connections for user alex_chen
2025-09-07 11:12:02 - app.services.websocket_manager - INFO - Survey notification sent to 0/3 users
2025-09-07 11:12:02 - app.services.websocket_manager - INFO - Survey notification sent to 0/3 users
2025-09-07 11:12:02 - app.api.v1.endpoints.surveys - INFO - Published survey survey_1757268722.775788 to 3 users, 0 notifications sent
2025-09-07 11:12:02 - app.api.v1.endpoints.surveys - INFO - Published survey survey_1757268722.775788 to 3 users, 0 notifications sent
INFO:     127.0.0.1:56593 - "POST /api/v1/surveys/publish HTTP/1.1" 200 OK
2025-09-07 11:12:02 - app.api.v1.endpoints.surveys - INFO - Received survey response response_1757268722.782258 for survey survey_1757268722.775788 from user maria_garcia
2025-09-07 11:12:02 - app.api.v1.endpoints.surveys - INFO - Received survey response response_1757268722.782258 for survey survey_1757268722.775788 from user maria_garcia
INFO:     127.0.0.1:56593 - "POST /api/v1/surveys/submit-response HTTP/1.1" 200 OK
INFO:     127.0.0.1:56593 - "GET /api/v1/surveys/survey_1757268722.775788/responses HTTP/1.1" 200 OK
INFO:     127.0.0.1:56593 - "GET /api/v1/notifications/ws/status HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 3f ec dc [binary, 4 bytes]
DEBUG:    < PONG cf 3f ec dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:12:04 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING de a3 23 a3 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 26 ce 2a [binary, 4 bytes]
DEBUG:    < PONG de a3 23 a3 [binary, 4 bytes]
DEBUG:    < PONG a3 26 ce 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_1f64c085fe7cea2978748da9db6d8a8a'), (b'openai-processing-ms', b'6881'), (b'x-envoy-upstream-service-time', b'6883'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82c0b9bede574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_1f64c085fe7cea2978748da9db6d8a8a'), (b'openai-processing-ms', b'6881'), (b'x-envoy-upstream-service-time', b'6883'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82c0b9bede574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56583 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:12:09 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 73 4b 5e [binary, 4 bytes]
DEBUG:    < PONG e9 73 4b 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x08<~0' [text, 4 bytes]
DEBUG:    < PONG '\x08<~0' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 26 ce 01 [binary, 4 bytes]
DEBUG:    < PONG f0 26 ce 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_d909494a68fef0043ca3493f4340b2c8'), (b'openai-processing-ms', b'10072'), (b'x-envoy-upstream-service-time', b'10074'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82c377d9fe574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_d909494a68fef0043ca3493f4340b2c8'), (b'openai-processing-ms', b'10072'), (b'x-envoy-upstream-service-time', b'10074'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82c377d9fe574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56583 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:12:19 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 a2 95 ba [binary, 4 bytes]
DEBUG:    < PONG 98 a2 95 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_8df769352b73c397ad24688ab806319f'), (b'openai-processing-ms', b'2182'), (b'x-envoy-upstream-service-time', b'2184'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82c784e25e574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_8df769352b73c397ad24688ab806319f'), (b'openai-processing-ms', b'2182'), (b'x-envoy-upstream-service-time', b'2184'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82c784e25e574-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:12:22 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56583 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 e2 80 24 [binary, 4 bytes]
DEBUG:    < PONG 85 e2 80 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 15 74 cc [binary, 4 bytes]
DEBUG:    < PONG 57 15 74 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 51 50 a8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'f^}0' [text, 4 bytes]
DEBUG:    < PONG c5 51 50 a8 [binary, 4 bytes]
DEBUG:    < PONG 'f^}0' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 39 d3 f3 [binary, 4 bytes]
DEBUG:    < PONG 50 39 d3 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 02 c1 28 [binary, 4 bytes]
DEBUG:    < PONG 88 02 c1 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 32 92 e4 [binary, 4 bytes]
DEBUG:    < PONG 99 32 92 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 e6 fc c2 [binary, 4 bytes]
DEBUG:    < PONG 06 e6 fc c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 48 44 53 [binary, 4 bytes]
DEBUG:    < PONG e4 48 44 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 c9 c9 d6 [binary, 4 bytes]
DEBUG:    < PONG f2 c9 c9 d6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 11:12:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:12:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:12:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:12:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: a6e/BzOxkuyusTSiaHCpAQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56662) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:12:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:12:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:44.991939"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:44.991939"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:44.991939"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:44.991939"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: bz1Xa0m80dZIktJts0hqQRUfA0E=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:12:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
2025-09-07 11:12:45 - httpcore.connection - DEBUG - close.started
2025-09-07 11:12:45 - httpcore.connection - DEBUG - close.started
DEBUG:    = connection is OPEN
2025-09-07 11:12:45 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:12:45 - httpcore.connection - DEBUG - close.complete
2025-09-07 11:12:45 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 11:12:45 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:12:44.991939"}' [128 bytes]
INFO:     127.0.0.1:56664 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 11:12:45 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1166396a0>
2025-09-07 11:12:45 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1166396a0>
2025-09-07 11:12:45 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:12:45 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10faf9890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 11:12:45 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11650a160>
2025-09-07 11:12:45 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11650a160>
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 11:12:45 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING be aa de 96 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '|=\tB' [text, 4 bytes]
DEBUG:    < PONG be aa de 96 [binary, 4 bytes]
DEBUG:    < PONG '|=\tB' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_cdd509e59a33551419b9c8366408e5e0'), (b'openai-processing-ms', b'6062'), (b'x-envoy-upstream-service-time', b'6065'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82d15ed11a3b9-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 18:12:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_cdd509e59a33551419b9c8366408e5e0'), (b'openai-processing-ms', b'6062'), (b'x-envoy-upstream-service-time', b'6065'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b82d15ed11a3b9-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 11:12:51 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56663 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e fe 53 ff [binary, 4 bytes]
DEBUG:    < PONG 8e fe 53 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 dc 30 4e [binary, 4 bytes]
DEBUG:    < PONG 63 dc 30 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'X\x00L7' [text, 4 bytes]
DEBUG:    < PONG 'X\x00L7' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 38 c0 62 [binary, 4 bytes]
DEBUG:    < PONG c9 38 c0 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 21 24 ef [binary, 4 bytes]
DEBUG:    < PONG b1 21 24 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 57 86 0c [binary, 4 bytes]
DEBUG:    < PONG 45 57 86 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 2d a3 86 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 5b ce 89 [binary, 4 bytes]
DEBUG:    < PONG 25 2d a3 86 [binary, 4 bytes]
DEBUG:    < PONG 83 5b ce 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 38 72 f0 [binary, 4 bytes]
DEBUG:    < PONG 26 38 72 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 be 74 a5 [binary, 4 bytes]
DEBUG:    < PONG 92 be 74 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 15 d6 d5 [binary, 4 bytes]
DEBUG:    < PONG 23 15 d6 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd 92 78 92 [binary, 4 bytes]
DEBUG:    < PONG fd 92 78 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 b0 fa ff [binary, 4 bytes]
DEBUG:    < PONG 79 b0 fa ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 21 e0 f7 [binary, 4 bytes]
DEBUG:    < PONG ec 21 e0 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 1e 38 b4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 36 f1 fa [binary, 4 bytes]
DEBUG:    < PONG d5 1e 38 b4 [binary, 4 bytes]
DEBUG:    < PONG 26 36 f1 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 bb e5 00 [binary, 4 bytes]
DEBUG:    < PONG a9 bb e5 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 46 c4 31 [binary, 4 bytes]
DEBUG:    < PONG a5 46 c4 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d dc 97 a4 [binary, 4 bytes]
DEBUG:    < PONG 3d dc 97 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 76 21 ec [binary, 4 bytes]
DEBUG:    < PONG a4 76 21 ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 85 47 20 [binary, 4 bytes]
DEBUG:    < PONG 92 85 47 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 4b ab 28 [binary, 4 bytes]
DEBUG:    < PONG af 4b ab 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 29 33 88 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e 41 f7 dc [binary, 4 bytes]
DEBUG:    < PONG 27 29 33 88 [binary, 4 bytes]
DEBUG:    < PONG 9e 41 f7 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 84 19 50 [binary, 4 bytes]
DEBUG:    < PONG f0 84 19 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 40 2f c1 [binary, 4 bytes]
DEBUG:    < PONG 69 40 2f c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 1f 3e 70 [binary, 4 bytes]
DEBUG:    < PONG 98 1f 3e 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af ca 9b 17 [binary, 4 bytes]
DEBUG:    < PONG af ca 9b 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d be 80 77 [binary, 4 bytes]
DEBUG:    < PONG 2d be 80 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 2b d1 47 [binary, 4 bytes]
DEBUG:    < PONG 86 2b d1 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 9f 7a 56 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 38 24 96 [binary, 4 bytes]
DEBUG:    < PONG 72 9f 7a 56 [binary, 4 bytes]
DEBUG:    < PONG e3 38 24 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 70 bc 3d [binary, 4 bytes]
DEBUG:    < PONG 60 70 bc 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 be 4e 7d [binary, 4 bytes]
DEBUG:    < PONG 46 be 4e 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 95 9a c2 [binary, 4 bytes]
DEBUG:    < PONG 68 95 9a c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 b0 9b a7 [binary, 4 bytes]
DEBUG:    < PONG 82 b0 9b a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 37 2c 91 [binary, 4 bytes]
DEBUG:    < PONG b5 37 2c 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'N\x1bh2' [text, 4 bytes]
DEBUG:    < PONG 'N\x1bh2' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 87 a4 c8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x07C\x06<' [text, 4 bytes]
DEBUG:    < PONG 6a 87 a4 c8 [binary, 4 bytes]
DEBUG:    < PONG '\x07C\x06<' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 15 d6 15 [binary, 4 bytes]
DEBUG:    < PONG bc 15 d6 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'i\tgk' [text, 4 bytes]
DEBUG:    < PONG 'i\tgk' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 9b 7a 20 [binary, 4 bytes]
DEBUG:    < PONG fa 9b 7a 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 d1 06 a9 [binary, 4 bytes]
DEBUG:    < PONG c2 d1 06 a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 bd d5 73 [binary, 4 bytes]
DEBUG:    < PONG f1 bd d5 73 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 c1 b8 85 [binary, 4 bytes]
DEBUG:    < PONG 36 c1 b8 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 95 49 7c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 6b f4 dc [binary, 4 bytes]
DEBUG:    < PONG 5e 95 49 7c [binary, 4 bytes]
DEBUG:    < PONG c2 6b f4 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 0a ba e1 [binary, 4 bytes]
DEBUG:    < PONG 90 0a ba e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 16 32 b8 [binary, 4 bytes]
DEBUG:    < PONG 62 16 32 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0f f2 01 71 [binary, 4 bytes]
DEBUG:    < PONG 0f f2 01 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '=V+#' [text, 4 bytes]
DEBUG:    < PONG '=V+#' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 ee 1a 44 [binary, 4 bytes]
DEBUG:    < PONG 71 ee 1a 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 46 77 a2 [binary, 4 bytes]
DEBUG:    < PONG 29 46 77 a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 82 74 b1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 7a e9 43 [binary, 4 bytes]
DEBUG:    < PONG 4e 82 74 b1 [binary, 4 bytes]
DEBUG:    < PONG d0 7a e9 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be fe fc 43 [binary, 4 bytes]
DEBUG:    < PONG be fe fc 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 c3 46 ba [binary, 4 bytes]
DEBUG:    < PONG c3 c3 46 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 39 f0 bf [binary, 4 bytes]
DEBUG:    < PONG 78 39 f0 bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa d6 7c 30 [binary, 4 bytes]
DEBUG:    < PONG fa d6 7c 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Èºl[' [text, 4 bytes]
DEBUG:    < PONG 'Èºl[' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '?Ï­\x19' [text, 4 bytes]
DEBUG:    < PONG '?Ï­\x19' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c 49 e2 56 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 59 53 e1 [binary, 4 bytes]
DEBUG:    < PONG 2c 49 e2 56 [binary, 4 bytes]
DEBUG:    < PONG c1 59 53 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 44 3a cd [binary, 4 bytes]
DEBUG:    < PONG 72 44 3a cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4b ca be d5 [binary, 4 bytes]
DEBUG:    < PONG 4b ca be d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 8e 13 90 [binary, 4 bytes]
DEBUG:    < PONG e7 8e 13 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 84 2a 64 [binary, 4 bytes]
DEBUG:    < PONG 4e 84 2a 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 10 6f 9d [binary, 4 bytes]
DEBUG:    < PONG 60 10 6f 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 8e 70 bb [binary, 4 bytes]
DEBUG:    < PONG c1 8e 70 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 8a ef dc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 67 0c 3e [binary, 4 bytes]
DEBUG:    < PONG 47 8a ef dc [binary, 4 bytes]
DEBUG:    < PONG ff 67 0c 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 de a2 6a [binary, 4 bytes]
DEBUG:    < PONG e0 de a2 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 0c 1e ca [binary, 4 bytes]
DEBUG:    < PONG 09 0c 1e ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 71 41 22 [binary, 4 bytes]
DEBUG:    < PONG e3 71 41 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 7f 35 aa [binary, 4 bytes]
DEBUG:    < PONG f1 7f 35 aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING da fb 77 e5 [binary, 4 bytes]
DEBUG:    < PONG da fb 77 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 e3 58 0d [binary, 4 bytes]
DEBUG:    < PONG f9 e3 58 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 b5 e3 12 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 f7 7a 56 [binary, 4 bytes]
DEBUG:    < PONG 25 b5 e3 12 [binary, 4 bytes]
DEBUG:    < PONG f9 f7 7a 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '!\x02\x11k' [text, 4 bytes]
DEBUG:    < PONG '!\x02\x11k' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 37 28 9c [binary, 4 bytes]
DEBUG:    < PONG 71 37 28 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 f3 c6 c8 [binary, 4 bytes]
DEBUG:    < PONG e5 f3 c6 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\n|R_' [text, 4 bytes]
DEBUG:    < PONG '\n|R_' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 b4 25 a1 [binary, 4 bytes]
DEBUG:    < PONG 93 b4 25 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 79 a9 42 [binary, 4 bytes]
DEBUG:    < PONG 84 79 a9 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 a3 66 77 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 f5 d6 c9 [binary, 4 bytes]
DEBUG:    < PONG 69 a3 66 77 [binary, 4 bytes]
DEBUG:    < PONG 36 f5 d6 c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:56751 - "OPTIONS /api/v1/surveys/create HTTP/1.1" 200 OK
2025-09-07 11:16:26 - app.api.v1.endpoints.surveys - INFO - Created survey survey_1757268986.760907: Culture Create One On Employee Satisfaction
2025-09-07 11:16:26 - app.api.v1.endpoints.surveys - INFO - Created survey survey_1757268986.760907: Culture Create One On Employee Satisfaction
INFO:     127.0.0.1:56751 - "POST /api/v1/surveys/create HTTP/1.1" 200 OK
INFO:     127.0.0.1:56751 - "OPTIONS /api/v1/surveys/publish HTTP/1.1" 200 OK
2025-09-07 11:16:26 - app.services.websocket_manager - WARNING - No active connections for user sarah_johnson
2025-09-07 11:16:26 - app.services.websocket_manager - WARNING - No active connections for user sarah_johnson
2025-09-07 11:16:26 - app.services.websocket_manager - WARNING - No active connections for user david_williams
2025-09-07 11:16:26 - app.services.websocket_manager - WARNING - No active connections for user david_williams
2025-09-07 11:16:26 - app.services.websocket_manager - WARNING - No active connections for user emily_rodriguez
2025-09-07 11:16:26 - app.services.websocket_manager - WARNING - No active connections for user emily_rodriguez
DEBUG:    > TEXT '{"type": "survey_notification", "survey": {"id"...Employee Satisfaction"}' [751 bytes]
2025-09-07 11:16:26 - app.services.websocket_manager - INFO - Survey notification sent to 1/4 users
2025-09-07 11:16:26 - app.services.websocket_manager - INFO - Survey notification sent to 1/4 users
2025-09-07 11:16:26 - app.api.v1.endpoints.surveys - INFO - Published survey survey_1757268986.760907 to 4 users, 1 notifications sent
2025-09-07 11:16:26 - app.api.v1.endpoints.surveys - INFO - Published survey survey_1757268986.760907 to 4 users, 1 notifications sent
INFO:     127.0.0.1:56751 - "POST /api/v1/surveys/publish HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: jRBa+PbeXEbpkuq31L/4vg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56758) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 11:16:34 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 11:16:34 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: LC5LOfgZtWE/DFb6YJimsUaWCsA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:16:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:16:34.138259"}' [128 bytes]
2025-09-07 11:16:34 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:16:34 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:16:34 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:16:34 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b 9b 5a bc [binary, 4 bytes]
DEBUG:    < PONG 8b 9b 5a bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c ca d7 9e [binary, 4 bytes]
DEBUG:    < PONG 1c ca d7 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d de 65 c5 [binary, 4 bytes]
DEBUG:    < PONG 0d de 65 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 7b 0d 8b [binary, 4 bytes]
DEBUG:    < PONG 40 7b 0d 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 71 85 8f [binary, 4 bytes]
DEBUG:    < PONG 17 71 85 8f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 c1 d7 4a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f be ac fa [binary, 4 bytes]
DEBUG:    < PONG 77 c1 d7 4a [binary, 4 bytes]
DEBUG:    < PONG 2f be ac fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 47 ad be [binary, 4 bytes]
DEBUG:    < PONG c5 47 ad be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 7b 2c 84 [binary, 4 bytes]
DEBUG:    < PONG e6 7b 2c 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c4 2e 6c c2 [binary, 4 bytes]
DEBUG:    < PONG c4 2e 6c c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d d6 3c c2 [binary, 4 bytes]
DEBUG:    < PONG 7d d6 3c c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a 8f 36 c8 [binary, 4 bytes]
DEBUG:    < PONG 7a 8f 36 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 7b ea b5 [binary, 4 bytes]
DEBUG:    < PONG ce 7b ea b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 2d ba c2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 8f d9 92 [binary, 4 bytes]
DEBUG:    < PONG f4 2d ba c2 [binary, 4 bytes]
DEBUG:    < PONG 67 8f d9 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 11:17:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 11:17:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 11:17:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 11:17:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: dsW2xqr33zEPuUHJsPs1Ww==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56772) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 11:17:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 11:17:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: JFK8rEtpa1/+/rOBrcmklliCMMU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:17:05 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:17:05.749536"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:17:05.749536"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:17:05.749536"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:17:05.749536"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:17:05.749536"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: C1fTu1Xl5Ud+YgBy9tEGeQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56776) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 11:17:11 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 11:17:11 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: PTlMrFdxASHNFOF6QdRImOEmNjI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 18:17:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 11:17:11 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:17:11 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 11:17:11 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 11:17:11 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T11:17:11.722436"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 69 1d ea [binary, 4 bytes]
DEBUG:    < PONG c5 69 1d ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 8c 5d f6 [binary, 4 bytes]
DEBUG:    < PONG 9d 8c 5d f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 54 a6 06 [binary, 4 bytes]
DEBUG:    < PONG a3 54 a6 06 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 f5 0c ea [binary, 4 bytes]
DEBUG:    < PONG 29 f5 0c ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 23 5e 15 [binary, 4 bytes]
DEBUG:    < PONG a5 23 5e 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'F\x0cC\x1b' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 b5 ce 5b [binary, 4 bytes]
DEBUG:    < PONG 'F\x0cC\x1b' [text, 4 bytes]
DEBUG:    < PONG 76 b5 ce 5b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 d1 e4 2a [binary, 4 bytes]
DEBUG:    < PONG 60 d1 e4 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 c5 f9 25 [binary, 4 bytes]
DEBUG:    < PONG e6 c5 f9 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'W \x0cM' [text, 4 bytes]
DEBUG:    < PONG 'W \x0cM' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'X0n|' [text, 4 bytes]
DEBUG:    < PONG 'X0n|' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '&Y\x13U' [text, 4 bytes]
DEBUG:    < PONG '&Y\x13U' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 e4 cf 62 [binary, 4 bytes]
DEBUG:    < PONG e3 e4 cf 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd f1 6d b0 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b c6 c9 04 [binary, 4 bytes]
DEBUG:    < PONG dd f1 6d b0 [binary, 4 bytes]
DEBUG:    < PONG 0b c6 c9 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 68 8d e6 [binary, 4 bytes]
DEBUG:    < PONG ab 68 8d e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 26 0a b1 [binary, 4 bytes]
DEBUG:    < PONG 40 26 0a b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 0c 2b da [binary, 4 bytes]
DEBUG:    < PONG 8a 0c 2b da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 26 b7 2d [binary, 4 bytes]
DEBUG:    < PONG 9d 26 b7 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 40 a4 53 [binary, 4 bytes]
DEBUG:    < PONG da 40 a4 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'wqe\x01' [text, 4 bytes]
DEBUG:    < PONG 'wqe\x01' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 44 97 99 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a dd eb 85 [binary, 4 bytes]
DEBUG:    < PONG 55 44 97 99 [binary, 4 bytes]
DEBUG:    < PONG 5a dd eb 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 8a fd b5 [binary, 4 bytes]
DEBUG:    < PONG 15 8a fd b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 54 c9 c7 [binary, 4 bytes]
DEBUG:    < PONG d3 54 c9 c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x14lÉ¥' [text, 4 bytes]
DEBUG:    < PONG '\x14lÉ¥' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d d6 f3 5b [binary, 4 bytes]
DEBUG:    < PONG 5d d6 f3 5b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ad 24 51 57 [binary, 4 bytes]
DEBUG:    < PONG ad 24 51 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 37 d7 05 [binary, 4 bytes]
DEBUG:    < PONG 52 37 d7 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e b8 17 4e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 fd 08 b5 [binary, 4 bytes]
DEBUG:    < PONG 4e b8 17 4e [binary, 4 bytes]
DEBUG:    < PONG b8 fd 08 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e b1 c3 43 [binary, 4 bytes]
DEBUG:    < PONG 7e b1 c3 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac a3 5c db [binary, 4 bytes]
DEBUG:    < PONG ac a3 5c db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 d1 13 fe [binary, 4 bytes]
DEBUG:    < PONG 85 d1 13 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 02 31 8d [binary, 4 bytes]
DEBUG:    < PONG d9 02 31 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ad e8 c4 f8 [binary, 4 bytes]
DEBUG:    < PONG ad e8 c4 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 46 00 9f [binary, 4 bytes]
DEBUG:    < PONG 5b 46 00 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 40 7b ec [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 eb b6 e8 [binary, 4 bytes]
DEBUG:    < PONG ed 40 7b ec [binary, 4 bytes]
DEBUG:    < PONG a3 eb b6 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 98 6d 27 [binary, 4 bytes]
DEBUG:    < PONG be 98 6d 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 48 cf 55 [binary, 4 bytes]
DEBUG:    < PONG fe 48 cf 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 5c c1 41 [binary, 4 bytes]
DEBUG:    < PONG 44 5c c1 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 74 c4 49 b0 [binary, 4 bytes]
DEBUG:    < PONG 74 c4 49 b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '&\x00VH' [text, 4 bytes]
DEBUG:    < PONG '&\x00VH' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'r\x16\x101' [text, 4 bytes]
DEBUG:    < PONG 'r\x16\x101' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Ð \n\x11' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 13 59 11 [binary, 4 bytes]
DEBUG:    < PONG 'Ð \n\x11' [text, 4 bytes]
DEBUG:    < PONG d5 13 59 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 96 3f b3 [binary, 4 bytes]
DEBUG:    < PONG b3 96 3f b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
