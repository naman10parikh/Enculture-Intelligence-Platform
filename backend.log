INFO:     Will watch for changes in these directories: ['/Users/naman/Enculture-Intelligence-Platform/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [72489] using WatchFiles
INFO:     Started server process [72504]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:51344 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:51346 - "GET /health HTTP/1.1" 200 OK
2025-09-07 14:40:43 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:40:43 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:40:43 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113ba4400>
2025-09-07 14:40:43 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113ba4400>
2025-09-07 14:40:43 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d662890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:40:43 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d662890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:40:43 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113ba43d0>
2025-09-07 14:40:43 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113ba43d0>
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:40:43 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: HeSiC4ruxSdVwHRW3N4CgA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51374) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:40:48 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:40:48 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 3zuAYb7HR4RWqS4CVbNANNfY9P8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:40:48 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:40:48.746256"}' [128 bytes]
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:40:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_2f52fd6b536e1abe4977949900458e0d'), (b'openai-processing-ms', b'6738'), (b'x-envoy-upstream-service-time', b'6741'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=q6bH_uwb8xsLU18IQ_xhZk3_hopX7ONJfGAl2a23mEE-1757281250-1.0.1.1-Qh5eTF9Zikg6q9Rsem_EsIp2KUG_lJkU6BHr____1SujySF7uVrbgO1oZf89iUVQNX1FzIm_.KpNOQFUvC.Kc6WyjAkta.SQFZYUc8bSrrs; path=/; expires=Sun, 07-Sep-25 22:10:50 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=zJIvfOEjTTPGIFYt0gCeQAj7KqYcZykciYS3XjiKkUE-1757281250906-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b95dbe7e88680e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:40:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_2f52fd6b536e1abe4977949900458e0d'), (b'openai-processing-ms', b'6738'), (b'x-envoy-upstream-service-time', b'6741'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=q6bH_uwb8xsLU18IQ_xhZk3_hopX7ONJfGAl2a23mEE-1757281250-1.0.1.1-Qh5eTF9Zikg6q9Rsem_EsIp2KUG_lJkU6BHr____1SujySF7uVrbgO1oZf89iUVQNX1FzIm_.KpNOQFUvC.Kc6WyjAkta.SQFZYUc8bSrrs; path=/; expires=Sun, 07-Sep-25 22:10:50 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=zJIvfOEjTTPGIFYt0gCeQAj7KqYcZykciYS3XjiKkUE-1757281250906-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b95dbe7e88680e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:40:50 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:51348 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:51387 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 14:40:51 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 01fb7425-d337-4c1c-8a89-05c2385b29a3
2025-09-07 14:40:51 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 01fb7425-d337-4c1c-8a89-05c2385b29a3
INFO:     127.0.0.1:51389 - "POST /api/v1/chat/stream-with-thread?thread_id=01fb7425-d337-4c1c-8a89-05c2385b29a3&prompt=hello HTTP/1.1" 200 OK
2025-09-07 14:40:51 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:40:51 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:40:51 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:40:51 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:40:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_7b74dddffc5be1761bcdff00df75dd1c'), (b'openai-processing-ms', b'1553'), (b'x-envoy-upstream-service-time', b'1584'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b95dec0982680e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:40:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_7b74dddffc5be1761bcdff00df75dd1c'), (b'openai-processing-ms', b'1553'), (b'x-envoy-upstream-service-time', b'1584'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b95dec0982680e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:40:52 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:40:53 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:40:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:40:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:40:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:40:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: MEYaW59M8EpDNuqBM19kzg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51438) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:40:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:40:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:51440 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: WDE5eNvrm+3JsV5++LOc/lkBNMI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:40:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:40:56.562489"}' [128 bytes]
INFO:     127.0.0.1:51440 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:51443 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:51440 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: dM9c1Z+OzB9hY2UAAodyfg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51446) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:40:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:40:56 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 8LgqcuGlHGBfj1W/h6TjBZ+XgoM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:40:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:40:56.639893"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:40:56.639893"}' [128 bytes]
INFO:     127.0.0.1:51440 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:51443 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:51440 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:51443 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:51440 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:51443 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:40:56 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: fR9HLXptCHaTEZmSLktAMA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51491) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 14:41:04 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 14:41:04 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: xkO70qr4291WNR8uL1aJeGnPqUI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:41:03 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:41:04.747813"}' [128 bytes]
2025-09-07 14:41:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:41:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:41:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:41:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:41:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 14:41:09 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 14:41:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
2025-09-07 14:41:09 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 0hvxo9VIu1wxHmJhOoF6Ng==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51496) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:41:09 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:41:09 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 5hFCbGgAJG74x4SSt21IGjo6h44=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:41:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:41:09.147846"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: AAU+VX0K5KkLvMRX2mBj5Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51498) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:41:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:41:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:41:13 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:41:13 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:41:13 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:41:13 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lKe8c4F3jwZDOnXCn4ioakyU1Y4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:41:13 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:41:13.350038"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:41:13.350038"}' [128 bytes]
INFO:     127.0.0.1:51500 - "OPTIONS /api/v1/chat-threads/threads/00bf5678-6c8d-416f-8a36-174eceb8f1db HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "DELETE /api/v1/chat-threads/threads/00bf5678-6c8d-416f-8a36-174eceb8f1db HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:41:15 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:51500 - "OPTIONS /api/v1/chat-threads/threads/aa833ee4-50c6-471e-a49e-7b44e8b1b33a HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "DELETE /api/v1/chat-threads/threads/aa833ee4-50c6-471e-a49e-7b44e8b1b33a HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "OPTIONS /api/v1/chat-threads/threads/47e35664-d1d8-46c4-99c0-49b91b72fb90 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "DELETE /api/v1/chat-threads/threads/47e35664-d1d8-46c4-99c0-49b91b72fb90 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:41:15 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:51500 - "OPTIONS /api/v1/chat-threads/threads/5d24be12-3ffb-400f-b46a-10dc1edb216a HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "DELETE /api/v1/chat-threads/threads/5d24be12-3ffb-400f-b46a-10dc1edb216a HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "OPTIONS /api/v1/chat-threads/threads/42898881-a438-41dc-badc-f6d2eedb5d3f HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "DELETE /api/v1/chat-threads/threads/42898881-a438-41dc-badc-f6d2eedb5d3f HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "OPTIONS /api/v1/chat-threads/threads/c2844d93-857f-4a8e-a5ab-0da58348b753 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "DELETE /api/v1/chat-threads/threads/c2844d93-857f-4a8e-a5ab-0da58348b753 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51500 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:41:15 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:51503 - "OPTIONS /api/v1/chat-threads/threads/266c04b1-34ce-4dbc-ad44-e4dbc7f1e0f3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51503 - "DELETE /api/v1/chat-threads/threads/266c04b1-34ce-4dbc-ad44-e4dbc7f1e0f3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51503 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:41:16 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 6a 4b f0 [binary, 4 bytes]
DEBUG:    < PONG 76 6a 4b f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51503 - "OPTIONS /api/v1/chat-threads/threads/0f2beeb9-d4fa-4345-9bf2-693ad28ce488 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51503 - "DELETE /api/v1/chat-threads/threads/0f2beeb9-d4fa-4345-9bf2-693ad28ce488 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51503 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:41:16 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:51503 - "GET /api/v1/chat-threads/threads/f4ad082b-b8a5-4421-8f8e-cf018e6405b7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51503 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=hows%20it%20going HTTP/1.1" 200 OK
2025-09-07 14:41:20 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
2025-09-07 14:41:20 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
INFO:     127.0.0.1:51503 - "POST /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=hows%20it%20going HTTP/1.1" 200 OK
2025-09-07 14:41:20 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:41:20 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:41:20 - httpcore.connection - DEBUG - close.started
2025-09-07 14:41:20 - httpcore.connection - DEBUG - close.started
2025-09-07 14:41:20 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:41:20 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:41:20 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:41:20 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:41:20 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11412c400>
2025-09-07 14:41:20 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11412c400>
2025-09-07 14:41:20 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d662890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:41:20 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d662890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:41:20 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11412c370>
2025-09-07 14:41:20 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11412c370>
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:41:20 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:41:20 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:41:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449127'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'116ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_cf44a7ecde33373f5c83c17702d3733b'), (b'openai-processing-ms', b'1635'), (b'x-envoy-upstream-service-time', b'1638'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b95ea1af05eb3c-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:41:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449127'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'116ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_cf44a7ecde33373f5c83c17702d3733b'), (b'openai-processing-ms', b'1635'), (b'x-envoy-upstream-service-time', b'1638'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b95ea1af05eb3c-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:41:22 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:41:23 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:51516 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: lT6s54uA5bpAGGdpDUJpNA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51518) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:41:27 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:41:27 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: pKCQ5Fc8/nVQ+2A8ipFvCcvEsRA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:41:26 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:41:27.059912"}' [128 bytes]
2025-09-07 14:41:27 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:41:27 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:41:27 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:41:27 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:51516 - "GET /api/v1/chat-threads/threads/local_1757280612245_536rx6bng HTTP/1.1" 404 Not Found
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 b8 2a e4 [binary, 4 bytes]
DEBUG:    < PONG f2 b8 2a e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ';Icd' [text, 4 bytes]
DEBUG:    < PONG ';Icd' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51524 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 8a 45 94 [binary, 4 bytes]
DEBUG:    < PONG 61 8a 45 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281317068}' [46 bytes]
2025-09-07 14:41:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281317068}
2025-09-07 14:41:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281317068}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 7c 54 b5 [binary, 4 bytes]
DEBUG:    < PONG 83 7c 54 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 7f 27 c2 [binary, 4 bytes]
DEBUG:    < PONG 32 7f 27 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51536 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 62 89 ab [binary, 4 bytes]
DEBUG:    < PONG ff 62 89 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281347070}' [46 bytes]
2025-09-07 14:42:27 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281347070}
2025-09-07 14:42:27 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281347070}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 31 93 e4 [binary, 4 bytes]
DEBUG:    < PONG 36 31 93 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 57 6a a0 [binary, 4 bytes]
DEBUG:    < PONG be 57 6a a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51543 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 65 5f 84 [binary, 4 bytes]
DEBUG:    < PONG fe 65 5f 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281377070}' [46 bytes]
2025-09-07 14:42:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281377070}
2025-09-07 14:42:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281377070}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca bd b7 c3 [binary, 4 bytes]
DEBUG:    < PONG ca bd b7 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb c5 53 c3 [binary, 4 bytes]
DEBUG:    < PONG bb c5 53 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51548 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281407070}' [46 bytes]
2025-09-07 14:43:27 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281407070}
2025-09-07 14:43:27 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281407070}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 3f 52 d6 [binary, 4 bytes]
DEBUG:    < PONG 0e 3f 52 d6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '*"È—' [text, 4 bytes]
DEBUG:    < PONG '*"È—' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee 87 4f ce [binary, 4 bytes]
DEBUG:    < PONG ee 87 4f ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51561 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba 69 8f f4 [binary, 4 bytes]
DEBUG:    < PONG ba 69 8f f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281437070}' [46 bytes]
2025-09-07 14:43:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281437070}
2025-09-07 14:43:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281437070}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 65 2f 43 [binary, 4 bytes]
DEBUG:    < PONG f7 65 2f 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 bb 28 89 [binary, 4 bytes]
DEBUG:    < PONG 72 bb 28 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 d2 4e 47 [binary, 4 bytes]
DEBUG:    < PONG e3 d2 4e 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281467156}' [46 bytes]
2025-09-07 14:44:27 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281467156}
2025-09-07 14:44:27 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281467156}
INFO:     127.0.0.1:51602 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c e8 0f fa [binary, 4 bytes]
DEBUG:    < PONG 8c e8 0f fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'i1\x1aB' [text, 4 bytes]
DEBUG:    < PONG 'i1\x1aB' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 fe 3d bc [binary, 4 bytes]
DEBUG:    < PONG 54 fe 3d bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281497159}' [46 bytes]
2025-09-07 14:44:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281497159}
2025-09-07 14:44:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757281497159}
INFO:     127.0.0.1:51616 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:51622 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XyKmrKUthl8FaMVwJGRJ+Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51623) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:45:05 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:45:05 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 8mY0UTooPHof/NwMU84xQxtZPhQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:45:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 14:45:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:45:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:45:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:45:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:45:05.199778"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: EqHKJzkLjqBzkNvyj1NQsA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51625) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:45:09 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:45:09 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: E6P4CPkM3N5mkPJcr2uc2ksuT/o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:45:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:45:09.161750"}' [128 bytes]
2025-09-07 14:45:09 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 14:45:09 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 92 74 48 [binary, 4 bytes]
DEBUG:    < PONG 88 92 74 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d fa 06 20 [binary, 4 bytes]
DEBUG:    < PONG 3d fa 06 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51633 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:45:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:45:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:45:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:45:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:51633 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: tl5RaWYt9y05MFYkzFbFdg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51635) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:45:36 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:45:36 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 5BunHwirUUeK0iLhvvtS6sbyt/A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:45:35 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:45:36.199237"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'tP\x10T' [text, 4 bytes]
DEBUG:    < PONG 'tP\x10T' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 cf 2f 69 [binary, 4 bytes]
DEBUG:    < PONG d2 cf 2f 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 80 62 02 [binary, 4 bytes]
DEBUG:    < PONG 13 80 62 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:45:59 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:45:59 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:45:59 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:45:59 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:51641 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: P19HAtwGxdYi+uh70m3eGw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51642) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:45:59 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:45:59 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 76Yi8l/SbxF3mDzomansptkIs7s=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:45:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:45:59.198103"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 bf bc 5b [binary, 4 bytes]
DEBUG:    < PONG 33 bf bc 5b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e b6 96 98 [binary, 4 bytes]
DEBUG:    < PONG 0e b6 96 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:51651 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: sTlHWi+BGfDLTok/9+pyOg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51652) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 14:46:27 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:46:27 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 14:46:27 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 14:46:27 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 3daS3XQUXEZuVwqDRzsNiTvfPbY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:46:27 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:46:27.544093"}' [128 bytes]
2025-09-07 14:46:27 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:46:27 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:46:27 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:46:27 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XeAKqBTOeM325bzLwiNFHA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51654) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:46:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:46:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Gx7SS5IPT8S0ltUThHh9glD7Iuo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:46:29 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:46:30.013194"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:46:30.013194"}' [128 bytes]
2025-09-07 14:46:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:46:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 14:46:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 14:46:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
2025-09-07 14:46:33 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
2025-09-07 14:46:33 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread f4ad082b-b8a5-4421-8f8e-cf018e6405b7
INFO:     127.0.0.1:51658 - "POST /api/v1/chat/stream-with-thread?thread_id=f4ad082b-b8a5-4421-8f8e-cf018e6405b7&prompt=hows%20it%20going HTTP/1.1" 200 OK
2025-09-07 14:46:33 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:46:33 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:46:33 - httpcore.connection - DEBUG - close.started
2025-09-07 14:46:33 - httpcore.connection - DEBUG - close.started
2025-09-07 14:46:33 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:46:33 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:46:33 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:46:33 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:46:33 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114105460>
2025-09-07 14:46:33 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114105460>
2025-09-07 14:46:33 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d662890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:46:33 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d662890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:46:33 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:46:33 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114105eb0>
2025-09-07 14:46:33 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114105eb0>
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:46:33 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:46:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449230'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'102ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_1286c920f83ed7d2a4a3d1e756942ada'), (b'openai-processing-ms', b'1207'), (b'x-envoy-upstream-service-time', b'1210'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b9664a8de30917-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:46:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449230'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'102ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_1286c920f83ed7d2a4a3d1e756942ada'), (b'openai-processing-ms', b'1207'), (b'x-envoy-upstream-service-time', b'1210'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b9664a8de30917-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:46:35 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:46:36 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 a3 35 b2 [binary, 4 bytes]
DEBUG:    < PONG a5 a3 35 b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4uMcLxvIFn6tjjhzWAy7dw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51667) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:46:41 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:46:41 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:51668 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: WZ+5Gn1gwRyWGhmH6NolCD37ft0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:46:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 14:46:41 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:46:41 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:46:41 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:46:41 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:46:41 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 14:46:41 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     connection closed
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:51670 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: rS3rKA5WJFvceQRtFOEK2g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51672) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:46:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:46:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: LkJ2pZmfnH7PiI6I7t0H9kzjPIk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:46:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:46:44.089216"}' [128 bytes]
2025-09-07 14:46:44 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 14:46:44 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:46:44.089216"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
2025-09-07 14:46:47 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:46:47 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:46:47 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:46:47 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: EzSbJdicJkH4jjELENYe8w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51676) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 14:46:47 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 14:46:47 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:51678 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: pEd23ZZBWWZIarpDe+ZotRIm0Ac=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:46:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:46:47.645916"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:46:47.645916"}' [128 bytes]
INFO:     127.0.0.1:51680 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:51682 - "OPTIONS /api/v1/chat-threads/threads/b8078844-cf6d-48da-833c-b585e708f11d HTTP/1.1" 200 OK
INFO:     127.0.0.1:51682 - "DELETE /api/v1/chat-threads/threads/b8078844-cf6d-48da-833c-b585e708f11d HTTP/1.1" 200 OK
INFO:     127.0.0.1:51682 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:46:53 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:51682 - "OPTIONS /api/v1/chat-threads/threads/71d4371f-14a3-44e5-971a-d7b5f75cb345 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51682 - "DELETE /api/v1/chat-threads/threads/71d4371f-14a3-44e5-971a-d7b5f75cb345 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51682 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:46:53 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:51682 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:51682 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:46:54 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c bb 2d 46 [binary, 4 bytes]
DEBUG:    < PONG 7c bb 2d 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51686 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=7a9a83d1-03c2-4621-900e-cdd699c81f27&prompt=hi HTTP/1.1" 200 OK
2025-09-07 14:47:00 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 7a9a83d1-03c2-4621-900e-cdd699c81f27
2025-09-07 14:47:00 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 7a9a83d1-03c2-4621-900e-cdd699c81f27
INFO:     127.0.0.1:51686 - "POST /api/v1/chat/stream-with-thread?thread_id=7a9a83d1-03c2-4621-900e-cdd699c81f27&prompt=hi HTTP/1.1" 200 OK
2025-09-07 14:47:00 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:47:00 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 14:47:00 - httpcore.connection - DEBUG - close.started
2025-09-07 14:47:00 - httpcore.connection - DEBUG - close.started
2025-09-07 14:47:00 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:47:00 - httpcore.connection - DEBUG - close.complete
2025-09-07 14:47:00 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:47:00 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:47:00 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113bb7a30>
2025-09-07 14:47:00 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113bb7a30>
2025-09-07 14:47:00 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d662890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:47:00 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d662890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:47:00 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1140f12b0>
2025-09-07 14:47:00 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1140f12b0>
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:47:00 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:47:00 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:47:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_e374c9b7a03525e439360a5b04818e2d'), (b'openai-processing-ms', b'1405'), (b'x-envoy-upstream-service-time', b'1410'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b966f3186a75f1-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:47:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_e374c9b7a03525e439360a5b04818e2d'), (b'openai-processing-ms', b'1405'), (b'x-envoy-upstream-service-time', b'1410'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b966f3186a75f1-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:47:02 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:47:03 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:47:03 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 14:47:03 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1141c7280>
2025-09-07 14:47:03 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1141c7280>
2025-09-07 14:47:03 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d76ab30> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:47:03 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10d76ab30> server_hostname='api.openai.com' timeout=5.0
2025-09-07 14:47:03 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1141c7c10>
2025-09-07 14:47:03 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1141c7c10>
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:47:03 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 14:47:03 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:47:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449856'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'19ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_8531955a7159575e7a08bbb7eb13bc67'), (b'openai-processing-ms', b'826'), (b'x-envoy-upstream-service-time', b'828'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=boLsMJ_CojxMkudnpbaEEa20s.6eUnaCNaq5iTsXLTs-1757281624-1.0.1.1-NkII.mtLQ4cvZ580QnS9_DPT0zn900cR1r4lOjNGecWglHmxPYmiuzcwChaTI5WgzL5Q1rANAfgPO2TBZosFepInhiRi7gf0uatOR4LJTyc; path=/; expires=Sun, 07-Sep-25 22:17:04 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=x3LlkilbsoZjIm912t5nnhZEZXpWAC8wnGZdLm6ZU_o-1757281624239-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b96701bbf3df05-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 21:47:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449856'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'19ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_8531955a7159575e7a08bbb7eb13bc67'), (b'openai-processing-ms', b'826'), (b'x-envoy-upstream-service-time', b'828'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=boLsMJ_CojxMkudnpbaEEa20s.6eUnaCNaq5iTsXLTs-1757281624-1.0.1.1-NkII.mtLQ4cvZ580QnS9_DPT0zn900cR1r4lOjNGecWglHmxPYmiuzcwChaTI5WgzL5Q1rANAfgPO2TBZosFepInhiRi7gf0uatOR4LJTyc; path=/; expires=Sun, 07-Sep-25 22:17:04 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=x3LlkilbsoZjIm912t5nnhZEZXpWAC8wnGZdLm6ZU_o-1757281624239-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b96701bbf3df05-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 14:47:04 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:51686 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:47:04 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 7b 27 ed [binary, 4 bytes]
DEBUG:    < PONG 67 7b 27 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 81 10 da [binary, 4 bytes]
DEBUG:    < PONG 81 81 10 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51705 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281637665}' [46 bytes]
2025-09-07 14:47:17 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757281637665}
2025-09-07 14:47:17 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757281637665}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 09 b3 7a [binary, 4 bytes]
DEBUG:    < PONG ed 09 b3 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:51712 - "GET /api/v1/chat-threads/threads/f4ad082b-b8a5-4421-8f8e-cf018e6405b7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51712 - "GET /api/v1/chat-threads/threads/5f0f9caf-daaa-4883-8e15-2e650684ad74 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51712 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:51712 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 14:47:33 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 43 5c ee [binary, 4 bytes]
DEBUG:    < PONG 7c 43 5c ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 14:47:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:47:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 14:47:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 14:47:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: WKWPRoMEdZOPH/Tuq1xdZQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51731) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 14:47:38 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 14:47:38 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: wSqwy2W5jM0zuuOILfihV15CMn4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 21:47:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T14:47:38.137673"}' [128 bytes]
INFO:     127.0.0.1:51739 - "GET /api/v1/chat-threads/threads/local_1757280662403_l83uiie7q HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51758 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 6e 0e 0b [binary, 4 bytes]
DEBUG:    < PONG d9 6e 0e 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 c1 72 ed [binary, 4 bytes]
DEBUG:    < PONG e6 c1 72 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 14:48:04 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757281688150}' [46 bytes]
2025-09-07 14:48:08 - app.api.v1.endpoints.websocket - INFO - Received message from gayathri_sriram: {"type":"heartbeat","timestamp":1757281688150}
2025-09-07 14:48:08 - app.api.v1.endpoints.websocket - INFO - Received message from gayathri_sriram: {"type":"heartbeat","timestamp":1757281688150}
