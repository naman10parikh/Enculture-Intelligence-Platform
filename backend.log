INFO:     Will watch for changes in these directories: ['/Users/naman/Enculture-Intelligence-Platform/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [53371] using WatchFiles
INFO:     Started server process [53386]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:63931 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63935 - "GET /health HTTP/1.1" 200 OK
2025-09-07 20:02:45 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:02:45 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:02:45 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11641d910>
2025-09-07 20:02:45 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11641d910>
2025-09-07 20:02:45 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:02:45 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:02:45 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116640760>
2025-09-07 20:02:45 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116640760>
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:02:45 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /69dlPVAf1ipFsdrjG1ekA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 63944) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:02:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:02:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7nxDc2m89KQUYyJxQnuJGPgznaQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:02:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:02:46.937074"}' [128 bytes]
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:02:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_9b8c91b3506b36e69df73080e300c34f'), (b'openai-processing-ms', b'8391'), (b'x-envoy-upstream-service-time', b'8394'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=pnvSpCO7LGufD6zPsI5iAufOniduHLwIA_z.8OBU948-1757300574-1.0.1.1-Mi5uPUVgnnR.QzWRqUmMH8p1ynL4S9mB5CgPk79HQeD4qQUrZP8NXzeBjtnyinzSbX9tBjJgaI.p2m.3O9GBgfeZqX43tp5q4PvE9FEYSeU; path=/; expires=Mon, 08-Sep-25 03:32:54 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=BCcYFD2jgLEMk_cmBNjgBLThnb24vZOAQnzpGBHx8ag-1757300574569-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb3578bc936828-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:02:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_9b8c91b3506b36e69df73080e300c34f'), (b'openai-processing-ms', b'8391'), (b'x-envoy-upstream-service-time', b'8394'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=pnvSpCO7LGufD6zPsI5iAufOniduHLwIA_z.8OBU948-1757300574-1.0.1.1-Mi5uPUVgnnR.QzWRqUmMH8p1ynL4S9mB5CgPk79HQeD4qQUrZP8NXzeBjtnyinzSbX9tBjJgaI.p2m.3O9GBgfeZqX43tp5q4PvE9FEYSeU; path=/; expires=Mon, 08-Sep-25 03:32:54 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=BCcYFD2jgLEMk_cmBNjgBLThnb24vZOAQnzpGBHx8ag-1757300574569-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb3578bc936828-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:02:54 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:63937 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63982 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 20:02:55 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 0f318b75-6895-4445-9750-beec8dff13ca
2025-09-07 20:02:55 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 0f318b75-6895-4445-9750-beec8dff13ca
INFO:     127.0.0.1:63984 - "POST /api/v1/chat/stream-with-thread?thread_id=0f318b75-6895-4445-9750-beec8dff13ca&prompt=hello HTTP/1.1" 200 OK
2025-09-07 20:02:55 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 20:02:55 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:02:55 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:02:55 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:02:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_749ec1e15cf80b7296e49c305ec22e8b'), (b'openai-processing-ms', b'1501'), (b'x-envoy-upstream-service-time', b'1504'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb35b22ec76828-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:02:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_749ec1e15cf80b7296e49c305ec22e8b'), (b'openai-processing-ms', b'1501'), (b'x-envoy-upstream-service-time', b'1504'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb35b22ec76828-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:02:56 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:02:57 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:02:59 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:02:59 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:02:59 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:02:59 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64027 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Bn81SBd+yfr9/6/DSFgceA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64029) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:03:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:03:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:64027 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 3RxM1p4tCxoRSWEo9Sxn0j76EQw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:03:00 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:00.713826"}' [128 bytes]
INFO:     127.0.0.1:64032 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: nBkKcFMBPTkHjLNs9zC4sw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64035) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:03:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:03:00 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: s8tKggPAf797X4qcAai0vRJJjMs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:03:00 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:00.783483"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:00.783483"}' [128 bytes]
INFO:     127.0.0.1:64032 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:64048 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: itsLv/PiZ76XHmEPujvhwQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64050) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:03:03 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:03:03 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:03.940932"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: sb/dp8WllpOmK4AulnFbTTuD0Ts=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:03:03 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:03.940932"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:03.940932"}' [128 bytes]
INFO:     127.0.0.1:64048 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: np4h+H46wkw4iSL0igFfVw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64052) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:03:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:03:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: YxmBy/CD+83+aIfgL8GTf1ovfoo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:03:03 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:04.009588"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:04.009588"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:04.009588"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:04.009588"}' [128 bytes]
INFO:     127.0.0.1:64048 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:64048 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 20:03:18 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:03:18 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:03:18 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:03:18 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:03:18 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:03:18 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:03:18 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:03:18 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 21 9f 5f [binary, 4 bytes]
DEBUG:    < PONG f4 21 9f 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 88 74 60 [binary, 4 bytes]
DEBUG:    < PONG 2f 88 74 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64161 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 5vA88DgRpwC5oMf/d93Nug==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64163) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:03:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:03:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:25.395941"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:25.395941"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: TIaS2Le9tx9D86Ewl3J6pieeOMI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:03:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:25.395941"}' [128 bytes]
INFO:     127.0.0.1:64161 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64161 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:64161 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: VuU+h1Z10hSU4rrYaSx5uw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64165) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:03:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:03:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:25.413482"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: iLDMaWAEd5RAxR4PP6x6cDF3Ano=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:03:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:25.413482"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:25.413482"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:03:25.413482"}' [128 bytes]
INFO:     127.0.0.1:64169 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300610966}' [46 bytes]
2025-09-07 20:03:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300610966}
2025-09-07 20:03:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300610966}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 47 b4 0b [binary, 4 bytes]
DEBUG:    < PONG 04 47 b4 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 a6 e9 52 [binary, 4 bytes]
DEBUG:    < PONG 99 a6 e9 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 f9 79 cf [binary, 4 bytes]
DEBUG:    < PONG 53 f9 79 cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 64 78 d4 [binary, 4 bytes]
DEBUG:    < PONG dc 64 78 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64187 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300639674}' [46 bytes]
2025-09-07 20:03:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300639674}
2025-09-07 20:03:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300639674}
INFO:     127.0.0.1:64190 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 1b cc e0 [binary, 4 bytes]
DEBUG:    < PONG 84 1b cc e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 57 46 3d [binary, 4 bytes]
DEBUG:    < PONG ec 57 46 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300640966}' [46 bytes]
2025-09-07 20:04:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300640966}
2025-09-07 20:04:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300640966}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c 1a c1 e9 [binary, 4 bytes]
DEBUG:    < PONG 2c 1a c1 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e 44 79 c6 [binary, 4 bytes]
DEBUG:    < PONG 1e 44 79 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 f6 65 f8 [binary, 4 bytes]
DEBUG:    < PONG 54 f6 65 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 70 82 77 [binary, 4 bytes]
DEBUG:    < PONG af 70 82 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64197 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 b8 e4 be [binary, 4 bytes]
DEBUG:    < PONG 43 b8 e4 be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 ef 2c 65 [binary, 4 bytes]
DEBUG:    < PONG 91 ef 2c 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300669662}' [46 bytes]
2025-09-07 20:04:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300669662}
2025-09-07 20:04:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300669662}
INFO:     127.0.0.1:64201 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300670966}' [46 bytes]
2025-09-07 20:04:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300670966}
2025-09-07 20:04:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300670966}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 69 23 36 [binary, 4 bytes]
DEBUG:    < PONG e8 69 23 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 50 e1 f0 [binary, 4 bytes]
DEBUG:    < PONG 07 50 e1 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 3e c4 a8 [binary, 4 bytes]
DEBUG:    < PONG e4 3e c4 a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 67 1e d4 [binary, 4 bytes]
DEBUG:    < PONG 7e 67 1e d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64204 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300699662}' [46 bytes]
2025-09-07 20:04:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300699662}
2025-09-07 20:04:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300699662}
INFO:     127.0.0.1:64207 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 b2 3e d2 [binary, 4 bytes]
DEBUG:    < PONG 49 b2 3e d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 7f df 2f [binary, 4 bytes]
DEBUG:    < PONG 47 7f df 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300700966}' [46 bytes]
2025-09-07 20:05:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300700966}
2025-09-07 20:05:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300700966}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x06MxY' [text, 4 bytes]
DEBUG:    < PONG '\x06MxY' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 68 bc a4 [binary, 4 bytes]
DEBUG:    < PONG d9 68 bc a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64238 - "OPTIONS /api/v1/chat/enhance-survey-name HTTP/1.1" 200 OK
2025-09-07 20:05:19 - httpcore.connection - DEBUG - close.started
2025-09-07 20:05:19 - httpcore.connection - DEBUG - close.started
2025-09-07 20:05:19 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:05:19 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:05:19 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:05:19 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:05:19 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b0d7c0>
2025-09-07 20:05:19 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b0d7c0>
2025-09-07 20:05:19 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:05:19 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:05:19 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b0c2e0>
2025-09-07 20:05:19 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b0c2e0>
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:05:19 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:05:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449859'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'18ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_27052bcfc714f3565f29b349422d1495'), (b'openai-processing-ms', b'730'), (b'x-envoy-upstream-service-time', b'732'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb3936bb84def9-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:05:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449859'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'18ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_27052bcfc714f3565f29b349422d1495'), (b'openai-processing-ms', b'730'), (b'x-envoy-upstream-service-time', b'732'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb3936bb84def9-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:05:20 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:64238 - "POST /api/v1/chat/enhance-survey-name HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 38 0d e2 [binary, 4 bytes]
DEBUG:    < PONG f2 38 0d e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x16I]p' [text, 4 bytes]
DEBUG:    < PONG '\x16I]p' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 9a fb e2 [binary, 4 bytes]
INFO:     127.0.0.1:64240 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 0c be 40 [binary, 4 bytes]
DEBUG:    < PONG e5 9a fb e2 [binary, 4 bytes]
DEBUG:    < PONG f2 0c be 40 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300729664}' [46 bytes]
2025-09-07 20:05:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300729664}
2025-09-07 20:05:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300729664}
INFO:     127.0.0.1:64257 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300730966}' [46 bytes]
2025-09-07 20:05:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300730966}
2025-09-07 20:05:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300730966}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 40 2d 92 [binary, 4 bytes]
DEBUG:    < PONG b2 40 2d 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1bru\x02' [text, 4 bytes]
DEBUG:    < PONG '\x1bru\x02' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 89 79 11 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 4b 5e b3 [binary, 4 bytes]
DEBUG:    < PONG 5e 4b 5e b3 [binary, 4 bytes]
DEBUG:    < PONG 50 89 79 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64285 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300759656}' [46 bytes]
2025-09-07 20:05:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300759656}
2025-09-07 20:05:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300759656}
INFO:     127.0.0.1:64287 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 dd 62 c3 [binary, 4 bytes]
DEBUG:    < PONG d5 dd 62 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab fe 6c 75 [binary, 4 bytes]
DEBUG:    < PONG ab fe 6c 75 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300760961}' [46 bytes]
2025-09-07 20:06:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300760961}
2025-09-07 20:06:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300760961}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 56 13 73 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 a5 cf 81 [binary, 4 bytes]
DEBUG:    < PONG 86 56 13 73 [binary, 4 bytes]
DEBUG:    < PONG 11 a5 cf 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 46 6b 83 [binary, 4 bytes]
DEBUG:    < PONG d4 46 6b 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '=yI\x1b' [text, 4 bytes]
DEBUG:    < PONG '=yI\x1b' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64303 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c b3 42 67 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 53 4b 1d [binary, 4 bytes]
DEBUG:    < PONG 6c b3 42 67 [binary, 4 bytes]
DEBUG:    < PONG b6 53 4b 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300789654}' [46 bytes]
2025-09-07 20:06:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300789654}
2025-09-07 20:06:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300789654}
INFO:     127.0.0.1:64307 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300790959}' [46 bytes]
2025-09-07 20:06:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300790959}
2025-09-07 20:06:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300790959}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f 20 4d f5 [binary, 4 bytes]
DEBUG:    < PONG 4f 20 4d f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 ec 53 a0 [binary, 4 bytes]
DEBUG:    < PONG 78 ec 53 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 25 69 2a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 b6 ee d3 [binary, 4 bytes]
DEBUG:    < PONG db 25 69 2a [binary, 4 bytes]
DEBUG:    < PONG 77 b6 ee d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64315 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300819655}' [46 bytes]
2025-09-07 20:06:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300819655}
2025-09-07 20:06:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300819655}
INFO:     127.0.0.1:64317 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 49 bd a2 [binary, 4 bytes]
DEBUG:    < PONG fb 49 bd a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 96 54 95 [binary, 4 bytes]
DEBUG:    < PONG 6c 96 54 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300820958}' [46 bytes]
2025-09-07 20:07:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300820958}
2025-09-07 20:07:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300820958}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 7d c0 29 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 2b 8f 21 [binary, 4 bytes]
DEBUG:    < PONG 81 7d c0 29 [binary, 4 bytes]
DEBUG:    < PONG f1 2b 8f 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 8e 58 9f [binary, 4 bytes]
DEBUG:    < PONG 86 8e 58 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c a2 b3 1d [binary, 4 bytes]
DEBUG:    < PONG 2c a2 b3 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64336 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 bf 6a ee [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 09 c6 63 [binary, 4 bytes]
DEBUG:    < PONG 32 bf 6a ee [binary, 4 bytes]
DEBUG:    < PONG af 09 c6 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300850216}' [46 bytes]
2025-09-07 20:07:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300850216}
2025-09-07 20:07:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300850216}
INFO:     127.0.0.1:64353 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300850959}' [46 bytes]
2025-09-07 20:07:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300850959}
2025-09-07 20:07:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300850959}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'y\x08\x06x' [text, 4 bytes]
DEBUG:    < PONG 'y\x08\x06x' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x00g\nK' [text, 4 bytes]
DEBUG:    < PONG '\x00g\nK' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 97 9c 5f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 21 e2 b7 [binary, 4 bytes]
DEBUG:    < PONG 8f 97 9c 5f [binary, 4 bytes]
DEBUG:    < PONG e5 21 e2 b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64357 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300879655}' [46 bytes]
2025-09-07 20:07:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300879655}
2025-09-07 20:07:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300879655}
INFO:     127.0.0.1:64371 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '8\x0e\x06l' [text, 4 bytes]
DEBUG:    < PONG '8\x0e\x06l' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 58 89 17 [binary, 4 bytes]
DEBUG:    < PONG 62 58 89 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300880959}' [46 bytes]
2025-09-07 20:08:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300880959}
2025-09-07 20:08:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300880959}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 4b b1 4f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 fe d5 ed [binary, 4 bytes]
DEBUG:    < PONG b4 4b b1 4f [binary, 4 bytes]
DEBUG:    < PONG 18 fe d5 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 4b 92 03 [binary, 4 bytes]
DEBUG:    < PONG 92 4b 92 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 38 cb 50 [binary, 4 bytes]
DEBUG:    < PONG 29 38 cb 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64389 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 86 98 63 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 5a 69 ee [binary, 4 bytes]
DEBUG:    < PONG 09 86 98 63 [binary, 4 bytes]
DEBUG:    < PONG 27 5a 69 ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300909700}' [46 bytes]
2025-09-07 20:08:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300909700}
2025-09-07 20:08:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300909700}
INFO:     127.0.0.1:64394 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300910958}' [46 bytes]
2025-09-07 20:08:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300910958}
2025-09-07 20:08:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300910958}
INFO:     127.0.0.1:64408 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=aa833ee4-50c6-471e-a49e-7b44e8b1b33a&prompt=%5BSurvey%20Creation%20Context%3A%20Currently%20working%20on%20survey%20%22Shape%20Our%20Workplace%20Culture%20Together%22%20at%20step%205%20(questions).%20Current%20survey%20data%3A%20name%3D%22Shape%20Our%20Workplace%20Culture%20Together%22%2C%20context%3D%22We%20want%20to%20understand%20employee%20satisfaction%20and%20engagement%20levels%20in%20our%20technology%20company%20to%20improve%20workplace%20culture.%0A%0ASuggested%20areas%20to%20consider%3A%0A-%20What%20specific%20aspects%20do%20you%20want%20to%20measure%3F%0A-%20What%20recent%20changes%20or%20challenges%20prompted%20this%20survey%3F%0A-%20What%20actions%20will%20you%20take%20based%20on%20the%20results%3F%0A-%20Who%20is%20your%20target%20audience%20and%20what%20do%20they%20need%20to%20know%3F%0A%0AChat%20with%20AI%20to%20refine%20these%20details%20further.%0A%0ASuggested%20areas%20to%20consider%3A%0A-%20What%20specific%20aspects%20do%20you%20want%20to%20measure%3F%0A-%20What%20recent%20changes%20or%20challenges%20prompted%20this%20survey%3F%0A-%20What%20actions%20will%20you%20take%20based%20on%20the%20results%3F%0A-%20Who%20is%20your%20target%20audience%20and%20what%20do%20they%20need%20to%20know%3F%0A%0AChat%20with%20AI%20to%20refine%20these%20details%20further.%22%2C%203%20questions%20defined%2C%203%20classifiers%2C%200%20metrics.%5D%20User%20request%3A%20Create%20a%20comprehensive%20customer%20satisfaction%20survey%20for%20a%20retail%20company%20with%208%20questions%2C%20metrics%2C%20and%20classifiers HTTP/1.1" 200 OK
2025-09-07 20:08:37 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread aa833ee4-50c6-471e-a49e-7b44e8b1b33a
2025-09-07 20:08:37 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread aa833ee4-50c6-471e-a49e-7b44e8b1b33a
INFO:     127.0.0.1:64408 - "POST /api/v1/chat/stream-with-thread?thread_id=aa833ee4-50c6-471e-a49e-7b44e8b1b33a&prompt=%5BSurvey%20Creation%20Context%3A%20Currently%20working%20on%20survey%20%22Shape%20Our%20Workplace%20Culture%20Together%22%20at%20step%205%20(questions).%20Current%20survey%20data%3A%20name%3D%22Shape%20Our%20Workplace%20Culture%20Together%22%2C%20context%3D%22We%20want%20to%20understand%20employee%20satisfaction%20and%20engagement%20levels%20in%20our%20technology%20company%20to%20improve%20workplace%20culture.%0A%0ASuggested%20areas%20to%20consider%3A%0A-%20What%20specific%20aspects%20do%20you%20want%20to%20measure%3F%0A-%20What%20recent%20changes%20or%20challenges%20prompted%20this%20survey%3F%0A-%20What%20actions%20will%20you%20take%20based%20on%20the%20results%3F%0A-%20Who%20is%20your%20target%20audience%20and%20what%20do%20they%20need%20to%20know%3F%0A%0AChat%20with%20AI%20to%20refine%20these%20details%20further.%0A%0ASuggested%20areas%20to%20consider%3A%0A-%20What%20specific%20aspects%20do%20you%20want%20to%20measure%3F%0A-%20What%20recent%20changes%20or%20challenges%20prompted%20this%20survey%3F%0A-%20What%20actions%20will%20you%20take%20based%20on%20the%20results%3F%0A-%20Who%20is%20your%20target%20audience%20and%20what%20do%20they%20need%20to%20know%3F%0A%0AChat%20with%20AI%20to%20refine%20these%20details%20further.%22%2C%203%20questions%20defined%2C%203%20classifiers%2C%200%20metrics.%5D%20User%20request%3A%20Create%20a%20comprehensive%20customer%20satisfaction%20survey%20for%20a%20retail%20company%20with%208%20questions%2C%20metrics%2C%20and%20classifiers HTTP/1.1" 200 OK
2025-09-07 20:08:37 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 20:08:37 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 20:08:37 - httpcore.connection - DEBUG - close.started
2025-09-07 20:08:37 - httpcore.connection - DEBUG - close.started
2025-09-07 20:08:37 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:08:37 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:08:37 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:08:37 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:08:37 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a47070>
2025-09-07 20:08:37 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a47070>
2025-09-07 20:08:37 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:08:37 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:08:37 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a4d3d0>
2025-09-07 20:08:37 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a4d3d0>
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:08:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:08:37 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce cd 97 a4 [binary, 4 bytes]
DEBUG:    < PONG ce cd 97 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e f8 fc 92 [binary, 4 bytes]
DEBUG:    < PONG 0e f8 fc 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 93 8b 6b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 1e 52 f5 [binary, 4 bytes]
DEBUG:    < PONG 01 93 8b 6b [binary, 4 bytes]
DEBUG:    < PONG 72 1e 52 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:08:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449185'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'108ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_9285b77e1f6e1567663f4d3ac9f5bf82'), (b'openai-processing-ms', b'11222'), (b'x-envoy-upstream-service-time', b'11224'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb3e115f061846-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:08:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449185'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'108ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_9285b77e1f6e1567663f4d3ac9f5bf82'), (b'openai-processing-ms', b'11222'), (b'x-envoy-upstream-service-time', b'11224'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb3e115f061846-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:08:49 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:64414 - "GET /health HTTP/1.1" 200 OK
2025-09-07 20:08:56 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300940515}' [46 bytes]
2025-09-07 20:09:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300940515}
2025-09-07 20:09:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300940515}
INFO:     127.0.0.1:64417 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 0e 00 3c [binary, 4 bytes]
DEBUG:    < PONG 8d 0e 00 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd ec 90 4a [binary, 4 bytes]
DEBUG:    < PONG fd ec 90 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300940959}' [46 bytes]
2025-09-07 20:09:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300940959}
2025-09-07 20:09:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300940959}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3f fd b5 09 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ad bd 28 d0 [binary, 4 bytes]
DEBUG:    < PONG 3f fd b5 09 [binary, 4 bytes]
DEBUG:    < PONG ad bd 28 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 94 64 f5 [binary, 4 bytes]
DEBUG:    < PONG e7 94 64 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'kKQ\r' [text, 4 bytes]
DEBUG:    < PONG 'kKQ\r' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64422 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 ac 1a a5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 ff 03 44 [binary, 4 bytes]
DEBUG:    < PONG 62 ac 1a a5 [binary, 4 bytes]
DEBUG:    < PONG b8 ff 03 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300969655}' [46 bytes]
2025-09-07 20:09:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300969655}
2025-09-07 20:09:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300969655}
INFO:     127.0.0.1:64425 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300970963}' [46 bytes]
2025-09-07 20:09:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300970963}
2025-09-07 20:09:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300970963}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 d2 05 3b [binary, 4 bytes]
DEBUG:    < PONG f6 d2 05 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 8a fb 11 [binary, 4 bytes]
DEBUG:    < PONG 97 8a fb 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 48 9a 8c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e a6 4a cc [binary, 4 bytes]
DEBUG:    < PONG d3 48 9a 8c [binary, 4 bytes]
DEBUG:    < PONG 8e a6 4a cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64434 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757300999655}' [46 bytes]
2025-09-07 20:09:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300999655}
2025-09-07 20:09:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757300999655}
INFO:     127.0.0.1:64436 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 d2 96 af [binary, 4 bytes]
DEBUG:    < PONG d4 d2 96 af [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'h!|N' [text, 4 bytes]
DEBUG:    < PONG 'h!|N' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301000970}' [46 bytes]
2025-09-07 20:10:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301000970}
2025-09-07 20:10:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301000970}
INFO:     127.0.0.1:64436 - "OPTIONS /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
2025-09-07 20:10:02 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create a survey on employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:10:02 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create a survey on employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:10:02 - httpcore.connection - DEBUG - close.started
2025-09-07 20:10:02 - httpcore.connection - DEBUG - close.started
2025-09-07 20:10:02 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:10:02 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:10:02 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:10:02 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:10:02 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b0cc70>
2025-09-07 20:10:02 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b0cc70>
2025-09-07 20:10:02 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:10:02 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:10:02 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b0c250>
2025-09-07 20:10:02 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b0c250>
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:10:02 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e 93 24 8f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 9a 97 77 [binary, 4 bytes]
DEBUG:    < PONG 1e 93 24 8f [binary, 4 bytes]
DEBUG:    < PONG c3 9a 97 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 69 cf cf [binary, 4 bytes]
DEBUG:    < PONG 3e 69 cf cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 4e 1f 97 [binary, 4 bytes]
DEBUG:    < PONG 88 4e 1f 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:10:21 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449160'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_8cc4a94640e1851d708e0fc518a869b2'), (b'openai-processing-ms', b'19257'), (b'x-envoy-upstream-service-time', b'19262'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb40202eb9ebe6-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:10:21 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449160'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_8cc4a94640e1851d708e0fc518a869b2'), (b'openai-processing-ms', b'19257'), (b'x-envoy-upstream-service-time', b'19262'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb40202eb9ebe6-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:10:21 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:10:21 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:10:21 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:10:21 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
2025-09-07 20:10:21 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
INFO:     127.0.0.1:64436 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
INFO:     127.0.0.1:64454 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 94 ef 80 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING be cf 01 14 [binary, 4 bytes]
DEBUG:    < PONG 01 94 ef 80 [binary, 4 bytes]
DEBUG:    < PONG be cf 01 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301029681}' [46 bytes]
2025-09-07 20:10:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301029681}
2025-09-07 20:10:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301029681}
INFO:     127.0.0.1:64457 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301030958}' [46 bytes]
2025-09-07 20:10:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301030958}
2025-09-07 20:10:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301030958}
2025-09-07 20:10:32 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create a survey on employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:10:32 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create a survey on employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:10:32 - httpcore.connection - DEBUG - close.started
2025-09-07 20:10:32 - httpcore.connection - DEBUG - close.started
2025-09-07 20:10:32 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:10:32 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:10:32 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:10:32 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:10:32 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a47340>
2025-09-07 20:10:32 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a47340>
2025-09-07 20:10:32 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:10:32 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:10:32 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a472b0>
2025-09-07 20:10:32 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a472b0>
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:10:32 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 6d 1c 84 [binary, 4 bytes]
DEBUG:    < PONG 4e 6d 1c 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 7a a4 e1 [binary, 4 bytes]
DEBUG:    < PONG fc 7a a4 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 85 7a 09 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 22 de 62 [binary, 4 bytes]
DEBUG:    < PONG 05 85 7a 09 [binary, 4 bytes]
DEBUG:    < PONG 24 22 de 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
2025-09-07 20:10:47 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create a survey on employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:10:47 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create a survey on employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:10:47 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:10:47 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:10:47 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a21280>
2025-09-07 20:10:47 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a21280>
2025-09-07 20:10:47 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:10:47 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:10:47 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a47a60>
2025-09-07 20:10:47 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a47a60>
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:10:47 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:10:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449161'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_b74cd57b9b5a01985fb05fcda8249246'), (b'openai-processing-ms', b'21028'), (b'x-envoy-upstream-service-time', b'21031'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb40dfcf837670-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:10:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449161'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_b74cd57b9b5a01985fb05fcda8249246'), (b'openai-processing-ms', b'21028'), (b'x-envoy-upstream-service-time', b'21031'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb40dfcf837670-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:10:54 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:10:54 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:10:54 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:10:54 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
2025-09-07 20:10:54 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
INFO:     127.0.0.1:64457 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
INFO:     127.0.0.1:64478 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301059655}' [46 bytes]
2025-09-07 20:10:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301059655}
2025-09-07 20:10:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301059655}
INFO:     127.0.0.1:64480 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1axc\x14' [text, 4 bytes]
DEBUG:    < PONG '\x1axc\x14' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x12BC\x0c' [text, 4 bytes]
DEBUG:    < PONG '\x12BC\x0c' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301060958}' [46 bytes]
2025-09-07 20:11:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301060958}
2025-09-07 20:11:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301060958}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 9c a5 da [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e d5 28 4a [binary, 4 bytes]
DEBUG:    < PONG 80 9c a5 da [binary, 4 bytes]
DEBUG:    < PONG 6e d5 28 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:11:08 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449160'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_6d8b9ff22914173ac8111e6cf245d89e'), (b'openai-processing-ms', b'21419'), (b'x-envoy-upstream-service-time', b'21423'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb413a6fb4dcfb-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:11:08 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449160'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_6d8b9ff22914173ac8111e6cf245d89e'), (b'openai-processing-ms', b'21419'), (b'x-envoy-upstream-service-time', b'21423'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb413a6fb4dcfb-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:11:08 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:11:08 - httpcore.connection - DEBUG - close.started
2025-09-07 20:11:08 - httpcore.connection - DEBUG - close.started
2025-09-07 20:11:08 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:11:08 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:11:08 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:11:08 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:11:09 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
2025-09-07 20:11:09 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
INFO:     127.0.0.1:64463 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 01 6b 9e [binary, 4 bytes]
DEBUG:    < PONG 6e 01 6b 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'o/cF' [text, 4 bytes]
DEBUG:    < PONG 'o/cF' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64492 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 72 cc 47 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 63 0e a0 [binary, 4 bytes]
DEBUG:    < PONG f2 72 cc 47 [binary, 4 bytes]
DEBUG:    < PONG 14 63 0e a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301089677}' [46 bytes]
2025-09-07 20:11:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301089677}
2025-09-07 20:11:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301089677}
INFO:     127.0.0.1:64495 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301090958}' [46 bytes]
2025-09-07 20:11:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301090958}
2025-09-07 20:11:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301090958}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c f4 da 9f [binary, 4 bytes]
DEBUG:    < PONG 0c f4 da 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 80 ac 77 [binary, 4 bytes]
DEBUG:    < PONG dd 80 ac 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 94 ac 82 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 12 fd 63 [binary, 4 bytes]
DEBUG:    < PONG 5b 94 ac 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 57 12 fd 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64499 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301119655}' [46 bytes]
2025-09-07 20:11:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301119655}
2025-09-07 20:11:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301119655}
INFO:     127.0.0.1:64519 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 c2 d3 76 [binary, 4 bytes]
DEBUG:    < PONG e7 c2 d3 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a c2 af 8a [binary, 4 bytes]
DEBUG:    < PONG 4a c2 af 8a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301120959}' [46 bytes]
2025-09-07 20:12:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301120959}
2025-09-07 20:12:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301120959}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 bb 80 e8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 97 5b 4b [binary, 4 bytes]
DEBUG:    < PONG a5 bb 80 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 0b 97 5b 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 97 6b ee [binary, 4 bytes]
DEBUG:    < PONG b3 97 6b ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d a6 a2 06 [binary, 4 bytes]
DEBUG:    < PONG 2d a6 a2 06 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64539 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 de 96 76 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 e9 1b 5c [binary, 4 bytes]
DEBUG:    < PONG 82 de 96 76 [binary, 4 bytes]
DEBUG:    < PONG b6 e9 1b 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301149655}' [46 bytes]
2025-09-07 20:12:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301149655}
2025-09-07 20:12:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301149655}
INFO:     127.0.0.1:64542 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301150959}' [46 bytes]
2025-09-07 20:12:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301150959}
2025-09-07 20:12:30 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301150959}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 8a a2 f3 [binary, 4 bytes]
DEBUG:    < PONG b1 8a a2 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 b1 78 81 [binary, 4 bytes]
DEBUG:    < PONG 57 b1 78 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 f5 7b 73 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 3a 40 5d [binary, 4 bytes]
DEBUG:    < PONG d7 f5 7b 73 [binary, 4 bytes]
DEBUG:    < PONG b9 3a 40 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64547 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 13 ed 7b [binary, 4 bytes]
DEBUG:    < PONG e1 13 ed 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '2Ì¸g' [text, 4 bytes]
DEBUG:    < PONG '2Ì¸g' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301180959}' [46 bytes]
2025-09-07 20:13:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301180959}
2025-09-07 20:13:00 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301180959}
INFO:     127.0.0.1:64550 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301182825}' [46 bytes]
2025-09-07 20:13:02 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301182825}
2025-09-07 20:13:02 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301182825}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'c|ob' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 bd 2d 7b [binary, 4 bytes]
DEBUG:    < PONG 'c|ob' [text, 4 bytes]
DEBUG:    < PONG 13 bd 2d 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:13:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:13:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:13:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:13:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64555 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: biR8eLvhovJTfSd1rTuovw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64557) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:13:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:13:05 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: jaQBLH/hTwNWJ1W9ljD4b7dE6fY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:13:05 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:64555 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:05.870154"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:05.870154"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:05.870154"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:05.870154"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:13:06 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:13:06 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:13:06 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:13:06 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64550 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: +9kJtawudh4YU06Rc8oe6Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64559) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:13:06 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:13:06 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:06.399798"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:06.399798"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: klEYrKIMEgg8P5J/rCITpjPsTjA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:13:06 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:06.399798"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:06.399798"}' [128 bytes]
INFO:     127.0.0.1:64550 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 88 39 23 [binary, 4 bytes]
DEBUG:    < PONG 53 88 39 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 0f c1 65 [binary, 4 bytes]
DEBUG:    < PONG 72 0f c1 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 15 6c dc [binary, 4 bytes]
DEBUG:    < PONG 6e 15 6c dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 5f 9e 20 [binary, 4 bytes]
DEBUG:    < PONG c0 5f 9e 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:64579 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XYaX8m8WMwByGRECXaZK0g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64581) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:13:31 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:13:31 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:13:31 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 20:13:31 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:31.923528"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:31.923528"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:31.923528"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: cOkYmbA1T9ZTJsZ21w/QNx0wSxM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:13:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:31.923528"}' [128 bytes]
2025-09-07 20:13:31 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:13:31 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:13:31 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:13:31 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64583 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:13:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:13:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:13:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:13:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64585 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: rPQpbDCLymKSOYHYuTwnbA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64587) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:13:32 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:13:32 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 9Hb1mNJeKCcMO3TQZ1TbFbHD+Vc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:13:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:32.104883"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:32.104883"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:32.104883"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:13:32.104883"}' [128 bytes]
INFO:     127.0.0.1:64585 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
2025-09-07 20:13:40 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create a survey on employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:13:40 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create a survey on employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:13:40 - httpcore.connection - DEBUG - close.started
2025-09-07 20:13:40 - httpcore.connection - DEBUG - close.started
2025-09-07 20:13:40 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:13:40 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:13:40 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:13:40 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:13:40 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116863310>
2025-09-07 20:13:40 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116863310>
2025-09-07 20:13:40 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:13:40 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:13:40 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a212b0>
2025-09-07 20:13:40 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a212b0>
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:13:40 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 6c c9 78 [binary, 4 bytes]
DEBUG:    < PONG 31 6c c9 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x12RYE' [text, 4 bytes]
DEBUG:    < PONG '\x12RYE' [text, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 20:13:46 - app.api.v1.endpoints.chat - INFO - Generating survey template for: employee satisfaction with 8 questions...
2025-09-07 20:13:46 - app.api.v1.endpoints.chat - INFO - Generating survey template for: employee satisfaction with 8 questions...
2025-09-07 20:13:46 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:13:46 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:13:46 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b15a90>
2025-09-07 20:13:46 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116b15a90>
2025-09-07 20:13:46 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:13:46 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:13:46 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a4b280>
2025-09-07 20:13:46 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a4b280>
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:13:46 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'G\x0btJ' [text, 4 bytes]
DEBUG:    < PONG 'G\x0btJ' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b b4 4c 91 [binary, 4 bytes]
DEBUG:    < PONG 9b b4 4c 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 2f 70 00 [binary, 4 bytes]
DEBUG:    < PONG 93 2f 70 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64597 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301241943}' [46 bytes]
2025-09-07 20:14:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301241943}
2025-09-07 20:14:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301241943}
INFO:     127.0.0.1:64599 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301243121}' [46 bytes]
2025-09-07 20:14:03 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301243121}
2025-09-07 20:14:03 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301243121}
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:14:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449160'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_5dc1975ee7ba71b9b5259ae19febcb26'), (b'openai-processing-ms', b'23593'), (b'x-envoy-upstream-service-time', b'23596'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb45726aec7e5a-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:14:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449160'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_5dc1975ee7ba71b9b5259ae19febcb26'), (b'openai-processing-ms', b'23593'), (b'x-envoy-upstream-service-time', b'23596'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb45726aec7e5a-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:14:04 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:14:04 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:14:04 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
2025-09-07 20:14:04 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
INFO:     127.0.0.1:64589 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:14:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449172'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'110ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_dd7a0c49e5d53785d7b5ddba3024520c'), (b'openai-processing-ms', b'17618'), (b'x-envoy-upstream-service-time', b'17620'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb459c5862c3e1-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:14:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449172'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'110ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_dd7a0c49e5d53785d7b5ddba3024520c'), (b'openai-processing-ms', b'17618'), (b'x-envoy-upstream-service-time', b'17620'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb459c5862c3e1-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:14:04 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:14:04 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:14:04 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:14:04 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
2025-09-07 20:14:04 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
INFO:     127.0.0.1:64593 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c 36 f8 c5 [binary, 4 bytes]
DEBUG:    < PONG 4c 36 f8 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae c0 00 66 [binary, 4 bytes]
DEBUG:    < PONG ae c0 00 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 67 fd af [binary, 4 bytes]
DEBUG:    < PONG 7c 67 fd af [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 22 f4 ec [binary, 4 bytes]
DEBUG:    < PONG 8a 22 f4 ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 89 0e 1e [binary, 4 bytes]
DEBUG:    < PONG 73 89 0e 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64605 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301271943}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 f8 de 26 [binary, 4 bytes]
2025-09-07 20:14:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301271943}
2025-09-07 20:14:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301271943}
DEBUG:    < PONG c5 f8 de 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea be 23 d4 [binary, 4 bytes]
DEBUG:    < PONG ea be 23 d4 [binary, 4 bytes]
INFO:     127.0.0.1:64607 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 20:14:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:14:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:14:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:14:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:14:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:14:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:14:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:14:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 3d 14 96 [binary, 4 bytes]
DEBUG:    < PONG d6 3d 14 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64620 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: pqlMvM2zkYiQ25tOat1TcA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64622) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:14:45 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:14:45 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: /roCRDLQ1k0IS/GoZ/O3snjelPw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:14:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:14:45.287238"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:14:45.287238"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:14:45.287238"}' [128 bytes]
INFO:     127.0.0.1:64620 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: R/mo2rmv7jn1TY4zSzI8Dg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64624) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:14:45 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:14:45 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:14:45.369006"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:14:45.369006"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:14:45.369006"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: vH+hJd8V2eRJAaPKK+biw1UWME4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:14:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:14:45.369006"}' [128 bytes]
INFO:     127.0.0.1:64620 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:64620 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x00 S.' [text, 4 bytes]
DEBUG:    < PONG '\x00 S.' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 74 b1 95 ad [binary, 4 bytes]
DEBUG:    < PONG 74 b1 95 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64627 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301301943}' [46 bytes]
2025-09-07 20:15:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301301943}
2025-09-07 20:15:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301301943}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 9b 10 27 [binary, 4 bytes]
DEBUG:    < PONG 58 9b 10 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a a4 be 5f [binary, 4 bytes]
DEBUG:    < PONG 8a a4 be 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 fb e9 ad [binary, 4 bytes]
DEBUG:    < PONG 31 fb e9 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64642 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 b3 25 6b [binary, 4 bytes]
DEBUG:    < PONG 49 b3 25 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64647 - "OPTIONS /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
2025-09-07 20:15:21 - app.api.v1.endpoints.chat - INFO - Generating survey template for: employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:15:21 - app.api.v1.endpoints.chat - INFO - Generating survey template for: employee satisfaction with 8 questions and metrics and classifiers for my team...
2025-09-07 20:15:21 - httpcore.connection - DEBUG - close.started
2025-09-07 20:15:21 - httpcore.connection - DEBUG - close.started
2025-09-07 20:15:21 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:15:21 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:15:21 - httpcore.connection - DEBUG - close.started
2025-09-07 20:15:21 - httpcore.connection - DEBUG - close.started
2025-09-07 20:15:21 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:15:21 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:15:21 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:15:21 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301321739}' [46 bytes]
2025-09-07 20:15:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301321739}
2025-09-07 20:15:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301321739}
2025-09-07 20:15:21 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a4b760>
2025-09-07 20:15:21 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a4b760>
2025-09-07 20:15:21 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:15:21 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11002b890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:15:21 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a4bd00>
2025-09-07 20:15:21 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116a4bd00>
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:15:21 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e a8 67 b3 [binary, 4 bytes]
DEBUG:    < PONG 2e a8 67 b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e ff b6 d0 [binary, 4 bytes]
DEBUG:    < PONG 8e ff b6 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64654 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301331943}' [46 bytes]
2025-09-07 20:15:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301331943}
2025-09-07 20:15:31 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301331943}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 66 66 88 [binary, 4 bytes]
DEBUG:    < PONG bd 66 66 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 44 33 db [binary, 4 bytes]
DEBUG:    < PONG 76 44 33 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:15:42 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449165'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_a4f72cf53ec543de144c6a56a9087071'), (b'openai-processing-ms', b'20530'), (b'x-envoy-upstream-service-time', b'20535'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb47ed7ebd75f2-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:15:42 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449165'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'111ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_a4f72cf53ec543de144c6a56a9087071'), (b'openai-processing-ms', b'20530'), (b'x-envoy-upstream-service-time', b'20535'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb47ed7ebd75f2-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:15:42 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:15:42 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:15:42 - app.services.openai_service - ERROR - Error generating comprehensive survey: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:15:42 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
2025-09-07 20:15:42 - app.api.v1.endpoints.chat - INFO - Successfully generated survey with 4 questions, 2 metrics, and 4 classifiers
INFO:     127.0.0.1:64647 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '*m}O' [text, 4 bytes]
DEBUG:    < PONG '*m}O' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64658 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING c4 f0 6a 70 [binary, 4 bytes]
DEBUG:    < PONG c4 f0 6a 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301351910}' [46 bytes]
2025-09-07 20:15:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301351910}
2025-09-07 20:15:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301351910}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 64 b1 14 [binary, 4 bytes]
DEBUG:    < PONG bc 64 b1 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 32 5d 9a [binary, 4 bytes]
DEBUG:    < PONG b4 32 5d 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64666 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301361943}' [46 bytes]
2025-09-07 20:16:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301361943}
2025-09-07 20:16:01 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301361943}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 8f 59 0f [binary, 4 bytes]
DEBUG:    < PONG b2 8f 59 0f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d 64 47 e6 [binary, 4 bytes]
DEBUG:    < PONG 6d 64 47 e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 22 a2 62 [binary, 4 bytes]
DEBUG:    < PONG 5e 22 a2 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64673 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 32 de 95 [binary, 4 bytes]
DEBUG:    < PONG 8f 32 de 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301381069}' [46 bytes]
2025-09-07 20:16:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301381069}
2025-09-07 20:16:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301381069}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 73 5f 99 [binary, 4 bytes]
DEBUG:    < PONG 82 73 5f 99 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 c9 88 42 [binary, 4 bytes]
DEBUG:    < PONG c5 c9 88 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:64697 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: BwsgvSXgEDFfyeyXlatvdg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64699) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:16:31 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:16:31 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:16:31.961601"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: x++k/ioP86DZJ50u1KKdbSv9F4Y=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:16:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 20:16:31 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:31 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:31 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:16:31 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:16:31.961601"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
INFO:     127.0.0.1:64701 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: QApxRyGUJ58wuifX34f9xA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64707) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:16:35 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:16:35 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:16:35.156800"}' [128 bytes]
2025-09-07 20:16:35 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 20:16:35 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:16:35.156800"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:16:35.156800"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 2JL56i9Dgt/wsEWiyOi+TfN+9SI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:16:34 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:16:35.156800"}' [128 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:16:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:16:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:16:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:16:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Å«\x12\t' [text, 4 bytes]
DEBUG:    < PONG 'Å«\x12\t' [text, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 20:16:46 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/services/openai_service.py')}
WARNING:  WatchFiles detected changes in 'app/services/openai_service.py'. Reloading...
INFO:     Shutting down
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    ! failing connection with code 1012
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1012 (service restart) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
2025-09-07 20:16:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:16:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:16:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:16:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:16:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [53386]
ðŸ›‘ Shutting down Enculture Backend API...
INFO:     Started server process [54689]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:64720 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: KE68ag4jECNQKYcqSG+OQQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64722) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:16:48 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:16:48 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: eQ7XA8VVt8x4M8pgqpztUbcZl9I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:16:48 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:16:48.021305"}' [128 bytes]
INFO:     127.0.0.1:64724 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 d3 07 65 [binary, 4 bytes]
DEBUG:    < PONG d4 d3 07 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64758 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301438025}' [46 bytes]
2025-09-07 20:17:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301438025}
2025-09-07 20:17:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301438025}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 3f 8d 99 [binary, 4 bytes]
DEBUG:    < PONG 24 3f 8d 99 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64800 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301468026}' [46 bytes]
2025-09-07 20:17:48 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301468026}
2025-09-07 20:17:48 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301468026}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3f d5 1e 90 [binary, 4 bytes]
DEBUG:    < PONG 3f d5 1e 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 1c 2e 97 [binary, 4 bytes]
DEBUG:    < PONG ca 1c 2e 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64802 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301498025}' [46 bytes]
2025-09-07 20:18:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301498025}
2025-09-07 20:18:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301498025}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 54 5e e7 [binary, 4 bytes]
DEBUG:    < PONG 04 54 5e e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64831 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301528026}' [46 bytes]
2025-09-07 20:18:48 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301528026}
2025-09-07 20:18:48 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301528026}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 e8 85 64 [binary, 4 bytes]
DEBUG:    < PONG 59 e8 85 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ad 0d 41 9a [binary, 4 bytes]
DEBUG:    < PONG ad 0d 41 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64856 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301558027}' [46 bytes]
2025-09-07 20:19:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301558027}
2025-09-07 20:19:18 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301558027}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 51 d9 b1 [binary, 4 bytes]
DEBUG:    < PONG ed 51 d9 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:64879 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1AuK6S3LIF5Uz2qOs7MKsw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64882) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:19:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:19:40 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:19:40 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 20:19:40 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gGY4MMUJJ796xCIUHnsVLa7Z0ho=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:19:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 20:19:40 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:19:40 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:19:40 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:19:40 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64880 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:19:40.087799"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 12S5DKhAMwXbHzOZ8LoFOA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64884) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:19:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:19:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rWEhAXOT4g3DzUmjkMzwcziXGX8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:19:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:19:43.200170"}' [128 bytes]
2025-09-07 20:19:43 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 20:19:43 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:64880 - "GET /health HTTP/1.1" 200 OK
2025-09-07 20:19:43 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:19:43 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:19:43 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:19:43 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: OIpl2BLnJ+LMTacrc93+uQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64886) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:19:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:19:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: waXonE51TyLhXnGikC4XyOZ/vC4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:19:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:19:43.386196"}' [128 bytes]
INFO:     127.0.0.1:64879 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 11 20 37 [binary, 4 bytes]
DEBUG:    < PONG 9b 11 20 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64890 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301613399}' [46 bytes]
2025-09-07 20:20:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301613399}
2025-09-07 20:20:13 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301613399}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 83 89 c0 [binary, 4 bytes]
DEBUG:    < PONG 5e 83 89 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64896 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c 57 a9 d0 [binary, 4 bytes]
DEBUG:    < PONG 3c 57 a9 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301643398}' [46 bytes]
2025-09-07 20:20:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301643398}
2025-09-07 20:20:43 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301643398}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:64899 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: u+Gu7JSWMD+Fl8HDJx5WSw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64902) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:20:50 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:20:50 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 42ND88aTbMu8PFUGYUqAnVqlvM8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:20:49 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:20:50.067148"}' [128 bytes]
2025-09-07 20:20:50 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 20:20:50 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 20:20:50 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:20:50 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:20:50 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:20:50 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64903 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 7d 92 32 [binary, 4 bytes]
DEBUG:    < PONG 68 7d 92 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64915 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301680082}' [46 bytes]
2025-09-07 20:21:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301680082}
2025-09-07 20:21:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301680082}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 ba 3c ca [binary, 4 bytes]
DEBUG:    < PONG 99 ba 3c ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:21:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:21:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:21:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:21:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64931 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: LaMlZOd40EjVpUhwkZEHwA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64933) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:21:32 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:21:32 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: I3SjwgnOHpctNa8NtCjfawejsog=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:21:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:21:32.164536"}' [128 bytes]
INFO:     127.0.0.1:64935 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 de d3 cd [binary, 4 bytes]
DEBUG:    < PONG 26 de d3 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64939 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301722180}' [46 bytes]
2025-09-07 20:22:02 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301722180}
2025-09-07 20:22:02 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301722180}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 30 17 a7 [binary, 4 bytes]
DEBUG:    < PONG e9 30 17 a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:22:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:22:15 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:22:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:22:15 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64944 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Y3MNQCN+8BimI2RmtwN6NQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64946) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:22:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:22:15 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: taeXvY/935nurJZ26Npmbqy+AVg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:22:14 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:22:15.101514"}' [128 bytes]
INFO:     127.0.0.1:64948 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 b6 55 a9 [binary, 4 bytes]
DEBUG:    < PONG 36 b6 55 a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:64965 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301765123}' [46 bytes]
2025-09-07 20:22:45 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301765123}
2025-09-07 20:22:45 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301765123}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a f2 fd 76 [binary, 4 bytes]
DEBUG:    < PONG 3a f2 fd 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:22:55 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:22:55 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:22:55 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:22:55 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:64971 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: jyjcUzd2Aj7szqW3alxrtw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 64973) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:22:55 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:22:55 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: tq4MteudAUf4/s120bHRZoeWeFs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:22:54 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:22:55.346326"}' [128 bytes]
INFO:     127.0.0.1:64975 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:64975 - "OPTIONS /api/v1/chat/ai-edit-section HTTP/1.1" 200 OK
2025-09-07 20:22:55 - app.api.v1.endpoints.chat - INFO - AI editing section 'outcomes' with request: can you generate better desired outcomes...
2025-09-07 20:22:55 - app.api.v1.endpoints.chat - INFO - AI editing section 'outcomes' with request: can you generate better desired outcomes...
2025-09-07 20:22:56 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:22:56 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:22:56 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1169cf970>
2025-09-07 20:22:56 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1169cf970>
2025-09-07 20:22:56 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1102fc890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:22:56 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1102fc890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:22:56 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1168b5a60>
2025-09-07 20:22:56 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1168b5a60>
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:22:56 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:23:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449586'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'55ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_1dc7d58ab020e9523ca609338d8f01b0'), (b'openai-processing-ms', b'3743'), (b'x-envoy-upstream-service-time', b'3748'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=qkXZY8mdYrYSVRE5C_fjmJAvKiuDrs3o6f0Dnsbx5h8-1757301780-1.0.1.1-a6u145g0PeX.vieUOrrTF_yvR1KQoiBg8QzuUiphw4J3JpM50dMygQeBeQButZ.wyWMyFWLz6aqGWulgksVeKR5noRUol0zmjkD2Lo7m3AE; path=/; expires=Mon, 08-Sep-25 03:53:00 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=fFqhPS0bZIg3t2FB22pzoWMnKMlHN9595z6chNY7Pas-1757301780180-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb5305ff7d757b-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:23:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449586'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'55ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_1dc7d58ab020e9523ca609338d8f01b0'), (b'openai-processing-ms', b'3743'), (b'x-envoy-upstream-service-time', b'3748'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=qkXZY8mdYrYSVRE5C_fjmJAvKiuDrs3o6f0Dnsbx5h8-1757301780-1.0.1.1-a6u145g0PeX.vieUOrrTF_yvR1KQoiBg8QzuUiphw4J3JpM50dMygQeBeQButZ.wyWMyFWLz6aqGWulgksVeKR5noRUol0zmjkD2Lo7m3AE; path=/; expires=Mon, 08-Sep-25 03:53:00 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=fFqhPS0bZIg3t2FB22pzoWMnKMlHN9595z6chNY7Pas-1757301780180-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb5305ff7d757b-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:23:00 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:23:00 - app.api.v1.endpoints.chat - ERROR - Error generating AI outcomes: Expecting value: line 1 column 1 (char 0)
2025-09-07 20:23:00 - app.api.v1.endpoints.chat - ERROR - Error generating AI outcomes: Expecting value: line 1 column 1 (char 0)
INFO:     127.0.0.1:64975 - "POST /api/v1/chat/ai-edit-section HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 3c 0a 76 [binary, 4 bytes]
DEBUG:    < PONG 8c 3c 0a 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65008 - "OPTIONS /api/v1/chat/enhance-survey-context HTTP/1.1" 200 OK
2025-09-07 20:23:23 - httpcore.connection - DEBUG - close.started
2025-09-07 20:23:23 - httpcore.connection - DEBUG - close.started
2025-09-07 20:23:23 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:23:23 - httpcore.connection - DEBUG - close.complete
2025-09-07 20:23:23 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:23:23 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 20:23:23 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116d00310>
2025-09-07 20:23:23 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116d00310>
2025-09-07 20:23:23 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1102fc890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:23:23 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1102fc890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 20:23:23 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116d00280>
2025-09-07 20:23:23 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116d00280>
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 20:23:23 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301805370}' [46 bytes]
2025-09-07 20:23:25 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301805370}
2025-09-07 20:23:25 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301805370}
INFO:     127.0.0.1:65011 - "GET /health HTTP/1.1" 200 OK
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:23:31 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449070'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'124ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_ba9995d7915ee67c2e1da396cb0dd253'), (b'openai-processing-ms', b'7788'), (b'x-envoy-upstream-service-time', b'7792'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb53afba8bb9bc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 08 Sep 2025 03:23:31 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449070'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'124ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_ba9995d7915ee67c2e1da396cb0dd253'), (b'openai-processing-ms', b'7788'), (b'x-envoy-upstream-service-time', b'7792'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97bb53afba8bb9bc-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 20:23:31 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:65008 - "POST /api/v1/chat/enhance-survey-context HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 0e 84 a1 [binary, 4 bytes]
DEBUG:    < PONG 9d 0e 84 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:65018 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: TCklKD0oYj6HaPQh2tQ3OQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65020) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:23:51 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:23:51 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:23:51 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 20:23:51 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Wl4ID4YUl/PhAp7giHfY+bjjViU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:23:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:23:51.241453"}' [128 bytes]
2025-09-07 20:23:51 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:23:51 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:23:51 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:23:51 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:65022 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING "{#'G" [text, 4 bytes]
DEBUG:    < PONG "{#'G" [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65030 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301861252}' [46 bytes]
2025-09-07 20:24:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301861252}
2025-09-07 20:24:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301861252}
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 10 6f 6e [binary, 4 bytes]
DEBUG:    < PONG db 10 6f 6e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65037 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c 2a d4 ef [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301891252}' [46 bytes]
DEBUG:    < PONG 0c 2a d4 ef [binary, 4 bytes]
2025-09-07 20:24:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301891252}
2025-09-07 20:24:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301891252}
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 d4 2c 02 [binary, 4 bytes]
DEBUG:    < PONG d1 d4 2c 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65042 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301921252}' [46 bytes]
2025-09-07 20:25:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301921252}
2025-09-07 20:25:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301921252}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 fa 8c 63 [binary, 4 bytes]
DEBUG:    < PONG 46 fa 8c 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 38 e0 12 [binary, 4 bytes]
DEBUG:    < PONG 96 38 e0 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301951296}' [46 bytes]
2025-09-07 20:25:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301951296}
2025-09-07 20:25:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301951296}
INFO:     127.0.0.1:65081 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 67 3e 03 [binary, 4 bytes]
DEBUG:    < PONG f9 67 3e 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757301981252}' [46 bytes]
INFO:     127.0.0.1:65125 - "GET /health HTTP/1.1" 200 OK
2025-09-07 20:26:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301981252}
2025-09-07 20:26:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757301981252}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 55 ab af [binary, 4 bytes]
DEBUG:    < PONG f8 55 ab af [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65185 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302011255}' [46 bytes]
2025-09-07 20:26:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302011255}
2025-09-07 20:26:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302011255}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'WAS1' [text, 4 bytes]
DEBUG:    < PONG 'WAS1' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING "'7\x00q" [text, 4 bytes]
DEBUG:    < PONG "'7\x00q" [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65226 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302041254}' [46 bytes]
2025-09-07 20:27:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302041254}
2025-09-07 20:27:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302041254}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 eb d9 7e [binary, 4 bytes]
DEBUG:    < PONG e8 eb d9 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65246 - "GET /api/v1/chat-threads/threads/5f0f9caf-daaa-4883-8e15-2e650684ad74 HTTP/1.1" 200 OK
INFO:     127.0.0.1:65246 - "GET /api/v1/chat-threads/threads/f4ad082b-b8a5-4421-8f8e-cf018e6405b7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:65246 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302071253}' [46 bytes]
2025-09-07 20:27:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302071253}
2025-09-07 20:27:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302071253}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b fb a1 56 [binary, 4 bytes]
DEBUG:    < PONG 7b fb a1 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 d8 b8 32 [binary, 4 bytes]
DEBUG:    < PONG c8 d8 b8 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65277 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302101253}' [46 bytes]
2025-09-07 20:28:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302101253}
2025-09-07 20:28:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302101253}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 a8 a7 4c [binary, 4 bytes]
DEBUG:    < PONG 01 a8 a7 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65315 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302131253}' [46 bytes]
2025-09-07 20:28:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302131253}
2025-09-07 20:28:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302131253}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 e8 c3 57 [binary, 4 bytes]
DEBUG:    < PONG 47 e8 c3 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 d6 c7 49 [binary, 4 bytes]
DEBUG:    < PONG e7 d6 c7 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65355 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302161253}' [46 bytes]
2025-09-07 20:29:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302161253}
2025-09-07 20:29:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302161253}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ')my4' [text, 4 bytes]
DEBUG:    < PONG ')my4' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65370 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302191253}' [46 bytes]
2025-09-07 20:29:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302191253}
2025-09-07 20:29:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302191253}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x08-^c' [text, 4 bytes]
DEBUG:    < PONG '\x08-^c' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 ab 8e c5 [binary, 4 bytes]
DEBUG:    < PONG 09 ab 8e c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65390 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302221253}' [46 bytes]
2025-09-07 20:30:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302221253}
2025-09-07 20:30:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302221253}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:30:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:30:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:30:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:30:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:65390 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: LzUFfKPsFerzm0M1HtvOPg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65395) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:30:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:30:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: PYOfWASDX7+6zDTbDUVinZHQxzU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:30:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:30:24.027439"}' [128 bytes]
INFO:     127.0.0.1:65390 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:30:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:30:30 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:30:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:30:30 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:65400 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 8cihfrlWEBA0JUl5DsWgrw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65402) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:30:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:30:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: bcFU4CLP7M8XB4Xwi2kWewfaARE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:30:29 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:30:30.918600"}' [128 bytes]
INFO:     127.0.0.1:65404 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:30:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:30:32 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:30:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:30:32 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:65404 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: GnvK+gU9V7tN+Qe5r2y4zg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65407) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:30:32 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:30:32 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: O7Lm40o6kKhqqXk5qCZW2hg5Zxs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:30:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:65400 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:30:32.596274"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'RV#V' [text, 4 bytes]
DEBUG:    < PONG 'RV#V' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65421 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302262621}' [46 bytes]
2025-09-07 20:31:02 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302262621}
2025-09-07 20:31:02 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302262621}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 60 3c 81 [binary, 4 bytes]
DEBUG:    < PONG ab 60 3c 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:31:13 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:31:13 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:31:13 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:31:13 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:65458 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: QHhmBUpOaYFiitN3unM4hg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65460) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:31:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:31:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:65458 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 61hNgz7ZvlWRV1IugsFUv8SXYFg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:31:29 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:31:30.926607"}' [128 bytes]
INFO:     127.0.0.1:65462 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:65458 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 3hTGP/9qhDm3+aZgiUayaw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65467) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:31:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:31:30 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:31:30.987068"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: H2aJnCvyb4Q/UivX5skusTy3B1M=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:31:29 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:31:30.987068"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:31:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:31:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:31:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:31:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 7e 8a c3 [binary, 4 bytes]
DEBUG:    < PONG c6 7e 8a c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65493 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: LwkgujiCU2nZzCi0beBOLA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65495) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:31:58 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:31:58 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:65493 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: qQuUWhxBfnY65NTECGYBxQ+sJDw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:31:57 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:31:58.679374"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:31:58.679374"}' [128 bytes]
DEBUG:    = connection is CONNECTING
INFO:     127.0.0.1:65497 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: bRFi4cpK3yKkalxOYboGEA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65501) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:31:58 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:31:58 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:31:58.806060"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:31:58.806060"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: f/+f8Nsz0kPb1tSDNi7sPzbX2zA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:31:58 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:31:58.806060"}' [128 bytes]
INFO:     127.0.0.1:65493 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:32:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:32:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:32:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:32:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 27 ed c5 [binary, 4 bytes]
DEBUG:    < PONG 50 27 ed c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'R{Ó”' [text, 4 bytes]
DEBUG:    < PONG 'R{Ó”' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'T\x00\x14\\' [text, 4 bytes]
DEBUG:    < PONG 'T\x00\x14\\' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:65515 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: tPi8h/KSzMRSe0lPPUOtYw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65517) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:32:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:32:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: YQPyxYlM6KMRfEhKru6LRAdaxW0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:32:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:65521 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:32:33.787776"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:32:33.787776"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:32:33.787776"}' [128 bytes]
INFO:     127.0.0.1:65519 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     127.0.0.1:65521 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: zpluBnMbQl3gXwf6a28ppA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65523) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:32:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:32:33 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:32:33.836943"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:32:33.836943"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:32:33.836943"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: CjFbhgbOgBNDWwsu/RMKEhhEkV8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:32:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:32:33.836943"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 6b c0 d9 [binary, 4 bytes]
DEBUG:    < PONG 98 6b c0 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:32:39 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:32:39 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:32:39 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:32:39 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 3f b0 c6 [binary, 4 bytes]
DEBUG:    < PONG f7 3f b0 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 28 9f fe [binary, 4 bytes]
DEBUG:    < PONG f8 28 9f fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'SLP\x04' [text, 4 bytes]
DEBUG:    < PONG 'SLP\x04' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 07 0a 72 [binary, 4 bytes]
DEBUG:    < PONG 8d 07 0a 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f d3 f8 9e [binary, 4 bytes]
DEBUG:    < PONG 4f d3 f8 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 29 57 cc [binary, 4 bytes]
DEBUG:    < PONG 54 29 57 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:49185 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1GLvg/MMClD0Ec57XuIseQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 49187) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:33:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:33:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.415848"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.415848"}' [128 bytes]
INFO:     127.0.0.1:49185 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: s+wl/3Qvf8tt7MfU5dpT0NIMcdI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:33:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.415848"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.415848"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ZNzyPx0j7/ORjicpFoLYVA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:49189 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 49193) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:33:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:33:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.524407"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.524407"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.524407"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.524407"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7ZuR6ZSxPpcd2EIGKlF4me34A6g=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:33:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:24.524407"}' [128 bytes]
INFO:     127.0.0.1:49185 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 ce 26 d2 [binary, 4 bytes]
DEBUG:    < PONG b1 ce 26 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 b3 ae de [binary, 4 bytes]
DEBUG:    < PONG 85 b3 ae de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 1c b1 6f [binary, 4 bytes]
DEBUG:    < PONG 67 1c b1 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '`ÃŸ\x1f' [text, 4 bytes]
DEBUG:    < PONG '`ÃŸ\x1f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4b d8 e1 69 [binary, 4 bytes]
DEBUG:    < PONG 4b d8 e1 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 94 2d 47 [binary, 4 bytes]
DEBUG:    < PONG 0b 94 2d 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 bb 01 4e [binary, 4 bytes]
DEBUG:    < PONG 41 bb 01 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:49207 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757302434601}' [46 bytes]
2025-09-07 20:33:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302434601}
2025-09-07 20:33:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757302434601}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 20:33:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:33:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 20:33:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 20:33:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:49212 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: CYw5GolTDAp1nWVuuBGy/Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 49214) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 20:33:58 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 20:33:58 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:58.362427"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:58.362427"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ZGY1PDtkZJFi54TG0jgweLLnqaA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Mon, 08 Sep 2025 03:33:57 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:58.362427"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:58.362427"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T20:33:58.362427"}' [128 bytes]
INFO:     127.0.0.1:49212 - "GET /api/v1/chat-threads/threads/recent?limit=10&user_id=michael_chen HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee d3 1f 39 [binary, 4 bytes]
DEBUG:    < PONG ee d3 1f 39 [binary, 4 bytes]
DEBUG:    % received keepalive pong
