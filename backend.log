INFO:     Will watch for changes in these directories: ['/Users/naman/Enculture-Intelligence-Platform/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [62402] using WatchFiles
INFO:     Started server process [62423]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:56910 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:56912 - "GET /health HTTP/1.1" 200 OK
2025-09-07 05:55:02 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 05:55:02 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 05:55:02 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162fa670>
2025-09-07 05:55:02 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1162fa670>
2025-09-07 05:55:02 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10ff179e0> server_hostname='api.openai.com' timeout=5.0
2025-09-07 05:55:02 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10ff179e0> server_hostname='api.openai.com' timeout=5.0
2025-09-07 05:55:02 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116128af0>
2025-09-07 05:55:02 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116128af0>
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:02 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:08 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_7574ffca79ce54959d510b692c0cc1d2'), (b'openai-processing-ms', b'6116'), (b'x-envoy-upstream-service-time', b'6119'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_yJYmSEqKQILdqIg9Ck1ch2yfzr0gkddG.7cCpeNdsM-1757249708-1.0.1.1-PRToX8A.Ojk3SbdEQafAnk50btNj.dnLL43mh31nvETeomwF9yz0xRC62_fJefL1wnVh6vF39ps8TVK_EK_sCC_9dZ.fkYsQceH4ZoXfxOA; path=/; expires=Sun, 07-Sep-25 13:25:08 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=gT6nLyUkXKY6y7Awi1nxIrKbrLlxYb07YWB3gagNjK4-1757249708621-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65bafef7d6c8e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:08 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_7574ffca79ce54959d510b692c0cc1d2'), (b'openai-processing-ms', b'6116'), (b'x-envoy-upstream-service-time', b'6119'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_yJYmSEqKQILdqIg9Ck1ch2yfzr0gkddG.7cCpeNdsM-1757249708-1.0.1.1-PRToX8A.Ojk3SbdEQafAnk50btNj.dnLL43mh31nvETeomwF9yz0xRC62_fJefL1wnVh6vF39ps8TVK_EK_sCC_9dZ.fkYsQceH4ZoXfxOA; path=/; expires=Sun, 07-Sep-25 13:25:08 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=gT6nLyUkXKY6y7Awi1nxIrKbrLlxYb07YWB3gagNjK4-1757249708621-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65bafef7d6c8e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56914 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:56947 - "POST /api/v1/chat/threads HTTP/1.1" 200 OK
2025-09-07 05:55:08 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 00f84e6a-4f91-45bf-811f-14a199342577
2025-09-07 05:55:08 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 00f84e6a-4f91-45bf-811f-14a199342577
INFO:     127.0.0.1:56949 - "POST /api/v1/chat/stream-with-thread?thread_id=00f84e6a-4f91-45bf-811f-14a199342577&prompt=hello HTTP/1.1" 200 OK
2025-09-07 05:55:08 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 05:55:08 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:08 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:08 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 05:55:09 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_aee280a6e442d249d487d53d09390b26'), (b'openai-processing-ms', b'910'), (b'x-envoy-upstream-service-time', b'1128'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65bd85b8e6c8e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_aee280a6e442d249d487d53d09390b26'), (b'openai-processing-ms', b'910'), (b'x-envoy-upstream-service-time', b'1128'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65bd85b8e6c8e-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 05:55:10 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 05:55:10 - watchfiles.main - DEBUG - 2 changes detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/app/services/openai_service.py'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
WARNING:  WatchFiles detected changes in 'app/services/openai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [62423]
ðŸ›‘ Shutting down Enculture Backend API...
2025-09-07 05:55:11 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     Started server process [62543]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:56992 - "GET /api/v1/chat/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56992 - "GET /api/v1/chat/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56997 - "OPTIONS /api/v1/chat/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56992 - "OPTIONS /api/v1/chat/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56997 - "POST /api/v1/chat/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56992 - "POST /api/v1/chat/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:56992 - "GET /api/v1/chat/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56997 - "GET /api/v1/chat/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 05:55:13 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 05:55:14 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 05:55:14 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 05:55:14 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1161b6bb0>
2025-09-07 05:55:14 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1161b6bb0>
2025-09-07 05:55:14 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fcf29e0> server_hostname='api.openai.com' timeout=5.0
2025-09-07 05:55:14 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fcf29e0> server_hostname='api.openai.com' timeout=5.0
2025-09-07 05:55:14 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1161b6b80>
2025-09-07 05:55:14 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1161b6b80>
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:14 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:15 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_54844ae1b75b64112001bec148319f92'), (b'openai-processing-ms', b'6439'), (b'x-envoy-upstream-service-time', b'6442'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=oVF8s9GKam0I3OT6rheAzrs31cEJ5c7b5sEnwZD0HiY-1757249720-1.0.1.1-S_hKsARWupazxWpmNbUIQ8M1ST0oXQUW3si1UPMus1agmldNwNlCPAQwBkv.nWfJK5Rn_DXLQXUFoPK17aGl6DOSICtjLRMMhRZ0qJQjLgk; path=/; expires=Sun, 07-Sep-25 13:25:20 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=c2REWtkfW7sHbyFmof6W0iBqXszntyiyuFwzr7yDlhc-1757249720634-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65bf91a768399-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_54844ae1b75b64112001bec148319f92'), (b'openai-processing-ms', b'6439'), (b'x-envoy-upstream-service-time', b'6442'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=oVF8s9GKam0I3OT6rheAzrs31cEJ5c7b5sEnwZD0HiY-1757249720-1.0.1.1-S_hKsARWupazxWpmNbUIQ8M1ST0oXQUW3si1UPMus1agmldNwNlCPAQwBkv.nWfJK5Rn_DXLQXUFoPK17aGl6DOSICtjLRMMhRZ0qJQjLgk; path=/; expires=Sun, 07-Sep-25 13:25:20 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=c2REWtkfW7sHbyFmof6W0iBqXszntyiyuFwzr7yDlhc-1757249720634-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65bf91a768399-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56994 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:20 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
INFO:     127.0.0.1:57044 - "OPTIONS /api/v1/chat/threads/298d9ee0-2ee5-4797-bb68-bd7756189eab HTTP/1.1" 200 OK
INFO:     127.0.0.1:57044 - "DELETE /api/v1/chat/threads/298d9ee0-2ee5-4797-bb68-bd7756189eab HTTP/1.1" 200 OK
INFO:     127.0.0.1:57044 - "GET /api/v1/chat/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 05:55:23 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 05:55:25 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:57067 - "GET /api/v1/chat/threads/culture-002 HTTP/1.1" 200 OK
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_9f3bbb13b1d33504c4a0aa894082368a'), (b'openai-processing-ms', b'7842'), (b'x-envoy-upstream-service-time', b'7844'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65c23194d8399-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449500'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_9f3bbb13b1d33504c4a0aa894082368a'), (b'openai-processing-ms', b'7842'), (b'x-envoy-upstream-service-time', b'7844'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65c23194d8399-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 05:55:28 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:56994 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57105 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=culture-002&prompt=hows%20it%20going HTTP/1.1" 200 OK
2025-09-07 05:55:37 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread culture-002
2025-09-07 05:55:37 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread culture-002
INFO:     127.0.0.1:57105 - "POST /api/v1/chat/stream-with-thread?thread_id=culture-002&prompt=hows%20it%20going HTTP/1.1" 200 OK
2025-09-07 05:55:37 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 05:55:37 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 05:55:37 - httpcore.connection - DEBUG - close.started
2025-09-07 05:55:37 - httpcore.connection - DEBUG - close.started
2025-09-07 05:55:37 - httpcore.connection - DEBUG - close.complete
2025-09-07 05:55:37 - httpcore.connection - DEBUG - close.complete
2025-09-07 05:55:37 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 05:55:37 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 05:55:37 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660c130>
2025-09-07 05:55:37 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660c130>
2025-09-07 05:55:37 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fcf29e0> server_hostname='api.openai.com' timeout=5.0
2025-09-07 05:55:37 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fcf29e0> server_hostname='api.openai.com' timeout=5.0
2025-09-07 05:55:37 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116614bb0>
2025-09-07 05:55:37 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116614bb0>
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:55:37 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449157'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'112ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_e11707bf11caf453d66d5d78825fc384'), (b'openai-processing-ms', b'1815'), (b'x-envoy-upstream-service-time', b'1819'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65c894da4cb66-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:55:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449157'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'112ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_e11707bf11caf453d66d5d78825fc384'), (b'openai-processing-ms', b'1815'), (b'x-envoy-upstream-service-time', b'1819'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65c894da4cb66-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 05:55:39 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 05:55:40 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 05:55:40 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:57130 - "OPTIONS /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
2025-09-07 05:56:31 - app.api.v1.endpoints.chat - INFO - Generating survey template for: employee satisfaction survey...
2025-09-07 05:56:31 - app.api.v1.endpoints.chat - INFO - Generating survey template for: employee satisfaction survey...
2025-09-07 05:56:31 - httpcore.connection - DEBUG - close.started
2025-09-07 05:56:31 - httpcore.connection - DEBUG - close.started
2025-09-07 05:56:31 - httpcore.connection - DEBUG - close.complete
2025-09-07 05:56:31 - httpcore.connection - DEBUG - close.complete
2025-09-07 05:56:31 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 05:56:31 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 05:56:31 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11539eee0>
2025-09-07 05:56:31 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11539eee0>
2025-09-07 05:56:31 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fcf29e0> server_hostname='api.openai.com' timeout=5.0
2025-09-07 05:56:31 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fcf29e0> server_hostname='api.openai.com' timeout=5.0
2025-09-07 05:56:31 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660ef40>
2025-09-07 05:56:31 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11660ef40>
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:56:31 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:56:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449207'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'105ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_f35f91c87c34f3fa7ffeaf3fa6da56b9'), (b'openai-processing-ms', b'6194'), (b'x-envoy-upstream-service-time', b'6197'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65ddd4a6727a8-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 12:56:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449207'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'105ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_f35f91c87c34f3fa7ffeaf3fa6da56b9'), (b'openai-processing-ms', b'6194'), (b'x-envoy-upstream-service-time', b'6197'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b65ddd4a6727a8-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 05:56:37 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:57130 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
