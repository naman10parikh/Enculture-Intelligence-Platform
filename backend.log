INFO:     Will watch for changes in these directories: ['/Users/naman/Enculture-Intelligence-Platform/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [84685] using WatchFiles
INFO:     Started server process [84698]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ðŸš€ Starting Enculture Backend API...
Environment: development
Debug Mode: True
INFO:     127.0.0.1:58021 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58025 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /av80McpoVckW7G2Yp7Yvw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58015) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:11:34 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:11:34 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 1n4DZgaCDFSP7rlzu2dSIXxTueY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:11:34 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:11:34.638972"}' [128 bytes]
2025-09-07 12:11:34 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:11:34 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:11:35 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10e64aac0>
2025-09-07 12:11:35 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10e64aac0>
2025-09-07 12:11:35 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:11:35 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:11:35 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1143bff40>
2025-09-07 12:11:35 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1143bff40>
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:11:35 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:11:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_bfadda4f32f2d9417484368578322d65'), (b'openai-processing-ms', b'5628'), (b'x-envoy-upstream-service-time', b'5631'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=GoGqwvcMibzXPzyQ.g9DySB6CFG.SYEY0eXKQm4GzNM-1757272301-1.0.1.1-iv.2fYzod8DHMOaZP42rQljKuL7BbBfTnB9ATQTOygNQVV_lbydGE9JqM.PmPF_uP1mXNp3Kfpc4yCMB4ZdQlQWYPiS70GuY44V0WtpFH3w; path=/; expires=Sun, 07-Sep-25 19:41:41 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=6UJbZD3iAHIFxf8c0zhRQWF7TSJD6ALjvLHIJHIH9ms-1757272301011-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b883447c7cba27-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:11:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_bfadda4f32f2d9417484368578322d65'), (b'openai-processing-ms', b'5628'), (b'x-envoy-upstream-service-time', b'5631'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=GoGqwvcMibzXPzyQ.g9DySB6CFG.SYEY0eXKQm4GzNM-1757272301-1.0.1.1-iv.2fYzod8DHMOaZP42rQljKuL7BbBfTnB9ATQTOygNQVV_lbydGE9JqM.PmPF_uP1mXNp3Kfpc4yCMB4ZdQlQWYPiS70GuY44V0WtpFH3w; path=/; expires=Sun, 07-Sep-25 19:41:41 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=6UJbZD3iAHIFxf8c0zhRQWF7TSJD6ALjvLHIJHIH9ms-1757272301011-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b883447c7cba27-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:11:40 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:58027 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58049 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 12:11:41 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread b71572d1-6a32-4e98-921c-897201b5d46a
2025-09-07 12:11:41 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread b71572d1-6a32-4e98-921c-897201b5d46a
INFO:     127.0.0.1:58051 - "POST /api/v1/chat/stream-with-thread?thread_id=b71572d1-6a32-4e98-921c-897201b5d46a&prompt=hello HTTP/1.1" 200 OK
2025-09-07 12:11:41 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:11:41 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:11:41 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:11:41 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:11:42 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_ce7eb3218988c46c6cd917fe0065822d'), (b'openai-processing-ms', b'1288'), (b'x-envoy-upstream-service-time', b'1291'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8836b2e55ba27-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:11:42 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_ce7eb3218988c46c6cd917fe0065822d'), (b'openai-processing-ms', b'1288'), (b'x-envoy-upstream-service-time', b'1291'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8836b2e55ba27-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:11:42 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:11:43 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:11:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:11:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:11:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:11:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
2025-09-07 12:11:46 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: G3uY7Wes3rb+HVNiQ9TSRA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58092) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:11:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:11:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
INFO:     127.0.0.1:58094 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: LU3VWqdN/zYxCpA5tH2Oz8IxKbI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:11:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:11:46.721708"}' [128 bytes]
INFO:     127.0.0.1:58094 - "GET /chat/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58095 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58094 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58098 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58100 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 7bHBT1BrrDnPvTFgPdDIkw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58101) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:11:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:11:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7o87MnY7GvWEqZY8yittl8uvKLQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:11:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:11:46.743291"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:11:46.743291"}' [128 bytes]
INFO:     127.0.0.1:58100 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58100 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58098 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58100 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58098 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:11:46 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:11:51 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 4e cc 66 [binary, 4 bytes]
DEBUG:    < PONG b9 4e cc 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 fb 61 a6 [binary, 4 bytes]
DEBUG:    < PONG 24 fb 61 a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272337138}' [46 bytes]
2025-09-07 12:12:17 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272337138}
2025-09-07 12:12:17 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272337138}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 5f bf ab [binary, 4 bytes]
DEBUG:    < PONG a4 5f bf ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 b3 fe b0 [binary, 4 bytes]
DEBUG:    < PONG d2 b3 fe b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4b 4c dc 01 [binary, 4 bytes]
DEBUG:    < PONG 4b 4c dc 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 7c 66 f1 [binary, 4 bytes]
DEBUG:    < PONG cf 7c 66 f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272366776}' [46 bytes]
2025-09-07 12:12:46 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272366776}
2025-09-07 12:12:46 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272366776}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'w\\V\x1e' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 c7 1c 50 [binary, 4 bytes]
DEBUG:    < PONG 'w\\V\x1e' [text, 4 bytes]
DEBUG:    < PONG b9 c7 1c 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272396776}' [46 bytes]
2025-09-07 12:13:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272396776}
2025-09-07 12:13:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272396776}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 43 f4 2a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 11 d4 7c [binary, 4 bytes]
DEBUG:    < PONG 41 11 d4 7c [binary, 4 bytes]
DEBUG:    < PONG a4 43 f4 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 b7 97 ea [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b 9b 2e 83 [binary, 4 bytes]
DEBUG:    < PONG e5 b7 97 ea [binary, 4 bytes]
DEBUG:    < PONG 3b 9b 2e 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272426775}' [46 bytes]
2025-09-07 12:13:46 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272426775}
2025-09-07 12:13:46 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272426775}
INFO:     127.0.0.1:58297 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:58307 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: e7Zs1ZInmjT3YqtY6oqiYg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58310) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:14:01 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:14:01 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:14:01 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:14:01 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:01.777553"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Rg/RFAR+8HNJlKlUBtw5dSJS1x0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:14:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 12:14:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:14:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:14:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:14:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58308 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:01.777553"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     127.0.0.1:58307 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: jMpkWsgIUkVZ58h95imM9g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58312) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:14:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:14:04 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: r0Dirk0kGYMt1nYZvDfnjogHlTM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:14:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:04.852295"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:04.852295"}' [128 bytes]
2025-09-07 12:14:04 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:14:04 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Ä±+p' [text, 4 bytes]
DEBUG:    < PONG 'Ä±+p' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58314 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 37 5d a4 [binary, 4 bytes]
DEBUG:    < PONG ca 37 5d a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a eb f5 23 [binary, 4 bytes]
DEBUG:    < PONG 0a eb f5 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58346 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272474854}' [46 bytes]
2025-09-07 12:14:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272474854}
2025-09-07 12:14:34 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272474854}
INFO:     127.0.0.1:58359 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: RMbNqTCtq2RFFFU0cfvvZQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58363) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:14:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:14:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:42.491563"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:42.491563"}' [128 bytes]
INFO:     127.0.0.1:58359 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: kTLPzZPVR0o7ZoQhtUC6qTLTV1w=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:14:42 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:42.491563"}' [128 bytes]
INFO:     127.0.0.1:58359 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58359 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: tMHS7oz4XdAwsqP0hg74RQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58365) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:14:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:14:42 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:42.549388"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:42.549388"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:42.549388"}' [128 bytes]
INFO:     127.0.0.1:58359 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: n3vhvq+5wQbaAWyLg9si4hQIw5Q=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:14:42 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:14:42.549388"}' [128 bytes]
INFO:     127.0.0.1:58359 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 14 91 18 [binary, 4 bytes]
DEBUG:    < PONG ed 14 91 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58359 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58361 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 12:14:46 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 e3 f4 e1 [binary, 4 bytes]
DEBUG:    < PONG 43 e3 f4 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58361 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 12:14:47 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:58361 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58361 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:14:51 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:58373 - "GET /chat/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58375 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 37 05 d0 [binary, 4 bytes]
DEBUG:    < PONG b0 37 05 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 16 67 f9 [binary, 4 bytes]
DEBUG:    < PONG 23 16 67 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272504854}' [46 bytes]
2025-09-07 12:15:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272504854}
2025-09-07 12:15:04 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272504854}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 42 7b f1 [binary, 4 bytes]
DEBUG:    < PONG 87 42 7b f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58391 - "GET /api/v1/health HTTP/1.1" 404 Not Found
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 46 59 32 [binary, 4 bytes]
DEBUG:    < PONG 97 46 59 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58393 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272516358}' [46 bytes]
2025-09-07 12:15:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272516358}
2025-09-07 12:15:16 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272516358}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:15:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:16 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:15:16 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: JO+3xNoJ7bvUR3qxN0ATLw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58401) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:15:16 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:15:16 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
2025-09-07 12:15:16 - httpcore.connection - DEBUG - close.started
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lJsZXPU1LhOK1i9F5ocZihUmg64=
2025-09-07 12:15:16 - httpcore.connection - DEBUG - close.started
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:15:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:16.696711"}' [128 bytes]
2025-09-07 12:15:16 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:15:16 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:15:16 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:16.696711"}' [128 bytes]
2025-09-07 12:15:16 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:16.696711"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:16.696711"}' [128 bytes]
INFO:     127.0.0.1:58402 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58402 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:15:16 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a16790>
2025-09-07 12:15:16 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a16790>
2025-09-07 12:15:16 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:15:16 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:15:16 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a16700>
2025-09-07 12:15:16 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a16700>
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:15:16 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:15:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:15:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
2025-09-07 12:15:17 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:15:17 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Q9ZYwPZde/x/IJa+9dvAvw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58412) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:15:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:15:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:17.050715"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:17.050715"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:17.050715"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7CnqUmPwo4ZEEnNSts91HJuZoTQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:15:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58411 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:17.050715"}' [128 bytes]
INFO:     127.0.0.1:58411 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:15:17 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1148f6670>
2025-09-07 12:15:17 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1148f6670>
2025-09-07 12:15:17 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:15:17 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:15:17 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114859b50>
2025-09-07 12:15:17 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114859b50>
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:15:17 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a ca fa cd [binary, 4 bytes]
DEBUG:    < PONG 7a ca fa cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:58417 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 3fzU0kiGpXIzi59jh+mv3w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58420) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:15:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:15:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:15:22 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:15:22 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:22.690593"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:22.690593"}' [128 bytes]
2025-09-07 12:15:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:15:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: /BgU9Y+mVcsYVDuh2TTXM7DmJpg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:15:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:22.690593"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     127.0.0.1:58418 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     127.0.0.1:58417 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:15:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:15:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58422 - "GET /chat/health HTTP/1.1" 404 Not Found
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: P+EeetYGvaD58mEMsJZHQw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58426) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:15:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:15:22 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:22.884527"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:22.884527"}' [128 bytes]
2025-09-07 12:15:22 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:15:22 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7luPBtNXMmbhTSxS99SSiX3C0/k=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:15:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58425 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:22.884527"}' [128 bytes]
INFO:     127.0.0.1:58425 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:15:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_14cada3cdcc07693e5f3689d29bd7027'), (b'openai-processing-ms', b'6143'), (b'x-envoy-upstream-service-time', b'6145'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b888b009a3a375-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:15:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_14cada3cdcc07693e5f3689d29bd7027'), (b'openai-processing-ms', b'6143'), (b'x-envoy-upstream-service-time', b'6145'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b888b009a3a375-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:58407 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:15:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_6f20450e14337c79a8dfcd96b41f3676'), (b'openai-processing-ms', b'6962'), (b'x-envoy-upstream-service-time', b'6965'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b888adffc0ebc1-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:15:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449501'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'66ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_6f20450e14337c79a8dfcd96b41f3676'), (b'openai-processing-ms', b'6962'), (b'x-envoy-upstream-service-time', b'6965'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b888adffc0ebc1-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:15:23 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:58400 - "GET /api/v1/chat/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58430 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 8cxC9OxOz8P1tXdB72aOmQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58432) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:15:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:15:24 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:24.933411"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:24.933411"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:24.933411"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: qhRr8d5kAnf5Ti2IlrKiKXezSdg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:15:24 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:24.933411"}' [128 bytes]
INFO:     127.0.0.1:58433 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58430 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:15:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:15:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58407 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58407 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: x+KFHKo5Y5/TM6Y8qUdX6w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58435) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:15:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:15:25 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:25.257365"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:25.257365"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:25.257365"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: /JAPIG488fjCzl7LZaFVV/jYmxQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:15:24 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58407 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:25.257365"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 c7 51 7c [binary, 4 bytes]
DEBUG:    < PONG 22 c7 51 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c4 6b e1 fb [binary, 4 bytes]
DEBUG:    < PONG c4 6b e1 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed ba 5e 7d [binary, 4 bytes]
DEBUG:    < PONG ed ba 5e 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 b7 02 f6 [binary, 4 bytes]
DEBUG:    < PONG 47 b7 02 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea c9 67 2f [binary, 4 bytes]
DEBUG:    < PONG ea c9 67 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58443 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272554936}' [46 bytes]
2025-09-07 12:15:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272554936}
2025-09-07 12:15:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272554936}
INFO:     127.0.0.1:58445 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272555315}' [46 bytes]
2025-09-07 12:15:55 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272555315}
2025-09-07 12:15:55 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272555315}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:15:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:56 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:15:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:15:56 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: sLK/uc8cvpzjr+wejlvTpw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58447) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:15:56 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:15:56 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 6Adg5WcQu8rAL0dW+4v7w2MXQ4c=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:15:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:15:56.004897"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 d7 f4 ef [binary, 4 bytes]
DEBUG:    < PONG c8 d7 f4 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b da 0a a8 [binary, 4 bytes]
DEBUG:    < PONG 3b da 0a a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 bd 90 95 [binary, 4 bytes]
DEBUG:    < PONG d5 bd 90 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 b7 6c af [binary, 4 bytes]
DEBUG:    < PONG a4 b7 6c af [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:58457 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4clCyWj6TJ/0kgBLFhltbw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58460) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:16:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:16:17 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:16:17.607905"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:16:17.607905"}' [128 bytes]
2025-09-07 12:16:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:16:17 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4vd14NYYBQAn7KRjffC94Qnq9fg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:16:17 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 12:16:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:16:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:16:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:16:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:16:17.607905"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     127.0.0.1:58459 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     127.0.0.1:58457 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:16:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:16:17 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:16:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:16:17 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:58463 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58463 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: T0UGHNVaN0IOnA/rm6pTuw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58465) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:16:17 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:16:17 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lwmoCQZUkAglXAaMfth08Qjco/A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:16:17 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:16:17.947778"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: nZSOzr5LvJu95I4myKTOoQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58469) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:16:20 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:16:20 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:16:20.634433"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:16:20.634433"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 6hvM1PncDVqFUWsyBEKjMQW1O5o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:16:20 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:16:20.634433"}' [128 bytes]
2025-09-07 12:16:20 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:16:20 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 dc 3d 55 [binary, 4 bytes]
DEBUG:    < PONG 02 dc 3d 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 84 04 67 [binary, 4 bytes]
DEBUG:    < PONG 45 84 04 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58474 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=a1fb0f8f-3ba3-4512-ba90-28877eb173d3&prompt=hi HTTP/1.1" 200 OK
2025-09-07 12:16:29 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread a1fb0f8f-3ba3-4512-ba90-28877eb173d3
2025-09-07 12:16:29 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread a1fb0f8f-3ba3-4512-ba90-28877eb173d3
INFO:     127.0.0.1:58474 - "POST /api/v1/chat/stream-with-thread?thread_id=a1fb0f8f-3ba3-4512-ba90-28877eb173d3&prompt=hi HTTP/1.1" 200 OK
2025-09-07 12:16:29 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:16:29 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:16:29 - httpcore.connection - DEBUG - close.started
2025-09-07 12:16:29 - httpcore.connection - DEBUG - close.started
2025-09-07 12:16:29 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:16:29 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:16:29 - httpcore.connection - DEBUG - close.started
2025-09-07 12:16:29 - httpcore.connection - DEBUG - close.started
2025-09-07 12:16:29 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:16:29 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:16:29 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:16:29 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:16:29 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a29640>
2025-09-07 12:16:29 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a29640>
2025-09-07 12:16:29 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:16:29 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:16:29 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11490ca00>
2025-09-07 12:16:29 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11490ca00>
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:16:29 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:16:29 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:16:30 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_23c2b75bb6d09e8db0a9dfb8c6064676'), (b'openai-processing-ms', b'1574'), (b'x-envoy-upstream-service-time', b'1578'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b88a7228c83083-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:16:30 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449484'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'68ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_23c2b75bb6d09e8db0a9dfb8c6064676'), (b'openai-processing-ms', b'1574'), (b'x-envoy-upstream-service-time', b'1578'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b88a7228c83083-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:16:30 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:16:31 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:16:31 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:16:31 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a16280>
2025-09-07 12:16:31 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a16280>
2025-09-07 12:16:31 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10dff8900> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:16:31 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10dff8900> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:16:31 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a16bb0>
2025-09-07 12:16:31 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a16bb0>
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:16:31 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:16:31 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:16:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449856'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'19ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_3aa049918c34b526e44d6f1837c8a573'), (b'openai-processing-ms', b'447'), (b'x-envoy-upstream-service-time', b'450'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=S7tNlFgX3V.yibFMYzKsb8D.l2WvasG7YKAJGdfWdxI-1757272592-1.0.1.1-3dCFFQj8zzzvCcnvBaDSST.TFVnXDoKe_12WUFrNZeipR.Oiw0NuS0srUjYlOEPvzQ17NVLQdt4McLcIdsbN7NmOuEWca8.4zIixFxD0a5c; path=/; expires=Sun, 07-Sep-25 19:46:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=qvIIcdYF4WRzONh907p3wKlMj_gqEgWGUkUPrOaNn08-1757272592528-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b88a83de55ba4c-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:16:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449856'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'19ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_3aa049918c34b526e44d6f1837c8a573'), (b'openai-processing-ms', b'447'), (b'x-envoy-upstream-service-time', b'450'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=S7tNlFgX3V.yibFMYzKsb8D.l2WvasG7YKAJGdfWdxI-1757272592-1.0.1.1-3dCFFQj8zzzvCcnvBaDSST.TFVnXDoKe_12WUFrNZeipR.Oiw0NuS0srUjYlOEPvzQ17NVLQdt4McLcIdsbN7NmOuEWca8.4zIixFxD0a5c; path=/; expires=Sun, 07-Sep-25 19:46:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=qvIIcdYF4WRzONh907p3wKlMj_gqEgWGUkUPrOaNn08-1757272592528-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b88a83de55ba4c-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:16:32 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:58474 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:16:32 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:16:32 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 12:16:37 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e ce 58 ae [binary, 4 bytes]
DEBUG:    < PONG 4e ce 58 ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 81 73 44 [binary, 4 bytes]
DEBUG:    < PONG ff 81 73 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 52 29 96 [binary, 4 bytes]
DEBUG:    < PONG 18 52 29 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 42 1d fd [binary, 4 bytes]
DEBUG:    < PONG 7c 42 1d fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58483 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58485 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272608127}' [46 bytes]
2025-09-07 12:16:48 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757272608127}
2025-09-07 12:16:48 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757272608127}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272610640}' [46 bytes]
2025-09-07 12:16:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272610640}
2025-09-07 12:16:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272610640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 bd 89 6d [binary, 4 bytes]
DEBUG:    < PONG c1 bd 89 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 99 79 92 [binary, 4 bytes]
DEBUG:    < PONG fb 99 79 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\\Õ¨\x17' [text, 4 bytes]
DEBUG:    < PONG '\\Õ¨\x17' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf d2 ff 7a [binary, 4 bytes]
DEBUG:    < PONG bf d2 ff 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58498 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58500 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 49 a2 6e [binary, 4 bytes]
DEBUG:    < PONG a2 49 a2 6e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272638127}' [46 bytes]
2025-09-07 12:17:18 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757272638127}
2025-09-07 12:17:18 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757272638127}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272640640}' [46 bytes]
2025-09-07 12:17:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272640640}
2025-09-07 12:17:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272640640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 7a 71 b8 [binary, 4 bytes]
DEBUG:    < PONG 95 7a 71 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 cb dd ec [binary, 4 bytes]
DEBUG:    < PONG 52 cb dd ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 4d 47 b3 [binary, 4 bytes]
DEBUG:    < PONG 30 4d 47 b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 f2 5a 36 [binary, 4 bytes]
DEBUG:    < PONG 85 f2 5a 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 b5 06 91 [binary, 4 bytes]
DEBUG:    < PONG 54 b5 06 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 68 49 5d [binary, 4 bytes]
DEBUG:    < PONG a1 68 49 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 0f 88 41 [binary, 4 bytes]
DEBUG:    < PONG d4 0f 88 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58524 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58526 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272668128}' [46 bytes]
2025-09-07 12:17:48 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757272668128}
2025-09-07 12:17:48 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757272668128}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272670640}' [46 bytes]
2025-09-07 12:17:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272670640}
2025-09-07 12:17:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272670640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 96 34 43 [binary, 4 bytes]
DEBUG:    < PONG 6b 96 34 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac a7 c2 41 [binary, 4 bytes]
DEBUG:    < PONG ac a7 c2 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 bc 13 0e [binary, 4 bytes]
DEBUG:    < PONG 85 bc 13 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c aa f9 5a [binary, 4 bytes]
DEBUG:    < PONG 2c aa f9 5a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58554 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58556 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d a7 86 6c [binary, 4 bytes]
DEBUG:    < PONG 5d a7 86 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272698126}' [46 bytes]
2025-09-07 12:18:18 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757272698126}
2025-09-07 12:18:18 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757272698126}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272700640}' [46 bytes]
2025-09-07 12:18:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272700640}
2025-09-07 12:18:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272700640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c ef 0c d3 [binary, 4 bytes]
DEBUG:    < PONG 9c ef 0c d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 12:18:21 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:18:21 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:18:21 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:18:21 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:18:21 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:18:21 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:18:21 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:18:21 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 ac 43 d8 [binary, 4 bytes]
DEBUG:    < PONG 81 ac 43 d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58567 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: +4CwErBQFTpeCh1hZ4R19A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58571) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:18:27 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:18:27 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:18:27.624741"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:18:27.624741"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: vS9m9ha3D2gfLBkiJglC1HL1EFY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:18:26 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:18:27.624741"}' [128 bytes]
INFO:     127.0.0.1:58570 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58570 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58570 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: s0tiWCiePY2MZxZLLx2wkg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58573) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:18:27 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:18:27 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:18:27.726849"}' [128 bytes]
INFO:     127.0.0.1:58570 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: t0nBedy7RzUx9sAzHg5djMtOjYI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:18:26 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:18:27.726849"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:18:27.726849"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:18:27.726849"}' [128 bytes]
INFO:     127.0.0.1:58570 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58575 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58575 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 12:18:31 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:58575 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58575 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:18:36 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 b4 fc 67 [binary, 4 bytes]
DEBUG:    < PONG 22 b4 fc 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 6e 0e 71 [binary, 4 bytes]
DEBUG:    < PONG a9 6e 0e 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58584 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 ee 32 8c [binary, 4 bytes]
DEBUG:    < PONG 10 ee 32 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 2e db 55 [binary, 4 bytes]
DEBUG:    < PONG ce 2e db 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272730640}' [46 bytes]
2025-09-07 12:18:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272730640}
2025-09-07 12:18:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272730640}
INFO:     127.0.0.1:58586 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272739090}' [46 bytes]
2025-09-07 12:18:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272739090}
2025-09-07 12:18:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272739090}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 6f 11 81 [binary, 4 bytes]
DEBUG:    < PONG 12 6f 11 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 02 d7 0b [binary, 4 bytes]
DEBUG:    < PONG 67 02 d7 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d ef bc 58 [binary, 4 bytes]
DEBUG:    < PONG 6d ef bc 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 7b b8 c6 [binary, 4 bytes]
DEBUG:    < PONG 92 7b b8 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58589 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272760640}' [46 bytes]
2025-09-07 12:19:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272760640}
2025-09-07 12:19:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272760640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x16\x17\x11}' [text, 4 bytes]
DEBUG:    < PONG '\x16\x17\x11}' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 93 8d b6 [binary, 4 bytes]
DEBUG:    < PONG 7c 93 8d b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 da 58 60 [binary, 4 bytes]
DEBUG:    < PONG b8 da 58 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 ea 31 12 [binary, 4 bytes]
DEBUG:    < PONG 43 ea 31 12 [binary, 4 bytes]
INFO:     127.0.0.1:58595 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272769089}' [46 bytes]
2025-09-07 12:19:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272769089}
2025-09-07 12:19:29 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272769089}
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb ed f1 7b [binary, 4 bytes]
DEBUG:    < PONG cb ed f1 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 89 8e e8 [binary, 4 bytes]
DEBUG:    < PONG e4 89 8e e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58628 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 82 e5 cc [binary, 4 bytes]
DEBUG:    < PONG f3 82 e5 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f 72 84 82 [binary, 4 bytes]
DEBUG:    < PONG 5f 72 84 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272790640}' [46 bytes]
2025-09-07 12:19:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272790640}
2025-09-07 12:19:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272790640}
INFO:     127.0.0.1:58636 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272799090}' [46 bytes]
2025-09-07 12:19:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272799090}
2025-09-07 12:19:59 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272799090}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff f7 3e af [binary, 4 bytes]
DEBUG:    < PONG ff f7 3e af [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 12:20:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:20:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:20:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:20:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:20:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:20:05 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:20:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:20:05 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 b1 c7 11 [binary, 4 bytes]
DEBUG:    < PONG a5 b1 c7 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58653 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Z4KInXSYOUO7CZdO+JMF2g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58657) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:20:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:20:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:20:13.883867"}' [128 bytes]
INFO:     127.0.0.1:58653 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: nhZ02NCsNutCoph8hjdBvxTAFEs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:20:13 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58656 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:20:13.883867"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:20:13.883867"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /dBRB2dOD61aUHK312g3dA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58659) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:20:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:20:13 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:20:13.960341"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:20:13.960341"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: dcDZbewrK3CJ2e/jzjuco4ROo1o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:20:13 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:20:13.960341"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:20:13.960341"}' [128 bytes]
INFO:     127.0.0.1:58656 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58656 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58656 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58656 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58653 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 12:20:14 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:58669 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58669 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:20:16 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:58675 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272820640}' [46 bytes]
2025-09-07 12:20:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272820640}
2025-09-07 12:20:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272820640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 68 f4 66 [binary, 4 bytes]
DEBUG:    < PONG df 68 f4 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 14 f7 bb [binary, 4 bytes]
DEBUG:    < PONG a3 14 f7 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 57 c8 11 [binary, 4 bytes]
DEBUG:    < PONG f3 57 c8 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 cd 64 5c [binary, 4 bytes]
DEBUG:    < PONG c2 cd 64 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 bf a5 68 [binary, 4 bytes]
DEBUG:    < PONG 52 bf a5 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58716 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272844411}' [46 bytes]
2025-09-07 12:20:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272844411}
2025-09-07 12:20:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272844411}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d d5 86 f8 [binary, 4 bytes]
DEBUG:    < PONG 3d d5 86 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58722 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272850639}' [46 bytes]
2025-09-07 12:20:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272850639}
2025-09-07 12:20:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272850639}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 82 a9 c1 [binary, 4 bytes]
DEBUG:    < PONG f0 82 a9 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 01 b3 c5 [binary, 4 bytes]
DEBUG:    < PONG 07 01 b3 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 58 a9 5b [binary, 4 bytes]
DEBUG:    < PONG 10 58 a9 5b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 6f a0 78 [binary, 4 bytes]
DEBUG:    < PONG 70 6f a0 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58752 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 81 a6 88 [binary, 4 bytes]
DEBUG:    < PONG b0 81 a6 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 00 e2 7f [binary, 4 bytes]
DEBUG:    < PONG f9 00 e2 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272874411}' [46 bytes]
2025-09-07 12:21:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272874411}
2025-09-07 12:21:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272874411}
INFO:     127.0.0.1:58758 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272880639}' [46 bytes]
2025-09-07 12:21:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272880639}
2025-09-07 12:21:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272880639}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b 27 e2 c0 [binary, 4 bytes]
DEBUG:    < PONG 1b 27 e2 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a cb 61 3e [binary, 4 bytes]
DEBUG:    < PONG 2a cb 61 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb f8 d7 e7 [binary, 4 bytes]
DEBUG:    < PONG eb f8 d7 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 86 bc 2f [binary, 4 bytes]
DEBUG:    < PONG d9 86 bc 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 0f 03 64 [binary, 4 bytes]
DEBUG:    < PONG ce 0f 03 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58765 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272904410}' [46 bytes]
2025-09-07 12:21:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272904410}
2025-09-07 12:21:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272904410}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 aa db e0 [binary, 4 bytes]
DEBUG:    < PONG 50 aa db e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58769 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272910640}' [46 bytes]
2025-09-07 12:21:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272910640}
2025-09-07 12:21:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272910640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '6\x1c>z' [text, 4 bytes]
DEBUG:    < PONG '6\x1c>z' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 30 3c a1 [binary, 4 bytes]
DEBUG:    < PONG 90 30 3c a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 47 3d d3 [binary, 4 bytes]
DEBUG:    < PONG a5 47 3d d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 19 f9 8c [binary, 4 bytes]
DEBUG:    < PONG 60 19 f9 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58789 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 f2 e8 be [binary, 4 bytes]
DEBUG:    < PONG 51 f2 e8 be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 73 43 aa [binary, 4 bytes]
DEBUG:    < PONG 17 73 43 aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272934411}' [46 bytes]
2025-09-07 12:22:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272934411}
2025-09-07 12:22:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272934411}
INFO:     127.0.0.1:58791 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272940640}' [46 bytes]
2025-09-07 12:22:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272940640}
2025-09-07 12:22:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272940640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 70 57 8e [binary, 4 bytes]
DEBUG:    < PONG d0 70 57 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e 75 92 18 [binary, 4 bytes]
DEBUG:    < PONG 1e 75 92 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 's\x07\x18\x0e' [text, 4 bytes]
DEBUG:    < PONG 's\x07\x18\x0e' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 b3 f4 2a [binary, 4 bytes]
DEBUG:    < PONG 41 b3 f4 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 ac 7a 0d [binary, 4 bytes]
DEBUG:    < PONG 10 ac 7a 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58796 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272964410}' [46 bytes]
2025-09-07 12:22:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272964410}
2025-09-07 12:22:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272964410}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d e9 99 2d [binary, 4 bytes]
DEBUG:    < PONG 4d e9 99 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58800 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272970639}' [46 bytes]
2025-09-07 12:22:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272970639}
2025-09-07 12:22:50 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272970639}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a d4 08 e3 [binary, 4 bytes]
DEBUG:    < PONG 5a d4 08 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a aa 04 da [binary, 4 bytes]
DEBUG:    < PONG 3a aa 04 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e fd 1f a1 [binary, 4 bytes]
DEBUG:    < PONG 5e fd 1f a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 f2 5d ea [binary, 4 bytes]
DEBUG:    < PONG 04 f2 5d ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58803 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 24 eb 3f [binary, 4 bytes]
DEBUG:    < PONG e5 24 eb 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 7b 2b be [binary, 4 bytes]
DEBUG:    < PONG 07 7b 2b be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757272994410}' [46 bytes]
2025-09-07 12:23:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272994410}
2025-09-07 12:23:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757272994410}
INFO:     127.0.0.1:58806 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273000640}' [46 bytes]
2025-09-07 12:23:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273000640}
2025-09-07 12:23:20 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273000640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 85 d8 1a [binary, 4 bytes]
DEBUG:    < PONG 6f 85 d8 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 83 e2 eb [binary, 4 bytes]
DEBUG:    < PONG c7 83 e2 eb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 4a 70 da [binary, 4 bytes]
DEBUG:    < PONG 60 4a 70 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e b1 cf 37 [binary, 4 bytes]
DEBUG:    < PONG 2e b1 cf 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a 95 23 47 [binary, 4 bytes]
DEBUG:    < PONG 7a 95 23 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58826 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273024409}' [46 bytes]
2025-09-07 12:23:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273024409}
2025-09-07 12:23:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273024409}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 22 85 b6 [binary, 4 bytes]
DEBUG:    < PONG 1f 22 85 b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58830 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273031137}' [46 bytes]
2025-09-07 12:23:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273031137}
2025-09-07 12:23:51 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273031137}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 85 cb 39 [binary, 4 bytes]
DEBUG:    < PONG 69 85 cb 39 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '~Ê±\n' [text, 4 bytes]
DEBUG:    < PONG '~Ê±\n' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d 2b b1 da [binary, 4 bytes]
DEBUG:    < PONG 0d 2b b1 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 0e f5 a3 [binary, 4 bytes]
DEBUG:    < PONG 9b 0e f5 a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58857 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 7c ae ce [binary, 4 bytes]
DEBUG:    < PONG 23 7c ae ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 82 69 9e [binary, 4 bytes]
DEBUG:    < PONG 32 82 69 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273054410}' [46 bytes]
2025-09-07 12:24:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273054410}
2025-09-07 12:24:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273054410}
INFO:     127.0.0.1:58859 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e fb db 12 [binary, 4 bytes]
DEBUG:    < PONG 4e fb db 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273061137}' [46 bytes]
2025-09-07 12:24:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273061137}
2025-09-07 12:24:21 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273061137}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 da 87 d2 [binary, 4 bytes]
DEBUG:    < PONG d1 da 87 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 32 6e b8 [binary, 4 bytes]
DEBUG:    < PONG 09 32 6e b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 99 f6 35 [binary, 4 bytes]
DEBUG:    < PONG e3 99 f6 35 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 89 e7 27 [binary, 4 bytes]
DEBUG:    < PONG 73 89 e7 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58863 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273084410}' [46 bytes]
2025-09-07 12:24:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273084410}
2025-09-07 12:24:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273084410}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 b1 da 08 [binary, 4 bytes]
DEBUG:    < PONG b0 b1 da 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 ae a1 ba [binary, 4 bytes]
DEBUG:    < PONG 65 ae a1 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 02 fe a1 [binary, 4 bytes]
DEBUG:    < PONG 33 02 fe a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273094140}' [46 bytes]
2025-09-07 12:24:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273094140}
2025-09-07 12:24:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273094140}
INFO:     127.0.0.1:58867 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 24 2d 33 [binary, 4 bytes]
DEBUG:    < PONG a1 24 2d 33 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 fe 6e e1 [binary, 4 bytes]
DEBUG:    < PONG 61 fe 6e e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58869 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 f4 4e e6 [binary, 4 bytes]
DEBUG:    < PONG 49 f4 4e e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c 37 a3 78 [binary, 4 bytes]
DEBUG:    < PONG 0c 37 a3 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273114412}' [46 bytes]
2025-09-07 12:25:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273114412}
2025-09-07 12:25:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273114412}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a e1 de aa [binary, 4 bytes]
DEBUG:    < PONG 2a e1 de aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'AË‹\x04' [text, 4 bytes]
DEBUG:    < PONG 'AË‹\x04' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 3b 5c da [binary, 4 bytes]
DEBUG:    < PONG 0e 3b 5c da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 66 78 03 [binary, 4 bytes]
DEBUG:    < PONG b6 66 78 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 f8 9b ff [binary, 4 bytes]
DEBUG:    < PONG 67 f8 9b ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58873 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273144435}' [46 bytes]
2025-09-07 12:25:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273144435}
2025-09-07 12:25:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273144435}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 c4 81 be [binary, 4 bytes]
DEBUG:    < PONG 20 c4 81 be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273149862}' [46 bytes]
2025-09-07 12:25:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273149862}
2025-09-07 12:25:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273149862}
INFO:     127.0.0.1:58877 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '*t\x02\x0c' [text, 4 bytes]
DEBUG:    < PONG '*t\x02\x0c' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 51 38 ab [binary, 4 bytes]
DEBUG:    < PONG c6 51 38 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 44 8b d4 [binary, 4 bytes]
DEBUG:    < PONG 69 44 8b d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 87 16 d5 [binary, 4 bytes]
DEBUG:    < PONG f2 87 16 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 12:26:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:26:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:26:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:26:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:26:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:26:08 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:26:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:26:08 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
INFO:     127.0.0.1:58888 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: qMrtvHAuJO3W4qZmgZ9Eww==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58892) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:26:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:26:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:26:08.794808"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:26:08.794808"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: YZ8iL1C/4IrRTnDp1Y8WLgOoWRw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:26:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58894 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:26:08.794808"}' [128 bytes]
INFO:     127.0.0.1:58890 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: GrUs/Shh2knePsElnoh7ig==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58896) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:26:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:26:08 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 2ktZ5Idf21ratJLkGxY7yAKFSyw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:26:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58894 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:26:08.824797"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:26:08.824797"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:26:08.824797"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:26:08.824797"}' [128 bytes]
INFO:     127.0.0.1:58890 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58894 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58894 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58894 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58890 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:58894 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58890 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:26:08 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:26:13 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:58899 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '4Æˆ:' [text, 4 bytes]
DEBUG:    < PONG '4Æˆ:' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b d4 9e bb [binary, 4 bytes]
DEBUG:    < PONG 8b d4 9e bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273174433}' [46 bytes]
2025-09-07 12:26:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273174433}
2025-09-07 12:26:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273174433}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 fa 5a b8 [binary, 4 bytes]
DEBUG:    < PONG 46 fa 5a b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 95 80 59 [binary, 4 bytes]
DEBUG:    < PONG b7 95 80 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 2b e4 dd [binary, 4 bytes]
DEBUG:    < PONG 5e 2b e4 dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 40 de cc [binary, 4 bytes]
DEBUG:    < PONG 62 40 de cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58906 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273198849}' [46 bytes]
2025-09-07 12:26:38 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273198849}
2025-09-07 12:26:38 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273198849}
INFO:     127.0.0.1:58917 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273204410}' [46 bytes]
2025-09-07 12:26:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273204410}
2025-09-07 12:26:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273204410}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 b7 07 86 [binary, 4 bytes]
DEBUG:    < PONG e3 b7 07 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e d0 ba 58 [binary, 4 bytes]
DEBUG:    < PONG 9e d0 ba 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 ee b3 d4 [binary, 4 bytes]
DEBUG:    < PONG b4 ee b3 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 a8 15 ec [binary, 4 bytes]
DEBUG:    < PONG 58 a8 15 ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58939 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 4d 5d f5 [binary, 4 bytes]
DEBUG:    < PONG 94 4d 5d f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 f5 ae 93 [binary, 4 bytes]
DEBUG:    < PONG 30 f5 ae 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273228849}' [46 bytes]
2025-09-07 12:27:08 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273228849}
2025-09-07 12:27:08 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273228849}
INFO:     127.0.0.1:58946 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '%<\x0cs' [text, 4 bytes]
DEBUG:    < PONG '%<\x0cs' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 ee be c1 [binary, 4 bytes]
DEBUG:    < PONG 97 ee be c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273234411}' [46 bytes]
2025-09-07 12:27:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273234411}
2025-09-07 12:27:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273234411}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 c2 ca fb [binary, 4 bytes]
DEBUG:    < PONG d0 c2 ca fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 4a 40 4e [binary, 4 bytes]
DEBUG:    < PONG 9b 4a 40 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 ba d7 6f [binary, 4 bytes]
DEBUG:    < PONG d8 ba d7 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 11 94 9a [binary, 4 bytes]
DEBUG:    < PONG f3 11 94 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:58959 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273258849}' [46 bytes]
2025-09-07 12:27:38 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273258849}
2025-09-07 12:27:38 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273258849}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:58959 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: IRzNzMXOodYQVu83Pq5WVg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58975) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:27:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:27:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:27:43 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:27:43 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:43.747943"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:43.747943"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:43.747943"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: N2gWMm8b21LZC84qkyqvqJjtQxw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:27:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58973 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:43.747943"}' [128 bytes]
2025-09-07 12:27:43 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:43 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:43 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:27:43 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58959 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:58959 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: IJfGAsVNkN+A6hl9jmQAeQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58977) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:27:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:27:43 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: KQhV7dJ8PEwZ4sXFCE9wU9GEaWg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:27:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58973 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:43.830357"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:43.830357"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:43.830357"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:43.830357"}' [128 bytes]
2025-09-07 12:27:43 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:27:43 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:27:43 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:43 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:43 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:27:43 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58959 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58979 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:27:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:27:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58979 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58979 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: fPcHwYLjKRaiqHYFSPgggg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58982) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:27:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:27:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: sinwAgI13KSfJ+dgCF9KaIvVStE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:27:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:44.570558"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:44.570558"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:44.570558"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:44.570558"}' [128 bytes]
INFO:     127.0.0.1:58979 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:27:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:27:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:58959 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: IGj2YgHBsE2rmaCnfvmSRQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58984) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:27:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:27:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:44.839005"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:44.839005"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: KnFWa/faW6fXL0ZScJu1In0+RmE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:27:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:44.839005"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:44.839005"}' [128 bytes]
INFO:     127.0.0.1:58973 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58959 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
INFO:     127.0.0.1:58979 - "GET /health HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4RZ7bgCVZqKvbZ54KiVlzQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58988) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:27:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:27:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    = connection is CLOSED
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: YbIDkkNKQ76GbvQmwFTiaDwUVZs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:27:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:58987 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:27:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:46 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:27:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:27:46 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:27:46 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:27:46 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     connection closed
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:58987 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 f9 85 c0 [binary, 4 bytes]
DEBUG:    < PONG 18 f9 85 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4/7rPxtc7BsQUtSMPwuXVg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59001) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:27:49 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:27:49 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:49.545623"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4zDuvtNX5792H6aYN2ln/riv+Zg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:27:48 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:49.545623"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:49.545623"}' [128 bytes]
2025-09-07 12:27:49 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:27:49 - app.services.websocket_manager - ERROR - Error sending message to michael_chen: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:27:49.545623"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 41 7a 3b [binary, 4 bytes]
DEBUG:    < PONG db 41 7a 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 01 5a 42 [binary, 4 bytes]
DEBUG:    < PONG fe 01 5a 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x03D#\x1b' [text, 4 bytes]
DEBUG:    < PONG '\x03D#\x1b' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 0a 87 74 [binary, 4 bytes]
DEBUG:    < PONG fc 0a 87 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 8b 33 84 [binary, 4 bytes]
DEBUG:    < PONG df 8b 33 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59023 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273294842}' [46 bytes]
2025-09-07 12:28:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273294842}
2025-09-07 12:28:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273294842}
INFO:     127.0.0.1:59026 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273299555}' [46 bytes]
2025-09-07 12:28:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273299555}
2025-09-07 12:28:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273299555}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f 71 99 c6 [binary, 4 bytes]
DEBUG:    < PONG 5f 71 99 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 44 8d fe [binary, 4 bytes]
DEBUG:    < PONG 59 44 8d fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e a5 c2 78 [binary, 4 bytes]
DEBUG:    < PONG 3e a5 c2 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b f4 69 7d [binary, 4 bytes]
DEBUG:    < PONG 8b f4 69 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273324843}' [46 bytes]
2025-09-07 12:28:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273324843}
2025-09-07 12:28:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273324843}
INFO:     127.0.0.1:59044 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d c9 fa 0f [binary, 4 bytes]
DEBUG:    < PONG 8d c9 fa 0f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59046 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 11 7f a7 [binary, 4 bytes]
DEBUG:    < PONG 49 11 7f a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273329555}' [46 bytes]
2025-09-07 12:28:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273329555}
2025-09-07 12:28:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273329555}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 d6 4c 65 [binary, 4 bytes]
DEBUG:    < PONG b0 d6 4c 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 0e 02 83 [binary, 4 bytes]
DEBUG:    < PONG 40 0e 02 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Æ”p\x03' [text, 4 bytes]
DEBUG:    < PONG 'Æ”p\x03' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 69 19 e0 [binary, 4 bytes]
DEBUG:    < PONG c8 69 19 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 c8 c7 7f [binary, 4 bytes]
DEBUG:    < PONG 55 c8 c7 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 fe 6c fd [binary, 4 bytes]
DEBUG:    < PONG 20 fe 6c fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59052 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273354842}' [46 bytes]
2025-09-07 12:29:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273354842}
2025-09-07 12:29:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273354842}
INFO:     127.0.0.1:59054 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273359555}' [46 bytes]
2025-09-07 12:29:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273359555}
2025-09-07 12:29:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273359555}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 86 59 9c [binary, 4 bytes]
DEBUG:    < PONG ac 86 59 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'VC\x06G' [text, 4 bytes]
DEBUG:    < PONG 'VC\x06G' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'D=^P' [text, 4 bytes]
DEBUG:    < PONG 'D=^P' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a d5 c3 7c [binary, 4 bytes]
DEBUG:    < PONG 6a d5 c3 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59060 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273384841}' [46 bytes]
2025-09-07 12:29:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273384841}
2025-09-07 12:29:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273384841}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 d4 78 8e [binary, 4 bytes]
DEBUG:    < PONG 26 d4 78 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59065 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c ca b1 e8 [binary, 4 bytes]
DEBUG:    < PONG 6c ca b1 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273389555}' [46 bytes]
2025-09-07 12:29:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273389555}
2025-09-07 12:29:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273389555}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 84 12 0a [binary, 4 bytes]
DEBUG:    < PONG ac 84 12 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 97 3b 65 [binary, 4 bytes]
DEBUG:    < PONG f6 97 3b 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 84 8a 1d [binary, 4 bytes]
DEBUG:    < PONG 81 84 8a 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 9a a6 85 [binary, 4 bytes]
DEBUG:    < PONG 08 9a a6 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 a3 39 ea [binary, 4 bytes]
DEBUG:    < PONG f3 a3 39 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d fc ad 44 [binary, 4 bytes]
DEBUG:    < PONG 9d fc ad 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59081 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273414842}' [46 bytes]
2025-09-07 12:30:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273414842}
2025-09-07 12:30:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273414842}
INFO:     127.0.0.1:59083 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273419557}' [46 bytes]
2025-09-07 12:30:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273419557}
2025-09-07 12:30:19 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273419557}
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 a3 86 ad [binary, 4 bytes]
DEBUG:    < PONG d4 a3 86 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 dd da 28 [binary, 4 bytes]
DEBUG:    < PONG 51 dd da 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 0a 1d 83 [binary, 4 bytes]
DEBUG:    < PONG ac 0a 1d 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 ee 16 ab [binary, 4 bytes]
DEBUG:    < PONG 30 ee 16 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59094 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273444842}' [46 bytes]
2025-09-07 12:30:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273444842}
2025-09-07 12:30:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273444842}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 25 bb d8 [binary, 4 bytes]
DEBUG:    < PONG f9 25 bb d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59097 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 c4 70 18 [binary, 4 bytes]
DEBUG:    < PONG 27 c4 70 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273449555}' [46 bytes]
2025-09-07 12:30:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273449555}
2025-09-07 12:30:49 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273449555}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c a4 af f0 [binary, 4 bytes]
DEBUG:    < PONG 8c a4 af f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 18 95 3d [binary, 4 bytes]
DEBUG:    < PONG c5 18 95 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:30:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:30:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:30:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:30:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:59124 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: anW2j6l6+or6ijm6ir3W0g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59128) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:30:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:30:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 8Wjcjk2QWPg0E8QtSn+o6+wZFLI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:30:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:30:54.200675"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:30:54.200675"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:30:54.200675"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:30:54.200675"}' [128 bytes]
INFO:     127.0.0.1:59127 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59124 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:30:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:30:54 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:30:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:30:54 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     127.0.0.1:59130 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:59130 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 8ZNPq+LHmKOWmusvsXrSJg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59132) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:30:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:30:54 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:30:54.288577"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:30:54.288577"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: HB+WCSe1bbmbFP0gm0+NbvXsIK0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:30:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:30:54.288577"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:30:54.288577"}' [128 bytes]
INFO:     127.0.0.1:59130 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 be 58 97 [binary, 4 bytes]
DEBUG:    < PONG 06 be 58 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 72 2b b4 [binary, 4 bytes]
DEBUG:    < PONG b5 72 2b b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 51 07 aa [binary, 4 bytes]
DEBUG:    < PONG 9a 51 07 aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f a1 35 30 [binary, 4 bytes]
DEBUG:    < PONG 9f a1 35 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59153 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273484205}' [46 bytes]
2025-09-07 12:31:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273484205}
2025-09-07 12:31:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273484205}
INFO:     127.0.0.1:59155 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273484337}' [46 bytes]
2025-09-07 12:31:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273484337}
2025-09-07 12:31:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273484337}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 3d cf 4b [binary, 4 bytes]
DEBUG:    < PONG ca 3d cf 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 df a0 32 [binary, 4 bytes]
DEBUG:    < PONG a3 df a0 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 54 ae 7b [binary, 4 bytes]
DEBUG:    < PONG 83 54 ae 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 53 22 ce [binary, 4 bytes]
DEBUG:    < PONG 0b 53 22 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 df 5b b2 [binary, 4 bytes]
DEBUG:    < PONG a0 df 5b b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a 5c 85 84 [binary, 4 bytes]
DEBUG:    < PONG 1a 5c 85 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59167 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 42 6e 4b [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273514204}' [46 bytes]
DEBUG:    < PONG d6 42 6e 4b [binary, 4 bytes]
2025-09-07 12:31:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273514204}
2025-09-07 12:31:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273514204}
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59169 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 24 9d 89 [binary, 4 bytes]
DEBUG:    < PONG 95 24 9d 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273514336}' [46 bytes]
2025-09-07 12:31:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273514336}
2025-09-07 12:31:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273514336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Y\x0cX3' [text, 4 bytes]
DEBUG:    < PONG 'Y\x0cX3' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 d8 bb 34 [binary, 4 bytes]
DEBUG:    < PONG 87 d8 bb 34 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c ad c8 46 [binary, 4 bytes]
DEBUG:    < PONG 4c ad c8 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 9a 4a 8e [binary, 4 bytes]
DEBUG:    < PONG 67 9a 4a 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59207 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273544203}' [46 bytes]
2025-09-07 12:32:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273544203}
2025-09-07 12:32:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273544203}
INFO:     127.0.0.1:59209 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273544336}' [46 bytes]
2025-09-07 12:32:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273544336}
2025-09-07 12:32:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273544336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 75 fd 81 [binary, 4 bytes]
DEBUG:    < PONG 8c 75 fd 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 7a 2f c6 [binary, 4 bytes]
DEBUG:    < PONG 77 7a 2f c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 4f ab 78 [binary, 4 bytes]
DEBUG:    < PONG 64 4f ab 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 0e 64 fb [binary, 4 bytes]
DEBUG:    < PONG 17 0e 64 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 1f ff 69 [binary, 4 bytes]
DEBUG:    < PONG a6 1f ff 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc f4 8c fc [binary, 4 bytes]
DEBUG:    < PONG dc f4 8c fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 4e c9 14 [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273574205}' [46 bytes]
DEBUG:    < PONG a5 4e c9 14 [binary, 4 bytes]
INFO:     127.0.0.1:59235 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:32:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273574205}
2025-09-07 12:32:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273574205}
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59237 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 f6 99 7e [binary, 4 bytes]
DEBUG:    < PONG f5 f6 99 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273574336}' [46 bytes]
2025-09-07 12:32:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273574336}
2025-09-07 12:32:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273574336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 95 05 6f [binary, 4 bytes]
DEBUG:    < PONG e5 95 05 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 df d1 dc [binary, 4 bytes]
DEBUG:    < PONG 32 df d1 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d 0d ce 2a [binary, 4 bytes]
DEBUG:    < PONG 1d 0d ce 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 85 05 12 [binary, 4 bytes]
DEBUG:    < PONG 7c 85 05 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59241 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273604203}' [46 bytes]
2025-09-07 12:33:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273604203}
2025-09-07 12:33:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273604203}
INFO:     127.0.0.1:59243 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273604336}' [46 bytes]
2025-09-07 12:33:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273604336}
2025-09-07 12:33:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273604336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 2b 03 f5 [binary, 4 bytes]
DEBUG:    < PONG 12 2b 03 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59253 - "OPTIONS /api/v1/chat-threads/threads/ff06502b-8dcb-4d51-9ba9-9c822837a14c HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "DELETE /api/v1/chat-threads/threads/ff06502b-8dcb-4d51-9ba9-9c822837a14c HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "GET /api/v1/chat-threads/threads/ff06502b-8dcb-4d51-9ba9-9c822837a14c HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:33:31 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59253 - "OPTIONS /api/v1/chat-threads/threads/792e5ebc-69d3-43c3-904a-a4860c316bd7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "DELETE /api/v1/chat-threads/threads/792e5ebc-69d3-43c3-904a-a4860c316bd7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "OPTIONS /api/v1/chat-threads/threads/c7752ccc-f825-4a44-acec-f2261b129675 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "DELETE /api/v1/chat-threads/threads/c7752ccc-f825-4a44-acec-f2261b129675 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:33:32 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59253 - "OPTIONS /api/v1/chat-threads/threads/05002c15-1160-44ce-ad07-e9fda5ab4e51 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "DELETE /api/v1/chat-threads/threads/05002c15-1160-44ce-ad07-e9fda5ab4e51 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "OPTIONS /api/v1/chat-threads/threads/e01098d3-5046-4866-8176-3d1732eebdd7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "DELETE /api/v1/chat-threads/threads/e01098d3-5046-4866-8176-3d1732eebdd7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59253 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:33:32 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59257 - "OPTIONS /api/v1/chat-threads/threads/237fbac6-4b74-4333-a369-b6622f9edc86 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "DELETE /api/v1/chat-threads/threads/237fbac6-4b74-4333-a369-b6622f9edc86 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:33:32 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59257 - "OPTIONS /api/v1/chat-threads/threads/77d96cd7-b420-4199-96cf-6b0f02821774 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "DELETE /api/v1/chat-threads/threads/77d96cd7-b420-4199-96cf-6b0f02821774 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:33:33 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59257 - "OPTIONS /api/v1/chat-threads/threads/1658c6f9-2074-4f61-8b4b-c6979b7e729f HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "DELETE /api/v1/chat-threads/threads/1658c6f9-2074-4f61-8b4b-c6979b7e729f HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "OPTIONS /api/v1/chat-threads/threads/cc0d0d95-59ec-4799-b6e6-5c81e21802f2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "DELETE /api/v1/chat-threads/threads/cc0d0d95-59ec-4799-b6e6-5c81e21802f2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:33:33 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 96 7c 61 [binary, 4 bytes]
DEBUG:    < PONG a6 96 7c 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 50 5f 60 [binary, 4 bytes]
DEBUG:    < PONG a8 50 5f 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 6c 5e 44 [binary, 4 bytes]
DEBUG:    < PONG d1 6c 5e 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59257 - "OPTIONS /api/v1/chat-threads/threads/3d10aa08-72bf-4854-a84f-72554ff333d9 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "DELETE /api/v1/chat-threads/threads/3d10aa08-72bf-4854-a84f-72554ff333d9 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:33:34 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59257 - "OPTIONS /api/v1/chat-threads/threads/b9928754-e979-4bab-8bae-fe14a64036ad HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "DELETE /api/v1/chat-threads/threads/b9928754-e979-4bab-8bae-fe14a64036ad HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "OPTIONS /api/v1/chat-threads/threads/0bdf6898-0404-4e8c-9f1a-5f41a9c35de6 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "DELETE /api/v1/chat-threads/threads/0bdf6898-0404-4e8c-9f1a-5f41a9c35de6 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "OPTIONS /api/v1/chat-threads/threads/67de88a1-4202-4672-8f34-316970ca6af7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "DELETE /api/v1/chat-threads/threads/67de88a1-4202-4672-8f34-316970ca6af7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59257 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:33:34 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:33:36 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb 69 17 d0 [binary, 4 bytes]
DEBUG:    < PONG bb 69 17 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 77 09 f7 [binary, 4 bytes]
DEBUG:    < PONG d1 77 09 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59271 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273634202}' [46 bytes]
2025-09-07 12:33:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273634202}
2025-09-07 12:33:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273634202}
INFO:     127.0.0.1:59273 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 a7 82 2e [binary, 4 bytes]
DEBUG:    < PONG 33 a7 82 2e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 de bd 47 [binary, 4 bytes]
DEBUG:    < PONG a0 de bd 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273634336}' [46 bytes]
2025-09-07 12:33:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273634336}
2025-09-07 12:33:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273634336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 19 21 b0 cc [binary, 4 bytes]
DEBUG:    < PONG 19 21 b0 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 bc 8b a3 [binary, 4 bytes]
DEBUG:    < PONG 80 bc 8b a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 05 14 b1 [binary, 4 bytes]
DEBUG:    < PONG 28 05 14 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 2f 63 ad [binary, 4 bytes]
DEBUG:    < PONG 06 2f 63 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59294 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273664204}' [46 bytes]
2025-09-07 12:34:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273664204}
2025-09-07 12:34:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273664204}
INFO:     127.0.0.1:59296 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273664336}' [46 bytes]
2025-09-07 12:34:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273664336}
2025-09-07 12:34:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273664336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a 8d a1 17 [binary, 4 bytes]
DEBUG:    < PONG 5a 8d a1 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 e7 b5 5c [binary, 4 bytes]
DEBUG:    < PONG 40 e7 b5 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f 2d 00 df [binary, 4 bytes]
DEBUG:    < PONG 9f 2d 00 df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 6b ec 7f [binary, 4 bytes]
DEBUG:    < PONG 45 6b ec 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 68 dc 63 [binary, 4 bytes]
DEBUG:    < PONG 91 68 dc 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 85 a2 9c [binary, 4 bytes]
DEBUG:    < PONG ec 85 a2 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59328 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273694204}' [46 bytes]
2025-09-07 12:34:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273694204}
2025-09-07 12:34:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273694204}
INFO:     127.0.0.1:59330 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 92 16 fe [binary, 4 bytes]
DEBUG:    < PONG 60 92 16 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 a9 07 ef [binary, 4 bytes]
DEBUG:    < PONG 59 a9 07 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273694376}' [46 bytes]
2025-09-07 12:34:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273694376}
2025-09-07 12:34:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273694376}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 41 8d 76 [binary, 4 bytes]
DEBUG:    < PONG 23 41 8d 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 0f 82 1c [binary, 4 bytes]
DEBUG:    < PONG 5b 0f 82 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e a7 da f4 [binary, 4 bytes]
DEBUG:    < PONG 4e a7 da f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 9a a4 b9 [binary, 4 bytes]
DEBUG:    < PONG 38 9a a4 b9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59347 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273724204}' [46 bytes]
2025-09-07 12:35:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273724204}
2025-09-07 12:35:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273724204}
INFO:     127.0.0.1:59349 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273724336}' [46 bytes]
2025-09-07 12:35:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273724336}
2025-09-07 12:35:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273724336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 6f 8f f9 [binary, 4 bytes]
DEBUG:    < PONG 87 6f 8f f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 98 e1 49 [binary, 4 bytes]
DEBUG:    < PONG a9 98 e1 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 00 ae 75 [binary, 4 bytes]
DEBUG:    < PONG ef 00 ae 75 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 c7 4c 76 [binary, 4 bytes]
DEBUG:    < PONG 80 c7 4c 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4b e0 93 10 [binary, 4 bytes]
DEBUG:    < PONG 4b e0 93 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 f2 e2 d1 [binary, 4 bytes]
DEBUG:    < PONG 98 f2 e2 d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59391 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273754204}' [46 bytes]
2025-09-07 12:35:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273754204}
2025-09-07 12:35:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273754204}
INFO:     127.0.0.1:59393 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 16 98 56 [binary, 4 bytes]
DEBUG:    < PONG a7 16 98 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 77 3d 9e [binary, 4 bytes]
DEBUG:    < PONG 56 77 3d 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273754337}' [46 bytes]
2025-09-07 12:35:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273754337}
2025-09-07 12:35:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273754337}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 d4 d8 e2 [binary, 4 bytes]
DEBUG:    < PONG 00 d4 d8 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 8f 82 0c [binary, 4 bytes]
DEBUG:    < PONG 3a 8f 82 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 ca 2e 85 [binary, 4 bytes]
DEBUG:    < PONG 46 ca 2e 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b d3 05 1a [binary, 4 bytes]
DEBUG:    < PONG 0b d3 05 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59433 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273784203}' [46 bytes]
2025-09-07 12:36:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273784203}
2025-09-07 12:36:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273784203}
INFO:     127.0.0.1:59435 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273784344}' [46 bytes]
2025-09-07 12:36:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273784344}
2025-09-07 12:36:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273784344}
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 d6 c8 a0 [binary, 4 bytes]
DEBUG:    < PONG c8 d6 c8 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f d3 3f 47 [binary, 4 bytes]
DEBUG:    < PONG 7f d3 3f 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f fe 7b 7d [binary, 4 bytes]
DEBUG:    < PONG 6f fe 7b 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 3b 5a dc [binary, 4 bytes]
DEBUG:    < PONG b8 3b 5a dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a c8 7b c7 [binary, 4 bytes]
DEBUG:    < PONG 9a c8 7b c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 49 19 fe [binary, 4 bytes]
DEBUG:    < PONG d4 49 19 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273814203}' [46 bytes]
INFO:     127.0.0.1:59459 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:36:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273814203}
2025-09-07 12:36:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273814203}
INFO:     127.0.0.1:59461 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 60 b0 37 [binary, 4 bytes]
DEBUG:    < PONG f7 60 b0 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 09 7c cf [binary, 4 bytes]
DEBUG:    < PONG 9b 09 7c cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273814336}' [46 bytes]
2025-09-07 12:36:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273814336}
2025-09-07 12:36:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273814336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 f9 23 f0 [binary, 4 bytes]
DEBUG:    < PONG 23 f9 23 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 13 7d 77 [binary, 4 bytes]
DEBUG:    < PONG cf 13 7d 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 40 36 c5 [binary, 4 bytes]
DEBUG:    < PONG 62 40 36 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 45 8f d2 [binary, 4 bytes]
DEBUG:    < PONG 06 45 8f d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59486 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273844203}' [46 bytes]
2025-09-07 12:37:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273844203}
2025-09-07 12:37:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273844203}
INFO:     127.0.0.1:59488 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273844335}' [46 bytes]
2025-09-07 12:37:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273844335}
2025-09-07 12:37:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273844335}
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 58 4f 63 [binary, 4 bytes]
DEBUG:    < PONG db 58 4f 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 13 f6 8a [binary, 4 bytes]
DEBUG:    < PONG d1 13 f6 8a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 87 a1 6f [binary, 4 bytes]
DEBUG:    < PONG 9d 87 a1 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 73 5f a1 [binary, 4 bytes]
DEBUG:    < PONG 86 73 5f a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:37:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:37:35 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:37:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:37:35 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 6XAA0g+5nsLVUXLd0x77+g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59497) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:37:35 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:37:35 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: yVzGXdHDUFqi8Mv5X8+m74xrhGs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:37:34 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:37:35.282334"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 ea b6 5c [binary, 4 bytes]
DEBUG:    < PONG 86 ea b6 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 18 81 85 [binary, 4 bytes]
DEBUG:    < PONG 11 18 81 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59510 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:59512 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING de 5a 0b f5 [binary, 4 bytes]
DEBUG:    < PONG de 5a 0b f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273874335}' [46 bytes]
2025-09-07 12:37:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273874335}
2025-09-07 12:37:54 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273874335}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 bc a9 35 [binary, 4 bytes]
DEBUG:    < PONG 50 bc a9 35 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273885298}' [46 bytes]
2025-09-07 12:38:05 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757273885298}
2025-09-07 12:38:05 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757273885298}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 0f 13 d7 [binary, 4 bytes]
DEBUG:    < PONG 63 0f 13 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 3a 83 ba [binary, 4 bytes]
DEBUG:    < PONG e2 3a 83 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 9b a0 b0 [binary, 4 bytes]
DEBUG:    < PONG 71 9b a0 b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 f1 63 bd [binary, 4 bytes]
DEBUG:    < PONG c0 f1 63 bd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59516 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:59518 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273904336}' [46 bytes]
2025-09-07 12:38:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273904336}
2025-09-07 12:38:24 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273904336}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 86 a7 6f [binary, 4 bytes]
DEBUG:    < PONG 71 86 a7 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:38:29 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:38:29 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:38:29 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:38:29 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/david_williams HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: XrhQNLESQi5bBpjpJRcbOA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59523) - "WebSocket /api/v1/notifications/ws/david_williams" [accepted]
2025-09-07 12:38:29 - app.services.websocket_manager - INFO - WebSocket connection established for user david_williams
2025-09-07 12:38:29 - app.services.websocket_manager - INFO - WebSocket connection established for user david_williams
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 5kqx7YA1iJwK4ZPbRwnr61DSllw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:38:29 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:38:29.527283"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 dc 80 8f [binary, 4 bytes]
DEBUG:    < PONG a8 dc 80 8f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f f9 4f 2c [binary, 4 bytes]
DEBUG:    < PONG 7f f9 4f 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
2025-09-07 12:38:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:38:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:38:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:38:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:38:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:38:38 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:38:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:38:38 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
INFO:     connection closed
INFO:     127.0.0.1:59556 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: suzZi2SBMNoRwzs/1jPAQA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59558) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:38:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:38:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:38:46.567100"}' [128 bytes]
INFO:     127.0.0.1:59556 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 6Wq81r4CfZknbTv2KLCJmpihSi8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:38:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:38:46.567100"}' [128 bytes]
INFO:     127.0.0.1:59556 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59556 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: cpdYd+g9xtLmfGJXwGsK5w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59562) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:38:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:38:46 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:38:46.599344"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: qjSSMdVpCKa/hZ9BK37qvFtA/XM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:38:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:38:46.599344"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:38:46.599344"}' [128 bytes]
INFO:     127.0.0.1:59561 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59561 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59561 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:59556 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
2025-09-07 12:38:47 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59556 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:59567 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:38:47 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59567 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 1d 48 94 [binary, 4 bytes]
DEBUG:    < PONG 41 1d 48 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e eb 20 70 [binary, 4 bytes]
DEBUG:    < PONG 0e eb 20 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:38:51 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:59570 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273939529}' [46 bytes]
2025-09-07 12:38:59 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757273939529}
2025-09-07 12:38:59 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757273939529}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d e6 94 3a [binary, 4 bytes]
DEBUG:    < PONG 8d e6 94 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 2b dd d8 [binary, 4 bytes]
DEBUG:    < PONG c1 2b dd d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d 80 c2 2d [binary, 4 bytes]
DEBUG:    < PONG 3d 80 c2 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 1b 03 bc [binary, 4 bytes]
DEBUG:    < PONG 09 1b 03 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59582 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273957065}' [46 bytes]
2025-09-07 12:39:17 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273957065}
2025-09-07 12:39:17 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273957065}
INFO:     127.0.0.1:59587 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 0e a1 28 [binary, 4 bytes]
DEBUG:    < PONG 4e 0e a1 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d 37 bf 2a [binary, 4 bytes]
DEBUG:    < PONG 6d 37 bf 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 21 14 b1 [binary, 4 bytes]
DEBUG:    < PONG 92 21 14 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273969530}' [46 bytes]
2025-09-07 12:39:29 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757273969530}
2025-09-07 12:39:29 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757273969530}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d 77 00 da [binary, 4 bytes]
DEBUG:    < PONG 4d 77 00 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 1c 5e ee [binary, 4 bytes]
DEBUG:    < PONG 25 1c 5e ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 19 48 b4 [binary, 4 bytes]
DEBUG:    < PONG 31 19 48 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59592 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273987081}' [46 bytes]
2025-09-07 12:39:47 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273987081}
2025-09-07 12:39:47 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757273987081}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 78 a6 6d [binary, 4 bytes]
DEBUG:    < PONG 2a 78 a6 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b 8a 34 f9 [binary, 4 bytes]
DEBUG:    < PONG 1b 8a 34 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59598 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757273999530}' [46 bytes]
2025-09-07 12:39:59 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757273999530}
2025-09-07 12:39:59 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757273999530}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 9f fd dd [binary, 4 bytes]
DEBUG:    < PONG 2a 9f fd dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d de 10 e7 [binary, 4 bytes]
DEBUG:    < PONG 6d de 10 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db fd 07 ed [binary, 4 bytes]
DEBUG:    < PONG db fd 07 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Ö¾#d' [text, 4 bytes]
DEBUG:    < PONG 'Ö¾#d' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59604 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274017083}' [46 bytes]
2025-09-07 12:40:17 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274017083}
2025-09-07 12:40:17 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274017083}
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:40:20 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:40:20 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:40:20 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:40:20 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ywv1qcx8ap0enBW7ECfyEg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59607) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:40:20 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:40:20 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: BQ12qyu2yOcVvAVJ/i9/41SDwvU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:40:19 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:40:20.921442"}' [128 bytes]
INFO:     127.0.0.1:59609 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d c7 b8 a5 [binary, 4 bytes]
DEBUG:    < PONG 2d c7 b8 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 d1 95 9a [binary, 4 bytes]
DEBUG:    < PONG 41 d1 95 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274029529}' [46 bytes]
2025-09-07 12:40:29 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757274029529}
2025-09-07 12:40:29 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757274029529}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 69 1f 2f [binary, 4 bytes]
DEBUG:    < PONG 80 69 1f 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 5a 18 54 [binary, 4 bytes]
DEBUG:    < PONG b3 5a 18 54 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 f6 9e d1 [binary, 4 bytes]
DEBUG:    < PONG a6 f6 9e d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59617 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 94 09 5f [binary, 4 bytes]
DEBUG:    < PONG b5 94 09 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 6e ac 4b [binary, 4 bytes]
DEBUG:    < PONG c9 6e ac 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274051079}' [46 bytes]
2025-09-07 12:40:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274051079}
2025-09-07 12:40:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274051079}
INFO:     127.0.0.1:59621 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274059529}' [46 bytes]
2025-09-07 12:40:59 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757274059529}
2025-09-07 12:40:59 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757274059529}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a 90 a8 b8 [binary, 4 bytes]
DEBUG:    < PONG 0a 90 a8 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e b6 ae 95 [binary, 4 bytes]
DEBUG:    < PONG 2e b6 ae 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed cb 6e 1f [binary, 4 bytes]
DEBUG:    < PONG ed cb 6e 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f e4 7c d7 [binary, 4 bytes]
DEBUG:    < PONG 2f e4 7c d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59641 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a e9 33 22 [binary, 4 bytes]
DEBUG:    < PONG 9a e9 33 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274081079}' [46 bytes]
2025-09-07 12:41:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274081079}
2025-09-07 12:41:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274081079}
INFO:     127.0.0.1:59645 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 11 c4 41 [binary, 4 bytes]
DEBUG:    < PONG 30 11 c4 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 f7 a1 03 [binary, 4 bytes]
DEBUG:    < PONG 65 f7 a1 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274089530}' [46 bytes]
2025-09-07 12:41:29 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757274089530}
2025-09-07 12:41:29 - app.api.v1.endpoints.websocket - INFO - Received message from david_williams: {"type":"heartbeat","timestamp":1757274089530}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 2c a3 3e [binary, 4 bytes]
DEBUG:    < PONG 89 2c a3 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee 9f 30 de [binary, 4 bytes]
DEBUG:    < PONG ee 9f 30 de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:41:41 - app.services.websocket_manager - INFO - WebSocket connection closed for user david_williams
2025-09-07 12:41:41 - app.services.websocket_manager - INFO - WebSocket connection closed for user david_williams
2025-09-07 12:41:41 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user david_williams
2025-09-07 12:41:41 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user david_williams
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/gayathri_sriram HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: GxzoPnZPehKZVXaJMHe9cw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59656) - "WebSocket /api/v1/notifications/ws/gayathri_sriram" [accepted]
2025-09-07 12:41:41 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
2025-09-07 12:41:41 - app.services.websocket_manager - INFO - WebSocket connection established for user gayathri_sriram
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: FRKAsx3oomL4AbHW/qG4ZwfKa0k=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:41:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:41:41.336117"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:41:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 12:41:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user gayathri_sriram
2025-09-07 12:41:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
2025-09-07 12:41:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user gayathri_sriram
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ajsJiVq7+I1dNJV24mtTzw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59658) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 12:41:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 12:41:44 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: RFpkPBkKC2lHURtUyM0GVTZReQc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:41:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:41:44.442911"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:41:44.442911"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:41:44.442911"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 36 9c 82 [binary, 4 bytes]
DEBUG:    < PONG d6 36 9c 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59660 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f a7 e6 ad [binary, 4 bytes]
DEBUG:    < PONG 5f a7 e6 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274111079}' [46 bytes]
2025-09-07 12:41:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274111079}
2025-09-07 12:41:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274111079}
INFO:     127.0.0.1:59675 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd c8 8b 9b [binary, 4 bytes]
DEBUG:    < PONG cd c8 8b 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59677 - "GET /api/v1/chat-threads/threads/2792bf8b-a214-45a1-aed1-c9ef392acc87 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59679 - "GET /api/v1/chat-threads/threads/2ca401b8-88a7-4935-b871-080c3c7c7f49 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59679 - "GET /api/v1/chat-threads/threads/f5617c77-7f3f-4238-839d-93f69c4157b7 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 1f dc 65 [binary, 4 bytes]
DEBUG:    < PONG 7e 1f dc 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59679 - "GET /api/v1/chat-threads/threads/culture-001 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59679 - "GET /api/v1/chat-threads/threads/culture-002 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f 84 a8 8e [binary, 4 bytes]
DEBUG:    < PONG 5f 84 a8 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59696 - "GET /api/v1/chat-threads/threads/culture-003 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd c1 75 41 [binary, 4 bytes]
DEBUG:    < PONG cd c1 75 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274134448}' [46 bytes]
2025-09-07 12:42:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274134448}
2025-09-07 12:42:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274134448}
INFO:     127.0.0.1:59705 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 58 f0 53 [binary, 4 bytes]
DEBUG:    < PONG 40 58 f0 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274141079}' [46 bytes]
2025-09-07 12:42:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274141079}
2025-09-07 12:42:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274141079}
INFO:     127.0.0.1:59707 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 24 21 57 [binary, 4 bytes]
DEBUG:    < PONG 99 24 21 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 c3 0b b5 [binary, 4 bytes]
DEBUG:    < PONG d8 c3 0b b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 18 f5 3e [binary, 4 bytes]
DEBUG:    < PONG 53 18 f5 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 0a 46 58 [binary, 4 bytes]
DEBUG:    < PONG 84 0a 46 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274164448}' [46 bytes]
2025-09-07 12:42:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274164448}
2025-09-07 12:42:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274164448}
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 68 4f 09 [binary, 4 bytes]
DEBUG:    < PONG cf 68 4f 09 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 7d 1d de [binary, 4 bytes]
DEBUG:    < PONG 05 7d 1d de [binary, 4 bytes]
INFO:     127.0.0.1:59712 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 bb b3 49 [binary, 4 bytes]
INFO:     127.0.0.1:59716 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=culture-003&prompt=What%20are%20the%20most%20important%20D%26I%20metrics%20we%20should%20be%20tracking%3F HTTP/1.1" 200 OK
DEBUG:    < PONG 84 bb b3 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:42:49 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread culture-003
2025-09-07 12:42:49 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread culture-003
INFO:     127.0.0.1:59716 - "POST /api/v1/chat/stream-with-thread?thread_id=culture-003&prompt=What%20are%20the%20most%20important%20D%26I%20metrics%20we%20should%20be%20tracking%3F HTTP/1.1" 200 OK
2025-09-07 12:42:49 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:42:49 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:42:49 - httpcore.connection - DEBUG - close.started
2025-09-07 12:42:49 - httpcore.connection - DEBUG - close.started
2025-09-07 12:42:49 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:42:49 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:42:49 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:42:49 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:42:49 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1148fc6d0>
2025-09-07 12:42:49 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1148fc6d0>
2025-09-07 12:42:49 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:42:49 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:42:49 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a50df0>
2025-09-07 12:42:49 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a50df0>
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:42:49 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:42:49 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274171079}' [46 bytes]
2025-09-07 12:42:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274171079}
2025-09-07 12:42:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274171079}
2025-09-07 12:42:51 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:59721 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:42:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449220'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'104ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_ded17bdf2127836f75bb28a2aca60116'), (b'openai-processing-ms', b'6611'), (b'x-envoy-upstream-service-time', b'6615'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=CF7kJIvU7wOGXZSUeIa6FNjuLOjUxYszXiRFHNAqPj8-1757274176-1.0.1.1-fAJhJE6kvvQx3gk_L7KwHgHjoEdUP.hLeQQ4PMG2K0AteW2zxyGyVF1i8zDGm4kM1Eey.tUjQvP9FTuakdLefYVcIM6lCtYtKB8LBKUWjvg; path=/; expires=Sun, 07-Sep-25 20:12:56 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b1059a846cfb-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:42:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449220'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'104ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_ded17bdf2127836f75bb28a2aca60116'), (b'openai-processing-ms', b'6611'), (b'x-envoy-upstream-service-time', b'6615'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=CF7kJIvU7wOGXZSUeIa6FNjuLOjUxYszXiRFHNAqPj8-1757274176-1.0.1.1-fAJhJE6kvvQx3gk_L7KwHgHjoEdUP.hLeQQ4PMG2K0AteW2zxyGyVF1i8zDGm4kM1Eey.tUjQvP9FTuakdLefYVcIM6lCtYtKB8LBKUWjvg; path=/; expires=Sun, 07-Sep-25 20:12:56 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b1059a846cfb-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:42:56 - httpcore.http11 - DEBUG - response_closed.complete
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 12 ce 3b [binary, 4 bytes]
DEBUG:    < PONG a2 12 ce 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:43:01 - watchfiles.main - DEBUG - 2 changes detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 18 00 e8 [binary, 4 bytes]
DEBUG:    < PONG 1f 18 00 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 b0 1c d8 [binary, 4 bytes]
DEBUG:    < PONG e4 b0 1c d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 8e c7 41 [binary, 4 bytes]
DEBUG:    < PONG a3 8e c7 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59723 - "OPTIONS /api/v1/chat-threads/threads/search HTTP/1.1" 200 OK
INFO:     127.0.0.1:59723 - "POST /api/v1/chat-threads/threads/search HTTP/1.1" 200 OK
INFO:     127.0.0.1:59723 - "GET /api/v1/chat-threads/threads/culture-003 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59727 - "GET /api/v1/chat-threads/threads/a1fb0f8f-3ba3-4512-ba90-28877eb173d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/b71572d1-6a32-4e98-921c-897201b5d46a HTTP/1.1" 200 OK
INFO:     127.0.0.1:59730 - "GET /api/v1/chat-threads/threads/2792bf8b-a214-45a1-aed1-c9ef392acc87 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59723 - "GET /api/v1/chat-threads/threads/culture-001 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59732 - "GET /api/v1/chat-threads/threads/2ca401b8-88a7-4935-b871-080c3c7c7f49 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59733 - "GET /api/v1/chat-threads/threads/f5617c77-7f3f-4238-839d-93f69c4157b7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59727 - "GET /api/v1/chat-threads/threads/culture-002 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/culture-004 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "POST /api/v1/chat-threads/threads/search HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/culture-003 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59727 - "GET /api/v1/chat-threads/threads/a1fb0f8f-3ba3-4512-ba90-28877eb173d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59733 - "GET /api/v1/chat-threads/threads/2792bf8b-a214-45a1-aed1-c9ef392acc87 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59723 - "GET /api/v1/chat-threads/threads/2ca401b8-88a7-4935-b871-080c3c7c7f49 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59732 - "GET /api/v1/chat-threads/threads/culture-001 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59730 - "GET /api/v1/chat-threads/threads/culture-002 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/culture-004 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "POST /api/v1/chat-threads/threads/search HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/2792bf8b-a214-45a1-aed1-c9ef392acc87 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59732 - "GET /api/v1/chat-threads/threads/culture-002 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59732 - "POST /api/v1/chat-threads/threads/search HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274194447}' [46 bytes]
2025-09-07 12:43:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274194447}
2025-09-07 12:43:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274194447}
INFO:     127.0.0.1:59732 - "POST /api/v1/chat-threads/threads/search HTTP/1.1" 200 OK
INFO:     127.0.0.1:59732 - "GET /api/v1/chat-threads/threads/2792bf8b-a214-45a1-aed1-c9ef392acc87 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/culture-002 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "POST /api/v1/chat-threads/threads/search HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/culture-003 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59732 - "GET /api/v1/chat-threads/threads/a1fb0f8f-3ba3-4512-ba90-28877eb173d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59733 - "GET /api/v1/chat-threads/threads/2792bf8b-a214-45a1-aed1-c9ef392acc87 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59723 - "GET /api/v1/chat-threads/threads/2ca401b8-88a7-4935-b871-080c3c7c7f49 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59727 - "GET /api/v1/chat-threads/threads/culture-001 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59730 - "GET /api/v1/chat-threads/threads/culture-002 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/culture-004 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "POST /api/v1/chat-threads/threads/search HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/culture-003 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59732 - "GET /api/v1/chat-threads/threads/a1fb0f8f-3ba3-4512-ba90-28877eb173d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59733 - "GET /api/v1/chat-threads/threads/b71572d1-6a32-4e98-921c-897201b5d46a HTTP/1.1" 200 OK
INFO:     127.0.0.1:59723 - "GET /api/v1/chat-threads/threads/2792bf8b-a214-45a1-aed1-c9ef392acc87 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59727 - "GET /api/v1/chat-threads/threads/2ca401b8-88a7-4935-b871-080c3c7c7f49 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59730 - "GET /api/v1/chat-threads/threads/f5617c77-7f3f-4238-839d-93f69c4157b7 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59728 - "GET /api/v1/chat-threads/threads/culture-001 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59730 - "GET /api/v1/chat-threads/threads/culture-002 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59727 - "GET /api/v1/chat-threads/threads/culture-004 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59736 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 86 67 19 [binary, 4 bytes]
DEBUG:    < PONG 51 86 67 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274201079}' [46 bytes]
2025-09-07 12:43:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274201079}
2025-09-07 12:43:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274201079}
INFO:     127.0.0.1:59738 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 fe 92 18 [binary, 4 bytes]
DEBUG:    < PONG 76 fe 92 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 8c 03 4b [binary, 4 bytes]
DEBUG:    < PONG 57 8c 03 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c4 04 73 b0 [binary, 4 bytes]
DEBUG:    < PONG c4 04 73 b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 70 f1 38 [binary, 4 bytes]
DEBUG:    < PONG 12 70 f1 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274224447}' [46 bytes]
2025-09-07 12:43:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274224447}
2025-09-07 12:43:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274224447}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '%E\x0e&' [text, 4 bytes]
DEBUG:    < PONG '%E\x0e&' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59742 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 a2 e9 c6 [binary, 4 bytes]
DEBUG:    < PONG 67 a2 e9 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be c0 d1 c9 [binary, 4 bytes]
DEBUG:    < PONG be c0 d1 c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274231078}' [46 bytes]
2025-09-07 12:43:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274231078}
2025-09-07 12:43:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274231078}
INFO:     127.0.0.1:59746 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 33 f4 13 [binary, 4 bytes]
DEBUG:    < PONG 62 33 f4 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 cb 25 e9 [binary, 4 bytes]
DEBUG:    < PONG 17 cb 25 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 ac ff 7c [binary, 4 bytes]
DEBUG:    < PONG b1 ac ff 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 1d 17 e8 [binary, 4 bytes]
DEBUG:    < PONG 55 1d 17 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59765 - "OPTIONS /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
2025-09-07 12:44:13 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create an employee satisfaction survey with 3 questions...
2025-09-07 12:44:13 - app.api.v1.endpoints.chat - INFO - Generating survey template for: create an employee satisfaction survey with 3 questions...
2025-09-07 12:44:13 - httpcore.connection - DEBUG - close.started
2025-09-07 12:44:13 - httpcore.connection - DEBUG - close.started
2025-09-07 12:44:13 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:44:13 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:44:13 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:44:13 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:44:13 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a0b250>
2025-09-07 12:44:13 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a0b250>
2025-09-07 12:44:13 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:44:13 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:44:13 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11490e2b0>
2025-09-07 12:44:13 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11490e2b0>
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:44:13 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274254448}' [46 bytes]
2025-09-07 12:44:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274254448}
2025-09-07 12:44:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274254448}
INFO:     127.0.0.1:59768 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:44:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449127'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'116ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_553eb0dfa57c8a7b5408980ebdae9bda'), (b'openai-processing-ms', b'5650'), (b'x-envoy-upstream-service-time', b'5652'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b3167e127678-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:44:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449127'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'116ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_553eb0dfa57c8a7b5408980ebdae9bda'), (b'openai-processing-ms', b'5650'), (b'x-envoy-upstream-service-time', b'5652'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b3167e127678-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:44:19 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:59765 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 21 85 e7 [binary, 4 bytes]
DEBUG:    < PONG 97 21 85 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274261081}' [46 bytes]
2025-09-07 12:44:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274261081}
2025-09-07 12:44:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274261081}
INFO:     127.0.0.1:59794 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 d1 ef 15 [binary, 4 bytes]
DEBUG:    < PONG 72 d1 ef 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 80 05 23 [binary, 4 bytes]
DEBUG:    < PONG 04 80 05 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x04D\x1f%' [text, 4 bytes]
DEBUG:    < PONG '\x04D\x1f%' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe e0 09 6c [binary, 4 bytes]
DEBUG:    < PONG fe e0 09 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274284447}' [46 bytes]
2025-09-07 12:44:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274284447}
2025-09-07 12:44:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274284447}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 c4 ad 09 [binary, 4 bytes]
DEBUG:    < PONG e5 c4 ad 09 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59799 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 98 a7 c1 [binary, 4 bytes]
DEBUG:    < PONG 00 98 a7 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d 69 dc 3b [binary, 4 bytes]
DEBUG:    < PONG 4d 69 dc 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274291078}' [46 bytes]
2025-09-07 12:44:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274291078}
2025-09-07 12:44:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274291078}
INFO:     127.0.0.1:59804 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a cf ea 6d [binary, 4 bytes]
DEBUG:    < PONG 5a cf ea 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 f7 5f 9c [binary, 4 bytes]
DEBUG:    < PONG a2 f7 5f 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2b 05 ec ab [binary, 4 bytes]
DEBUG:    < PONG 2b 05 ec ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 ab c1 7b [binary, 4 bytes]
DEBUG:    < PONG 48 ab c1 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274314448}' [46 bytes]
2025-09-07 12:45:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274314448}
2025-09-07 12:45:14 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274314448}
INFO:     127.0.0.1:59819 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca d6 7d 3d [binary, 4 bytes]
DEBUG:    < PONG ca d6 7d 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274321078}' [46 bytes]
2025-09-07 12:45:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274321078}
2025-09-07 12:45:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274321078}
INFO:     127.0.0.1:59821 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 93 e3 37 [binary, 4 bytes]
DEBUG:    < PONG cb 93 e3 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e d9 dc 57 [binary, 4 bytes]
DEBUG:    < PONG 2e d9 dc 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 09 f3 31 [binary, 4 bytes]
DEBUG:    < PONG a7 09 f3 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 4e 91 5d [binary, 4 bytes]
DEBUG:    < PONG 57 4e 91 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274344448}' [46 bytes]
2025-09-07 12:45:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274344448}
2025-09-07 12:45:44 - app.api.v1.endpoints.websocket - INFO - Received message from michael_chen: {"type":"heartbeat","timestamp":1757274344448}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 32 f4 c8 [binary, 4 bytes]
DEBUG:    < PONG e1 32 f4 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:45:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:45:45 - app.services.websocket_manager - INFO - WebSocket connection closed for user michael_chen
2025-09-07 12:45:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
2025-09-07 12:45:45 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user michael_chen
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: rGCfvIwfyG8rhWhuMOoh7A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59826) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:45:45 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:45:45 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Uk9NmpdTlCu95SfjbySAeW8fF7w=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:45:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:45:45.932889"}' [128 bytes]
INFO:     127.0.0.1:59828 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 a7 97 02 [binary, 4 bytes]
DEBUG:    < PONG a7 a7 97 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df e7 f0 cc [binary, 4 bytes]
DEBUG:    < PONG df e7 f0 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274351079}' [46 bytes]
2025-09-07 12:45:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274351079}
2025-09-07 12:45:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274351079}
INFO:     127.0.0.1:59832 - "GET /api/v1/chat-threads/threads/a1fb0f8f-3ba3-4512-ba90-28877eb173d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59834 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 31 b2 aa [binary, 4 bytes]
DEBUG:    < PONG 56 31 b2 aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:46:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:46:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:46:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:46:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 fa e9 74 [binary, 4 bytes]
DEBUG:    < PONG 55 fa e9 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 f6 78 59 [binary, 4 bytes]
DEBUG:    < PONG b7 f6 78 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: zwlWv/gUCAHb278mrqRutg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59839) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:46:10 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:46:10 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
INFO:     127.0.0.1:59840 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: SwBeeTGxdhYHypi3CBx12ApIupg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:46:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:46:10.690733"}' [128 bytes]
INFO:     127.0.0.1:59845 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:59842 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59842 - "OPTIONS /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:59845 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ZsPDkuTwjeakIoX14mw+uw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59846) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:46:10 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:46:10 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:46:10.714184"}' [128 bytes]
INFO:     127.0.0.1:59842 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ezpeFY51gBTluTLPfe1fiQDVVl0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:46:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:46:10.714184"}' [128 bytes]
INFO:     127.0.0.1:59845 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:59842 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59845 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:46:10 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:46:15 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:59853 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 5f 64 48 [binary, 4 bytes]
DEBUG:    < PONG 9d 5f 64 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274381079}' [46 bytes]
2025-09-07 12:46:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274381079}
2025-09-07 12:46:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274381079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a ef 91 f9 [binary, 4 bytes]
DEBUG:    < PONG 5a ef 91 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe bd 86 92 [binary, 4 bytes]
DEBUG:    < PONG fe bd 86 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 33 cb 53 [binary, 4 bytes]
DEBUG:    < PONG 94 33 cb 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 d8 d5 af [binary, 4 bytes]
DEBUG:    < PONG 44 d8 d5 af [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59855 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=92b8c553-25c1-43f7-ad73-8394e1889ae0&prompt=give%20me%20the%20top%203%20news%20items%20as%20it%20relates%20to%20company%20culture HTTP/1.1" 200 OK
2025-09-07 12:46:32 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 92b8c553-25c1-43f7-ad73-8394e1889ae0
2025-09-07 12:46:32 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 92b8c553-25c1-43f7-ad73-8394e1889ae0
INFO:     127.0.0.1:59855 - "POST /api/v1/chat/stream-with-thread?thread_id=92b8c553-25c1-43f7-ad73-8394e1889ae0&prompt=give%20me%20the%20top%203%20news%20items%20as%20it%20relates%20to%20company%20culture HTTP/1.1" 200 OK
2025-09-07 12:46:32 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:46:32 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:46:32 - httpcore.connection - DEBUG - close.started
2025-09-07 12:46:32 - httpcore.connection - DEBUG - close.started
2025-09-07 12:46:32 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:46:32 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:46:32 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:46:32 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:46:32 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a2df70>
2025-09-07 12:46:32 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a2df70>
2025-09-07 12:46:32 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:46:32 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:46:32 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:46:32 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a740d0>
2025-09-07 12:46:32 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a740d0>
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:46:32 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:46:33 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:59872 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274400726}' [46 bytes]
2025-09-07 12:46:40 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274400726}
2025-09-07 12:46:40 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274400726}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 42 2f b5 [binary, 4 bytes]
DEBUG:    < PONG 79 42 2f b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:46:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449472'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'70ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_21ed466480b31d6c47e0ebd2d7b4c0e5'), (b'openai-processing-ms', b'9283'), (b'x-envoy-upstream-service-time', b'9286'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b6786f412661-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:46:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449472'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'70ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_21ed466480b31d6c47e0ebd2d7b4c0e5'), (b'openai-processing-ms', b'9283'), (b'x-envoy-upstream-service-time', b'9286'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b6786f412661-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:46:41 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:59874 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c fb 70 9d [binary, 4 bytes]
DEBUG:    < PONG 5c fb 70 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 c1 dc 07 [binary, 4 bytes]
DEBUG:    < PONG 93 c1 dc 07 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 6e 5a 98 [binary, 4 bytes]
DEBUG:    < PONG f7 6e 5a 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 09 f2 c0 [binary, 4 bytes]
DEBUG:    < PONG 51 09 f2 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:46:50 - httpcore.connection - DEBUG - close.started
2025-09-07 12:46:50 - httpcore.connection - DEBUG - close.started
2025-09-07 12:46:50 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:46:50 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:46:50 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:46:50 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:46:50 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a51a00>
2025-09-07 12:46:50 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a51a00>
2025-09-07 12:46:50 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10dff8900> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:46:50 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10dff8900> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:46:50 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a516a0>
2025-09-07 12:46:50 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a516a0>
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:46:50 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:46:50 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274411079}' [46 bytes]
2025-09-07 12:46:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274411079}
2025-09-07 12:46:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274411079}
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:46:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449838'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'21ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_b98a491f2243be7fcba5468a470b2252'), (b'openai-processing-ms', b'596'), (b'x-envoy-upstream-service-time', b'677'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=ySF8kfHSwrqb9_5j2YLinYO4B9a4Np.1kS_.YauMZho-1757274411-1.0.1.1-02O.Uh6LUM5sffCeyIUoFzRiCQd.rN9KX6XTSqHzaJGZMYwBIyHx71UQiZtWTeRHsdOyUwa0zxQkfXDTl2Jx5eAz2eLCfNlE5bj7Nyh42qU; path=/; expires=Sun, 07-Sep-25 20:16:51 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b6ec4e15d461-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:46:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449838'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'21ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_b98a491f2243be7fcba5468a470b2252'), (b'openai-processing-ms', b'596'), (b'x-envoy-upstream-service-time', b'677'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=ySF8kfHSwrqb9_5j2YLinYO4B9a4Np.1kS_.YauMZho-1757274411-1.0.1.1-02O.Uh6LUM5sffCeyIUoFzRiCQd.rN9KX6XTSqHzaJGZMYwBIyHx71UQiZtWTeRHsdOyUwa0zxQkfXDTl2Jx5eAz2eLCfNlE5bj7Nyh42qU; path=/; expires=Sun, 07-Sep-25 20:16:51 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b6ec4e15d461-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:46:51 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:59855 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:46:51 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:46:54 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 dc 61 1e [binary, 4 bytes]
DEBUG:    < PONG e2 dc 61 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 f0 ed b0 [binary, 4 bytes]
DEBUG:    < PONG 54 f0 ed b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 d5 ef 48 [binary, 4 bytes]
DEBUG:    < PONG 35 d5 ef 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59990 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 11 9b d8 [binary, 4 bytes]
DEBUG:    < PONG 6f 11 9b d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274430726}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 4a fe 5d [binary, 4 bytes]
2025-09-07 12:47:10 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274430726}
2025-09-07 12:47:10 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274430726}
DEBUG:    < PONG b0 4a fe 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:59998 - "OPTIONS /api/v1/chat-threads/threads/d6bf4c38-4429-44da-a1fd-f981d7279005 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59998 - "DELETE /api/v1/chat-threads/threads/d6bf4c38-4429-44da-a1fd-f981d7279005 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59998 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:47:12 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59998 - "OPTIONS /api/v1/chat-threads/threads/b568c258-3601-4114-a575-0a28e92f89dc HTTP/1.1" 200 OK
INFO:     127.0.0.1:59998 - "DELETE /api/v1/chat-threads/threads/b568c258-3601-4114-a575-0a28e92f89dc HTTP/1.1" 200 OK
INFO:     127.0.0.1:59998 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:47:13 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59998 - "OPTIONS /api/v1/chat-threads/threads/86defffb-90d8-45c4-8e27-3a8a2e9ca57c HTTP/1.1" 200 OK
INFO:     127.0.0.1:59998 - "DELETE /api/v1/chat-threads/threads/86defffb-90d8-45c4-8e27-3a8a2e9ca57c HTTP/1.1" 200 OK
INFO:     127.0.0.1:59998 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:47:14 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:59998 - "GET /api/v1/chat-threads/threads/2792bf8b-a214-45a1-aed1-c9ef392acc87 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60000 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:47:18 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 65 7b 2a [binary, 4 bytes]
DEBUG:    < PONG ab 65 7b 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274441079}' [46 bytes]
2025-09-07 12:47:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274441079}
2025-09-07 12:47:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274441079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 2c b7 6c [binary, 4 bytes]
DEBUG:    < PONG 36 2c b7 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c bf 4e 16 [binary, 4 bytes]
DEBUG:    < PONG 8c bf 4e 16 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 ca e0 a8 [binary, 4 bytes]
DEBUG:    < PONG 37 ca e0 a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 37 c1 f3 [binary, 4 bytes]
DEBUG:    < PONG 8c 37 c1 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60020 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274460726}' [46 bytes]
2025-09-07 12:47:40 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274460726}
2025-09-07 12:47:40 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274460726}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e 08 90 6e [binary, 4 bytes]
DEBUG:    < PONG 8e 08 90 6e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60035 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 32 84 3c [binary, 4 bytes]
DEBUG:    < PONG be 32 84 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x10m\x1eE' [text, 4 bytes]
DEBUG:    < PONG '\x10m\x1eE' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 c3 49 0b [binary, 4 bytes]
DEBUG:    < PONG 63 c3 49 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db ee d4 45 [binary, 4 bytes]
DEBUG:    < PONG db ee d4 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274471079}' [46 bytes]
2025-09-07 12:47:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274471079}
2025-09-07 12:47:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274471079}
2025-09-07 12:48:00 - app.api.v1.endpoints.chat - INFO - Generating survey template for: Generate a creative survey name for employee engagement...
2025-09-07 12:48:00 - app.api.v1.endpoints.chat - INFO - Generating survey template for: Generate a creative survey name for employee engagement...
2025-09-07 12:48:00 - httpcore.connection - DEBUG - close.started
2025-09-07 12:48:00 - httpcore.connection - DEBUG - close.started
2025-09-07 12:48:00 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:48:00 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:48:00 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:48:00 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 8c 28 52 [binary, 4 bytes]
DEBUG:    < PONG e9 8c 28 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:48:01 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a896d0>
2025-09-07 12:48:01 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a896d0>
2025-09-07 12:48:01 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:48:01 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:48:01 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a89640>
2025-09-07 12:48:01 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a89640>
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:48:01 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 1b f8 1b [binary, 4 bytes]
DEBUG:    < PONG 13 1b f8 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:48:08 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449129'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'116ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_d22b8f024cef2474f384a2a6dfbe09b3'), (b'openai-processing-ms', b'6866'), (b'x-envoy-upstream-service-time', b'6868'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b8a3de5045f7-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:48:08 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449129'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'116ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_d22b8f024cef2474f384a2a6dfbe09b3'), (b'openai-processing-ms', b'6866'), (b'x-envoy-upstream-service-time', b'6868'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8b8a3de5045f7-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:48:08 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:60053 - "POST /api/v1/chat/generate-survey-template HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 d6 dd 46 [binary, 4 bytes]
DEBUG:    < PONG f7 d6 dd 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60053 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 5a 5c 14 [binary, 4 bytes]
DEBUG:    < PONG c0 5a 5c 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274490725}' [46 bytes]
2025-09-07 12:48:10 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274490725}
2025-09-07 12:48:10 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274490725}
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 3f 32 ea [binary, 4 bytes]
DEBUG:    < PONG b9 3f 32 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60069 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'jâ ·' [text, 4 bytes]
DEBUG:    < PONG 'jâ ·' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274501079}' [46 bytes]
2025-09-07 12:48:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274501079}
2025-09-07 12:48:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274501079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 09 99 6f [binary, 4 bytes]
DEBUG:    < PONG a4 09 99 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 66 c3 6c [binary, 4 bytes]
DEBUG:    < PONG 2e 66 c3 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 ba 5c 90 [binary, 4 bytes]
DEBUG:    < PONG 60 ba 5c 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea 3c e9 ac [binary, 4 bytes]
DEBUG:    < PONG ea 3c e9 ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60073 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274520726}' [46 bytes]
2025-09-07 12:48:40 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274520726}
2025-09-07 12:48:40 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274520726}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a 32 33 8f [binary, 4 bytes]
DEBUG:    < PONG 1a 32 33 8f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60075 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a e6 cc 26 [binary, 4 bytes]
DEBUG:    < PONG 5a e6 cc 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 2f eb a5 [binary, 4 bytes]
DEBUG:    < PONG 54 2f eb a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 2b 4c a8 [binary, 4 bytes]
DEBUG:    < PONG 84 2b 4c a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 53 05 35 [binary, 4 bytes]
DEBUG:    < PONG a2 53 05 35 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274531105}' [46 bytes]
2025-09-07 12:48:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274531105}
2025-09-07 12:48:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274531105}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 7d 3e ff [binary, 4 bytes]
DEBUG:    < PONG 9b 7d 3e ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 92 91 da [binary, 4 bytes]
DEBUG:    < PONG 6a 92 91 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 7d f3 17 [binary, 4 bytes]
DEBUG:    < PONG 06 7d f3 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60079 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 3f 93 52 [binary, 4 bytes]
DEBUG:    < PONG 22 3f 93 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274550726}' [46 bytes]
2025-09-07 12:49:10 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274550726}
2025-09-07 12:49:10 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274550726}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'B\x168X' [text, 4 bytes]
DEBUG:    < PONG 'B\x168X' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60081 - "OPTIONS /api/v1/chat/stream-with-thread?thread_id=2792bf8b-a214-45a1-aed1-c9ef392acc87&prompt=%5BSurvey%20Creation%20Context%3A%20Currently%20working%20on%20survey%20%22Culture%20Generate%20A%20Creative%20Survey%20Name%20For%20Employee%20Engag%22%20at%20step%202%20(context).%20Current%20survey%20data%3A%20name%3D%22Culture%20Generate%20A%20Creative%20Survey%20Name%20For%20Employee%20Engag%22%2C%20context%3D%22Generate%20a%20creative%20survey%20name%20for%20employee%20engagement%22%2C%202%20questions%20defined%2C%201%20classifiers%2C%201%20metrics.%5D%20User%20request%3A%20can%20you%20change%20the%20title%20to%20employee%20engagement HTTP/1.1" 200 OK
2025-09-07 12:49:12 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 2792bf8b-a214-45a1-aed1-c9ef392acc87
2025-09-07 12:49:12 - app.api.v1.endpoints.chat - INFO - Received streaming chat request for thread 2792bf8b-a214-45a1-aed1-c9ef392acc87
INFO:     127.0.0.1:60081 - "POST /api/v1/chat/stream-with-thread?thread_id=2792bf8b-a214-45a1-aed1-c9ef392acc87&prompt=%5BSurvey%20Creation%20Context%3A%20Currently%20working%20on%20survey%20%22Culture%20Generate%20A%20Creative%20Survey%20Name%20For%20Employee%20Engag%22%20at%20step%202%20(context).%20Current%20survey%20data%3A%20name%3D%22Culture%20Generate%20A%20Creative%20Survey%20Name%20For%20Employee%20Engag%22%2C%20context%3D%22Generate%20a%20creative%20survey%20name%20for%20employee%20engagement%22%2C%202%20questions%20defined%2C%201%20classifiers%2C%201%20metrics.%5D%20User%20request%3A%20can%20you%20change%20the%20title%20to%20employee%20engagement HTTP/1.1" 200 OK
2025-09-07 12:49:12 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:49:12 - app.services.openai_service - INFO - Initiating gpt-4.1 Responses API call with web search: True
2025-09-07 12:49:12 - httpcore.connection - DEBUG - close.started
2025-09-07 12:49:12 - httpcore.connection - DEBUG - close.started
2025-09-07 12:49:12 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:49:12 - httpcore.connection - DEBUG - close.complete
2025-09-07 12:49:12 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:49:12 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-07 12:49:12 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a51250>
2025-09-07 12:49:12 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a51250>
2025-09-07 12:49:12 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:49:12 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10def3890> server_hostname='api.openai.com' timeout=5.0
2025-09-07 12:49:12 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a85430>
2025-09-07 12:49:12 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114a85430>
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - send_request_body.complete
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:49:12 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-07 12:49:12 - watchfiles.main - DEBUG - 2 changes detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:49:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449277'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'96ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_4584449ebde4d6e7a9f45273391f0e2f'), (b'openai-processing-ms', b'2180'), (b'x-envoy-upstream-service-time', b'2183'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8ba632a537de4-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 07 Sep 2025 19:49:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'450000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'449277'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'96ms'), (b'openai-version', b'2020-10-01'), (b'openai-organization', b'user-knjlzgxswesrudhiuqhfddgj'), (b'openai-project', b'proj_5U72iGaa6G8r6dGo2gXOIAt4'), (b'x-request-id', b'req_4584449ebde4d6e7a9f45273391f0e2f'), (b'openai-processing-ms', b'2180'), (b'x-envoy-upstream-service-time', b'2183'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'97b8ba632a537de4-SEA'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - response_closed.started
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - response_closed.complete
2025-09-07 12:49:15 - httpcore.http11 - DEBUG - response_closed.complete
INFO:     127.0.0.1:60085 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:49:16 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
2025-09-07 12:49:19 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 d0 b0 90 [binary, 4 bytes]
DEBUG:    < PONG 40 d0 b0 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274561079}' [46 bytes]
2025-09-07 12:49:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274561079}
2025-09-07 12:49:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274561079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a 8b e1 f9 [binary, 4 bytes]
DEBUG:    < PONG 5a 8b e1 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 0c ec b0 [binary, 4 bytes]
DEBUG:    < PONG 6f 0c ec b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb ab 4c b7 [binary, 4 bytes]
DEBUG:    < PONG fb ab 4c b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 dd 84 46 [binary, 4 bytes]
DEBUG:    < PONG e0 dd 84 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:49:37 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:49:37 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:49:37 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:49:37 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 05 8b 78 [binary, 4 bytes]
DEBUG:    < PONG f0 05 8b 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60091 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: oqc7xVI3sGRTcF0Zn6vCTA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60093) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:49:45 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:49:45 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: YwdUjXvwvLxW/i2dd7nLfA25JRk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:49:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60098 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:49:45.210193"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:49:45.210193"}' [128 bytes]
INFO:     127.0.0.1:60095 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60098 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: qG0gZC0uUEj9PnyqlITjGA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60099) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:49:45 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:49:45 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: qGfbY+lFeG4hm1E8rCsDgvVMH/k=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:49:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:49:45.231717"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:49:45.231717"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:49:45.231717"}' [128 bytes]
INFO:     127.0.0.1:60095 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:60098 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:60095 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60098 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:49:45 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:60104 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '%é¶¨' [text, 4 bytes]
DEBUG:    < PONG '%é¶¨' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 6e af 77 [binary, 4 bytes]
DEBUG:    < PONG 13 6e af 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ' zL ' [text, 4 bytes]
DEBUG:    < PONG ' zL ' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274591078}' [46 bytes]
2025-09-07 12:49:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274591078}
2025-09-07 12:49:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274591078}
2025-09-07 12:49:56 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 09 7b 81 [binary, 4 bytes]
DEBUG:    < PONG 32 09 7b 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:50:03 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:50:03 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:50:03 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:50:03 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 9e 94 3d [binary, 4 bytes]
DEBUG:    < PONG d4 9e 94 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 6e 95 12 [binary, 4 bytes]
DEBUG:    < PONG 7f 6e 95 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f f5 12 c5 [binary, 4 bytes]
DEBUG:    < PONG 5f f5 12 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 4f 63 84 [binary, 4 bytes]
DEBUG:    < PONG a1 4f 63 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60110 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x026fj' [text, 4 bytes]
DEBUG:    < PONG '\x026fj' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274621079}' [46 bytes]
2025-09-07 12:50:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274621079}
2025-09-07 12:50:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274621079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 54 2d ca [binary, 4 bytes]
DEBUG:    < PONG a3 54 2d ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d 13 cb f6 [binary, 4 bytes]
DEBUG:    < PONG 1d 13 cb f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'W?>z' [text, 4 bytes]
DEBUG:    < PONG 'W?>z' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 d9 6f 39 [binary, 4 bytes]
DEBUG:    < PONG c9 d9 6f 39 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 96 0c c5 [binary, 4 bytes]
DEBUG:    < PONG a2 96 0c c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 ec 48 72 [binary, 4 bytes]
DEBUG:    < PONG d1 ec 48 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60116 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 6e 68 e0 [binary, 4 bytes]
DEBUG:    < PONG 78 6e 68 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c e0 12 32 [binary, 4 bytes]
DEBUG:    < PONG 1c e0 12 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x05vGv' [text, 4 bytes]
DEBUG:    < PONG '\x05vGv' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274651079}' [46 bytes]
2025-09-07 12:50:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274651079}
2025-09-07 12:50:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274651079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 4d c1 0d [binary, 4 bytes]
DEBUG:    < PONG c9 4d c1 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 33 bc 7b [binary, 4 bytes]
DEBUG:    < PONG 55 33 bc 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 9f bd 78 [binary, 4 bytes]
DEBUG:    < PONG d1 9f bd 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 0f c0 c1 [binary, 4 bytes]
DEBUG:    < PONG 13 0f c0 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f 29 fe 77 [binary, 4 bytes]
DEBUG:    < PONG 4f 29 fe 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60120 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d 95 c0 d6 [binary, 4 bytes]
DEBUG:    < PONG 4d 95 c0 d6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274681079}' [46 bytes]
2025-09-07 12:51:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274681079}
2025-09-07 12:51:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274681079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x18MCX' [text, 4 bytes]
DEBUG:    < PONG '\x18MCX' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d 11 3b d2 [binary, 4 bytes]
DEBUG:    < PONG 7d 11 3b d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d b1 30 d7 [binary, 4 bytes]
DEBUG:    < PONG 7d b1 30 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 b9 d8 ea [binary, 4 bytes]
DEBUG:    < PONG e7 b9 d8 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60123 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: iGBurYQxz3obyrFSTGfGRQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60126) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:51:37 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:51:37 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gNzX6JRZ1mAvs0P9uPSkSq1n6Yk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:51:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60130 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:51:37.389909"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:51:37.389909"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:51:37.389909"}' [128 bytes]
INFO:     127.0.0.1:60127 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60130 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60127 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: H4E5ZYyUm5+565T60xtWKg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60131) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:51:37 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:51:37 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:51:37.422840"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:51:37.422840"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QIh49jPrMbslgqi5H3NwyHT9teE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:51:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60130 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:51:37.422840"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:51:37.422840"}' [128 bytes]
INFO:     127.0.0.1:60127 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60127 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:51:37 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d f9 7c b7 [binary, 4 bytes]
DEBUG:    < PONG 5d f9 7c b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:51:44 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 b0 f5 0e [binary, 4 bytes]
DEBUG:    < PONG 21 b0 f5 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60136 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 f7 36 72 [binary, 4 bytes]
DEBUG:    < PONG 35 f7 36 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c 9a 9e 53 [binary, 4 bytes]
DEBUG:    < PONG 4c 9a 9e 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 4a ec e3 [binary, 4 bytes]
DEBUG:    < PONG 51 4a ec e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274711079}' [46 bytes]
2025-09-07 12:51:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274711079}
2025-09-07 12:51:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274711079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c c6 40 dc [binary, 4 bytes]
DEBUG:    < PONG 2c c6 40 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 a5 e0 6a [binary, 4 bytes]
DEBUG:    < PONG 29 a5 e0 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 e0 7b f4 [binary, 4 bytes]
DEBUG:    < PONG e0 e0 7b f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d 30 8f 79 [binary, 4 bytes]
DEBUG:    < PONG 2d 30 8f 79 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec c7 9f 33 [binary, 4 bytes]
DEBUG:    < PONG ec c7 9f 33 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60156 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274727426}' [46 bytes]
2025-09-07 12:52:07 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274727426}
2025-09-07 12:52:07 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274727426}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 eb 2e 2b [binary, 4 bytes]
DEBUG:    < PONG 67 eb 2e 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d a1 dc 02 [binary, 4 bytes]
DEBUG:    < PONG 4d a1 dc 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60172 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d fb 67 55 [binary, 4 bytes]
DEBUG:    < PONG 5d fb 67 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 a8 51 52 [binary, 4 bytes]
DEBUG:    < PONG 84 a8 51 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:52:20 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:52:20 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:52:20 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:52:20 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 0e c3 cf [binary, 4 bytes]
DEBUG:    < PONG 89 0e c3 cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274741079}' [46 bytes]
2025-09-07 12:52:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274741079}
2025-09-07 12:52:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274741079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 08 13 80 [binary, 4 bytes]
DEBUG:    < PONG 26 08 13 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 64 0d f4 [binary, 4 bytes]
DEBUG:    < PONG 20 64 0d f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: L0DwnDSIynJPlLgxt1G6mA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60187) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:52:27 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:52:27 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.622617"}' [128 bytes]
INFO:     127.0.0.1:60190 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: bsQWOZ3ziqKbuJRWiTq2XNYcHwk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:52:26 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.622617"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.622617"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.622617"}' [128 bytes]
INFO:     127.0.0.1:60190 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60191 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60190 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 9w/NNk1L50beB+vFoAq2Ng==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60195) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:52:27 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:52:27 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.644325"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.644325"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.644325"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.644325"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: MFaam/eh3muMK1P36U5Qx6Tdd0k=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:52:26 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:52:27.644325"}' [128 bytes]
INFO:     127.0.0.1:60191 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:60190 - "POST /api/v1/chat-threads/threads HTTP/1.1" 200 OK
INFO:     127.0.0.1:60191 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60190 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:52:27 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 8a c9 f7 [binary, 4 bytes]
DEBUG:    < PONG f1 8a c9 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 06 63 5c [binary, 4 bytes]
DEBUG:    < PONG f6 06 63 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:52:34 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 15 a2 e3 [binary, 4 bytes]
DEBUG:    < PONG 77 15 a2 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '}5Ó‰' [text, 4 bytes]
DEBUG:    < PONG '}5Ó‰' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 4f 3e 8a [binary, 4 bytes]
DEBUG:    < PONG 8a 4f 3e 8a [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60217 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 92 16 75 [binary, 4 bytes]
DEBUG:    < PONG f8 92 16 75 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 d1 45 4c [binary, 4 bytes]
DEBUG:    < PONG 90 d1 45 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d a4 66 28 [binary, 4 bytes]
DEBUG:    < PONG 0d a4 66 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 83 c2 3d [binary, 4 bytes]
DEBUG:    < PONG e2 83 c2 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 15 a2 86 [binary, 4 bytes]
DEBUG:    < PONG 7c 15 a2 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274771078}' [46 bytes]
2025-09-07 12:52:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274771078}
2025-09-07 12:52:51 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274771078}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 c9 3d f7 [binary, 4 bytes]
DEBUG:    < PONG 86 c9 3d f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60231 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274777653}' [46 bytes]
2025-09-07 12:52:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274777653}
2025-09-07 12:52:57 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274777653}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 f6 a9 3a [binary, 4 bytes]
DEBUG:    < PONG 32 f6 a9 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 04 7b bd [binary, 4 bytes]
DEBUG:    < PONG bd 04 7b bd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 b2 da de [binary, 4 bytes]
DEBUG:    < PONG 94 b2 da de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 66 ab 51 [binary, 4 bytes]
DEBUG:    < PONG c9 66 ab 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe c3 9a 52 [binary, 4 bytes]
DEBUG:    < PONG fe c3 9a 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c 19 da 19 [binary, 4 bytes]
DEBUG:    < PONG 5c 19 da 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e e3 d2 03 [binary, 4 bytes]
DEBUG:    < PONG 6e e3 d2 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60236 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 9a 16 20 [binary, 4 bytes]
DEBUG:    < PONG 0b 9a 16 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 9f 98 7d [binary, 4 bytes]
DEBUG:    < PONG bd 9f 98 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274801079}' [46 bytes]
2025-09-07 12:53:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274801079}
2025-09-07 12:53:21 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274801079}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 20 1d c0 [binary, 4 bytes]
DEBUG:    < PONG 09 20 1d c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60238 - "OPTIONS /api/v1/chat-threads/threads/167d3ee8-40c6-44bb-be43-93555bdb0ba8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "DELETE /api/v1/chat-threads/threads/167d3ee8-40c6-44bb-be43-93555bdb0ba8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:53:26 - watchfiles.main - DEBUG - 2 changes detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json'), (<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
INFO:     127.0.0.1:60238 - "OPTIONS /api/v1/chat-threads/threads/7fcc14ff-9e8e-4cc9-97c5-72e78583730f HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "DELETE /api/v1/chat-threads/threads/7fcc14ff-9e8e-4cc9-97c5-72e78583730f HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "OPTIONS /api/v1/chat-threads/threads/0ff2aacd-69e9-490c-8a9c-cd580fefcceb HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "DELETE /api/v1/chat-threads/threads/0ff2aacd-69e9-490c-8a9c-cd580fefcceb HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:53:26 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e fc e7 3d [binary, 4 bytes]
DEBUG:    < PONG 6e fc e7 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60238 - "OPTIONS /api/v1/chat-threads/threads/742d3945-e688-4f10-a751-5a34e1d02807 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "DELETE /api/v1/chat-threads/threads/742d3945-e688-4f10-a751-5a34e1d02807 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
2025-09-07 12:53:27 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
INFO:     127.0.0.1:60238 - "OPTIONS /api/v1/chat-threads/threads/f86136cf-7d31-431b-a0ca-cee0e47e3abf HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "DELETE /api/v1/chat-threads/threads/f86136cf-7d31-431b-a0ca-cee0e47e3abf HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60238 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:53:27 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/data/chat_threads.json')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea ec 70 31 [binary, 4 bytes]
DEBUG:    < PONG ea ec 70 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 33 60 ab [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274807652}' [46 bytes]
DEBUG:    < PONG ec 33 60 ab [binary, 4 bytes]
2025-09-07 12:53:27 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274807652}
2025-09-07 12:53:27 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274807652}
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:53:28 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:53:28 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:53:28 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:53:28 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    = connection is CONNECTING
INFO:     127.0.0.1:60243 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ZiEX5gC+CH7PovsLrAm0yQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60245) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:53:28 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:53:28 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:28.289562"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:28.289562"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:28.289562"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: V/la9RDAQAXb1y7oNGfPQbhMNXI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:53:27 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:28.289562"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:28.289562"}' [128 bytes]
INFO:     127.0.0.1:60247 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:53:28 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:53:28 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:53:28 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:53:28 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60249 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60249 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 4WTtohtcFzVe4hiI+YC+tg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60251) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:53:29 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:53:29 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 3CUS0u115tJEZNR5ZgqcW8pUUJs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:53:28 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:29.160981"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 d8 78 50 [binary, 4 bytes]
DEBUG:    < PONG 58 d8 78 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 e2 f3 47 [binary, 4 bytes]
DEBUG:    < PONG 57 e2 f3 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
2025-09-07 12:53:31 - watchfiles.main - DEBUG - 1 change detected: {(<Change.modified: 2>, '/Users/naman/Enculture-Intelligence-Platform/backend/.DS_Store')}
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 51 9a 78 [binary, 4 bytes]
DEBUG:    < PONG bf 51 9a 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60263 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CLOSED
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Lpi7C4Hx9DudnHcc4tJseA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60264) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:53:41 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:53:41 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:41.057300"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:41.057300"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: LSd51P+nS/iyapnOO+mItfcDQcw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:53:40 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:41.057300"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:41.057300"}' [128 bytes]
2025-09-07 12:53:41 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:53:41 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:41.057300"}' [128 bytes]
2025-09-07 12:53:41 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:53:41 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:53:41 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:53:41 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60265 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:53:42 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:53:42 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:53:42 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:53:42 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60269 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Gm+7205RS2b4QKfd+jOtpg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60273) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:53:42 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:53:42 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: jTqzxvUJYk9sp+Cdu1WcD0xrEew=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:53:42 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:42.167864"}' [128 bytes]
INFO:     127.0.0.1:60271 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: jTrJRqCY5dfxqWxqIgcACw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60277) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:53:44 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:53:44 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:44.449946"}' [128 bytes]
2025-09-07 12:53:44 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:53:44 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:44.449946"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
INFO:     127.0.0.1:60279 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:53:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:53:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:53:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:53:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 0QarUnC1+Nnlr7m/bebm5OwEwQM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:53:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    x half-closing TCP connection
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:44.449946"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60283 - "GET /health HTTP/1.1" 200 OK
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CONNECTING
INFO:     127.0.0.1:60281 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    x half-closing TCP connection
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: bmClhUzmOcLup0EjZpCHrQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60287) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:53:44 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:53:44 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
INFO:     connection closed
2025-09-07 12:53:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:53:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:53:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:53:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gcyMJDtTBKyf6l7GLWY+OTwrBVQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:53:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:44.526098"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     127.0.0.1:60285 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d 9f 24 de [binary, 4 bytes]
DEBUG:    < PONG 3d 9f 24 de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d a3 53 26 [binary, 4 bytes]
DEBUG:    < PONG 2d a3 53 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: nX+U7+mFyXaBuxiGZ9iFGg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60293) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:53:47 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:53:47 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:47.579135"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:47.579135"}' [128 bytes]
2025-09-07 12:53:47 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:53:47 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:47.579135"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:47.579135"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: MzhwK8H6Mua06TFR8gPay7rpWxo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:53:47 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:47.579135"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 28 0d 84 [binary, 4 bytes]
DEBUG:    < PONG 91 28 0d 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: O0hoE6OqVbQhsZoOobNtkw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60296) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:53:48 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:53:48 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:53:48 - app.services.websocket_manager - ERROR - Error sending message to sarah_johnson: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:53:48 - app.services.websocket_manager - ERROR - Error sending message to sarah_johnson: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: NIqaGZ+rkc06eadnqMt9WK063zw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:53:48 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:53:48.624338"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e 75 1d 36 [binary, 4 bytes]
DEBUG:    < PONG 9e 75 1d 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'b0v}' [text, 4 bytes]
DEBUG:    < PONG 'b0v}' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 6c b0 d8 [binary, 4 bytes]
DEBUG:    < PONG 21 6c b0 d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 02 b2 21 [binary, 4 bytes]
DEBUG:    < PONG cd 02 b2 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 49 97 7e [binary, 4 bytes]
DEBUG:    < PONG c8 49 97 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 2a ac f9 [binary, 4 bytes]
DEBUG:    < PONG 86 2a ac f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 f4 18 22 [binary, 4 bytes]
DEBUG:    < PONG 50 f4 18 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 64 97 67 [binary, 4 bytes]
DEBUG:    < PONG 12 64 97 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 7c 63 b9 [binary, 4 bytes]
DEBUG:    < PONG 60 7c 63 b9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 58 51 cd [binary, 4 bytes]
DEBUG:    < PONG 3e 58 51 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60311 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60314 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 d1 20 93 [binary, 4 bytes]
DEBUG:    < PONG 58 d1 20 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274858137}' [46 bytes]
2025-09-07 12:54:18 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274858137}
2025-09-07 12:54:18 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274858137}
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274858640}' [46 bytes]
2025-09-07 12:54:18 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274858640}
2025-09-07 12:54:18 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274858640}
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 83 73 9c [binary, 4 bytes]
DEBUG:    < PONG dd 83 73 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 ad f4 92 [binary, 4 bytes]
DEBUG:    < PONG 80 ad f4 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c f8 16 48 [binary, 4 bytes]
DEBUG:    < PONG 0c f8 16 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 bd d7 04 [binary, 4 bytes]
DEBUG:    < PONG 42 bd d7 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING "0't-" [text, 4 bytes]
DEBUG:    < PONG "0't-" [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 76 58 8e [binary, 4 bytes]
DEBUG:    < PONG e9 76 58 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a 0d ef f0 [binary, 4 bytes]
DEBUG:    < PONG 5a 0d ef f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed b3 42 c8 [binary, 4 bytes]
DEBUG:    < PONG ed b3 42 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60332 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60334 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 a0 01 43 [binary, 4 bytes]
DEBUG:    < PONG 67 a0 01 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 3b 12 c3 [binary, 4 bytes]
DEBUG:    < PONG f6 3b 12 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 6b 55 e8 [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274887608}' [46 bytes]
DEBUG:    < PONG cd 6b 55 e8 [binary, 4 bytes]
2025-09-07 12:54:47 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274887608}
2025-09-07 12:54:47 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274887608}
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df e4 ec 53 [binary, 4 bytes]
DEBUG:    < PONG df e4 ec 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274888633}' [46 bytes]
2025-09-07 12:54:48 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274888633}
2025-09-07 12:54:48 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274888633}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'r4#"' [text, 4 bytes]
DEBUG:    < PONG 'r4#"' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 49 fe 0d [binary, 4 bytes]
DEBUG:    < PONG d8 49 fe 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 9a 52 e4 [binary, 4 bytes]
DEBUG:    < PONG 6c 9a 52 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 23 79 bf [binary, 4 bytes]
DEBUG:    < PONG 60 23 79 bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60342 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 3UR8m9sT6hRS/H7cngwffw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60346) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:54:58 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:54:58 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:54:58.559725"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:54:58.559725"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:54:58.559725"}' [128 bytes]
2025-09-07 12:54:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:54:58 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:54:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:54:58 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: U3NPUZQpjNFAFoR9659JjeH+C20=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:54:58 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60344 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:54:58.559725"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:54:59 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:54:59 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:54:59 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:54:59 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60349 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: CJULO1WMVGAA+UMJ2U1i3Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60351) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:54:59 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:54:59 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
INFO:     127.0.0.1:60349 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Tdkw/vfXtyBNp9dLZCYHNtw8gdY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:54:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:54:59.864580"}' [128 bytes]
DEBUG:    = connection is CONNECTING
INFO:     127.0.0.1:60344 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: BLxAH1bkorAE4elDLPJIuw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60353) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:55:00 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:55:00 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: tL2pIRtf6BxJg9JPyLvaja8Xgdw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:54:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:00.140597"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:00.140597"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:00.140597"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:00.140597"}' [128 bytes]
2025-09-07 12:55:00 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:55:00 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:00.140597"}' [128 bytes]
INFO:     127.0.0.1:60342 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:55:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:55:01 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:55:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:55:01 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60349 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: CZlkKjQ1gj1sxvpM/h1kAg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60357) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:55:01 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:55:01 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: JYvWYnx3Hsp9waHKj9b3gyP5EvY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:55:00 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60356 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:01.371487"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 2d 04 0b [binary, 4 bytes]
DEBUG:    < PONG 9d 2d 04 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 7c a8 44 [binary, 4 bytes]
DEBUG:    < PONG 94 7c a8 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 05 81 35 [binary, 4 bytes]
DEBUG:    < PONG d5 05 81 35 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 c7 ad 8c [binary, 4 bytes]
DEBUG:    < PONG 58 c7 ad 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:55:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:55:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:55:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:55:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60376 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: wWB7CqFoMe4mFXjCcWhBzg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60378) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:55:10 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:55:10 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:10.700106"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:10.700106"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: CNfrxCLaYT2rRsHX871t8RcwEsI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:55:09 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60377 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:10.700106"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:10.700106"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:10.700106"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 13 5f 0b [binary, 4 bytes]
DEBUG:    < PONG ef 13 5f 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:55:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:55:10 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:55:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:55:10 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60381 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60382 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: UfXm7uRlYbxV47INZ8ybjg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60384) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:55:10 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:55:10 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QpKDabO1cN3jFzb80vUgm1Nin9k=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:55:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:55:10.883162"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 33 48 c3 [binary, 4 bytes]
DEBUG:    < PONG fa 33 48 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 c7 29 fc [binary, 4 bytes]
DEBUG:    < PONG b0 c7 29 fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 eb cb fd [binary, 4 bytes]
DEBUG:    < PONG 23 eb cb fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ' VÒ¢' [text, 4 bytes]
DEBUG:    < PONG ' VÒ¢' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f ef 50 5d [binary, 4 bytes]
DEBUG:    < PONG 1f ef 50 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 7e 5b 68 [binary, 4 bytes]
DEBUG:    < PONG 8f 7e 5b 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 83 44 ca [binary, 4 bytes]
DEBUG:    < PONG 69 83 44 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 91 be 48 [binary, 4 bytes]
DEBUG:    < PONG 86 91 be 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1dÃ³"' [text, 4 bytes]
DEBUG:    < PONG '\x1dÃ³"' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60392 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274940708}' [46 bytes]
2025-09-07 12:55:40 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274940708}
2025-09-07 12:55:40 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274940708}
INFO:     127.0.0.1:60394 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274940946}' [46 bytes]
2025-09-07 12:55:40 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274940946}
2025-09-07 12:55:40 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274940946}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'x QN' [text, 4 bytes]
DEBUG:    < PONG 'x QN' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 90 ca e2 [binary, 4 bytes]
DEBUG:    < PONG d9 90 ca e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 21 a1 a5 [binary, 4 bytes]
DEBUG:    < PONG 22 21 a1 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b 51 55 13 [binary, 4 bytes]
DEBUG:    < PONG 8b 51 55 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea 4b 56 1c [binary, 4 bytes]
DEBUG:    < PONG ea 4b 56 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 e2 75 48 [binary, 4 bytes]
DEBUG:    < PONG 77 e2 75 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 0e d9 4c [binary, 4 bytes]
DEBUG:    < PONG 99 0e d9 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 22 03 85 [binary, 4 bytes]
DEBUG:    < PONG 3e 22 03 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 71 1e 41 [binary, 4 bytes]
DEBUG:    < PONG da 71 1e 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c ab 1c cc [binary, 4 bytes]
DEBUG:    < PONG 5c ab 1c cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 77 08 36 [binary, 4 bytes]
DEBUG:    < PONG 9b 77 08 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 4c 58 d9 [binary, 4 bytes]
DEBUG:    < PONG f5 4c 58 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60400 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274970709}' [46 bytes]
2025-09-07 12:56:10 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274970709}
2025-09-07 12:56:10 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757274970709}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 60 95 da [binary, 4 bytes]
DEBUG:    < PONG 4a 60 95 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 d3 53 6d [binary, 4 bytes]
DEBUG:    < PONG 92 d3 53 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60402 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 fb fb f0 [binary, 4 bytes]
DEBUG:    < PONG b3 fb fb f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757274970946}' [46 bytes]
2025-09-07 12:56:10 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274970946}
2025-09-07 12:56:10 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757274970946}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 8c ec c5 [binary, 4 bytes]
DEBUG:    < PONG 49 8c ec c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 98 26 58 [binary, 4 bytes]
DEBUG:    < PONG 0b 98 26 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 44 02 fb [binary, 4 bytes]
DEBUG:    < PONG d0 44 02 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 8e 9d 23 [binary, 4 bytes]
DEBUG:    < PONG a4 8e 9d 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 47 b5 ca [binary, 4 bytes]
DEBUG:    < PONG b5 47 b5 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:56:29 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:56:29 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:56:29 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:56:29 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60424 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: JJoyc48eGaJTIRPSqsCxKA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60428) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:56:29 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:56:29 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:29.794930"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: z3zx6X/BmcNDvnD7bq6suCBfmIY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:56:28 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
INFO:     127.0.0.1:60426 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:29.794930"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:29.794930"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:29.794930"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:29.794930"}' [128 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60431 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: NULBCAb/5zXa1qKBJilE3g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60434) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:56:29 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:56:29 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: hStT8pjxAjkIcIRTeqxgsD6s/Hc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:56:29 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
2025-09-07 12:56:29 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:56:29 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:56:29 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:56:29 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:29.823932"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     127.0.0.1:60432 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 f0 f9 a5 [binary, 4 bytes]
DEBUG:    < PONG 51 f0 f9 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: +84lH089ahBMMdrIS4zASg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60437) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:56:33 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:56:33 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:56:33 - app.services.websocket_manager - ERROR - Error sending message to sarah_johnson: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:56:33 - app.services.websocket_manager - ERROR - Error sending message to sarah_johnson: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: N4YqIvDBz7XnHEiZpjNE2Q2kpsA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:56:32 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:33.426832"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 51 cb 40 [binary, 4 bytes]
DEBUG:    < PONG f6 51 cb 40 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:56:39 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:56:39 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:56:39 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:56:39 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60444 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: kr7O4zj252tIZVwQS286Fg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60446) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:56:39 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:56:39 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:39.231989"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:39.231989"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:39.231989"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ym9UKMcaXjqED4sa6+YV7d3QSOQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:56:38 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:39.231989"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:39.231989"}' [128 bytes]
INFO:     127.0.0.1:60445 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:56:39 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:56:39 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:56:39 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:56:39 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60452 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: vBL74cQM4y19zPkCsUdU6g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60454) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:56:39 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:56:39 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rk9c94lHedPatAqO71uWsD0zBR8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:56:38 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60453 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:56:39.732966"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 9b 71 a0 [binary, 4 bytes]
DEBUG:    < PONG c9 9b 71 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce f7 0a e4 [binary, 4 bytes]
DEBUG:    < PONG ce f7 0a e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 36 f2 04 [binary, 4 bytes]
DEBUG:    < PONG 67 36 f2 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 96 3e 41 [binary, 4 bytes]
DEBUG:    < PONG 62 96 3e 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 3b 82 b4 [binary, 4 bytes]
DEBUG:    < PONG 88 3b 82 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a ac ab 11 [binary, 4 bytes]
DEBUG:    < PONG 2a ac ab 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 9d 5b c6 [binary, 4 bytes]
DEBUG:    < PONG f1 9d 5b c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 6e ab 42 [binary, 4 bytes]
DEBUG:    < PONG d4 6e ab 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'b2\x15Y' [text, 4 bytes]
DEBUG:    < PONG 'b2\x15Y' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 cf 4d f0 [binary, 4 bytes]
DEBUG:    < PONG c7 cf 4d f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab b1 e6 95 [binary, 4 bytes]
DEBUG:    < PONG ab b1 e6 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60495 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275029241}' [46 bytes]
2025-09-07 12:57:09 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275029241}
2025-09-07 12:57:09 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275029241}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 5b 8c e9 [binary, 4 bytes]
DEBUG:    < PONG 08 5b 8c e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60498 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275029791}' [46 bytes]
2025-09-07 12:57:09 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275029791}
2025-09-07 12:57:09 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275029791}
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 f4 a9 14 [binary, 4 bytes]
DEBUG:    < PONG f8 f4 a9 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 4a 6b 2d [binary, 4 bytes]
DEBUG:    < PONG f4 4a 6b 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 a1 17 67 [binary, 4 bytes]
DEBUG:    < PONG 20 a1 17 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 2e 1f 3f [binary, 4 bytes]
DEBUG:    < PONG 8f 2e 1f 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60510 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: WEEUx92saXc36kMOzaR5QA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60514) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:57:21 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:57:21 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:21.806662"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:21.806662"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:21.806662"}' [128 bytes]
2025-09-07 12:57:21 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:57:21 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:57:21 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:57:21 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:57:21 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:57:21 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gPBaexLGZCABIPw30U8Mpy9N70E=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:57:21 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60512 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:21.806662"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60517 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Gr+6rbLVdBHq5DUJVzmNrQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60520) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:57:22 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:57:22 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:57:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:57:22 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:57:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:57:22 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: RaCkvwOY14kxlXYqk/eS/gB/sIo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:57:21 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:22.246001"}' [128 bytes]
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     127.0.0.1:60519 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: VpTc5gMJP0EaJaNe1udryw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60524) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:57:24 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:57:24 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.830191"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.830191"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.830191"}' [128 bytes]
2025-09-07 12:57:24 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:57:24 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
INFO:     127.0.0.1:60526 - "GET /health HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4voV/BW0Z59GAMf+ej7u32PpiA4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:57:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.830191"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.830191"}' [128 bytes]
INFO:     127.0.0.1:60528 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: a6gzW7YwjFTWrHE+BzJ2Rg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60530) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:57:24 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:57:24 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.864863"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.864863"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: xfbBMeKeGtQXTlfZzcNTZQ4IpR8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:57:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.864863"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.864863"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.864863"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:24.864863"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 32 8e 8b [binary, 4 bytes]
DEBUG:    < PONG 05 32 8e 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60532 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: FHEOIS6vhKy/LDZP9NMUhw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:60532 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 60534) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:57:25 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:57:25 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:57:25 - app.services.websocket_manager - ERROR - Error sending message to sarah_johnson: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:57:25 - app.services.websocket_manager - ERROR - Error sending message to sarah_johnson: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: grm4RqnY6WBHnOn+g+4NlgTOP/A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:57:24 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:25.702221"}' [128 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Tp97vdsGLLNMYELd3wl9iQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60536) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:57:25 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:57:25 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:25.802957"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: HMxwyrmO/Edb5RJ5P9pFSc79PWY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:57:24 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:25.802957"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d f6 a6 7e [binary, 4 bytes]
DEBUG:    < PONG 0d f6 a6 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 f5 0c 87 [binary, 4 bytes]
DEBUG:    < PONG 09 f5 0c 87 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 ad 21 37 [binary, 4 bytes]
DEBUG:    < PONG 26 ad 21 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 cd c5 2d [binary, 4 bytes]
DEBUG:    < PONG f1 cd c5 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60544 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: ZJaP2gsopfg1SAMBOV9Wrg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
2025-09-07 12:57:33 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:57:33 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:57:33 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:57:33 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     ('127.0.0.1', 60546) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:57:33 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:57:33 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:33.789108"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:33.789108"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: DsZz5blECtqj0SBVfoFuLD8wZTI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:57:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:33.789108"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:33.789108"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:33.789108"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:33.789108"}' [128 bytes]
INFO:     127.0.0.1:60545 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:57:33 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:57:33 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:57:33 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:57:33 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60548 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Z9Iy1MoiBXhPOUpmoeLofg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60552) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:57:33 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:57:33 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: NHfsAvrVUHkE1z/hwjZAS14V8d0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:57:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60551 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:33.886047"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:57:33.886047"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ad 18 d8 7f [binary, 4 bytes]
DEBUG:    < PONG ad 18 d8 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 ca 1e 9a [binary, 4 bytes]
DEBUG:    < PONG c5 ca 1e 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 16 bc a1 [binary, 4 bytes]
DEBUG:    < PONG b0 16 bc a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 54 ac 62 [binary, 4 bytes]
DEBUG:    < PONG 94 54 ac 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 85 db d3 [binary, 4 bytes]
DEBUG:    < PONG 47 85 db d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 62 2b de [binary, 4 bytes]
DEBUG:    < PONG 25 62 2b de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 40 10 e3 [binary, 4 bytes]
DEBUG:    < PONG 2f 40 10 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 ab ca d1 [binary, 4 bytes]
DEBUG:    < PONG c7 ab ca d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 b4 5c 31 [binary, 4 bytes]
DEBUG:    < PONG 44 b4 5c 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 48 ad b0 [binary, 4 bytes]
DEBUG:    < PONG ed 48 ad b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING de f8 f9 12 [binary, 4 bytes]
DEBUG:    < PONG de f8 f9 12 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275083792}' [46 bytes]
INFO:     127.0.0.1:60564 - "GET /health HTTP/1.1" 200 OK
2025-09-07 12:58:03 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275083792}
2025-09-07 12:58:03 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275083792}
INFO:     127.0.0.1:60566 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275083901}' [46 bytes]
2025-09-07 12:58:03 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275083901}
2025-09-07 12:58:03 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275083901}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 37 03 c4 [binary, 4 bytes]
DEBUG:    < PONG 11 37 03 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 39 48 b1 [binary, 4 bytes]
DEBUG:    < PONG 4e 39 48 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 ea 5b 19 [binary, 4 bytes]
DEBUG:    < PONG a8 ea 5b 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 8a a4 82 [binary, 4 bytes]
DEBUG:    < PONG 76 8a a4 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 49 a0 5c [binary, 4 bytes]
DEBUG:    < PONG b8 49 a0 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Qnß·' [text, 4 bytes]
DEBUG:    < PONG 'Qnß·' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 2e a1 1a [binary, 4 bytes]
DEBUG:    < PONG b8 2e a1 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 a6 14 68 [binary, 4 bytes]
DEBUG:    < PONG 56 a6 14 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x15=d^' [text, 4 bytes]
DEBUG:    < PONG '\x15=d^' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 f2 a4 c7 [binary, 4 bytes]
DEBUG:    < PONG 91 f2 a4 c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 1f 91 1a [binary, 4 bytes]
DEBUG:    < PONG ab 1f 91 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 ac f4 2a [binary, 4 bytes]
DEBUG:    < PONG 38 ac f4 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 d6 0a 2e [binary, 4 bytes]
DEBUG:    < PONG e5 d6 0a 2e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 44 9a 20 [binary, 4 bytes]
DEBUG:    < PONG 22 44 9a 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 52 8c ae [binary, 4 bytes]
DEBUG:    < PONG e6 52 8c ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 92 c7 ba [binary, 4 bytes]
DEBUG:    < PONG f3 92 c7 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb f1 27 6c [binary, 4 bytes]
DEBUG:    < PONG fb f1 27 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60581 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275113792}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa 9c 9a 77 [binary, 4 bytes]
DEBUG:    < PONG aa 9c 9a 77 [binary, 4 bytes]
2025-09-07 12:58:33 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275113792}
2025-09-07 12:58:33 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275113792}
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60583 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a 90 67 9f [binary, 4 bytes]
DEBUG:    < PONG 7a 90 67 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275113902}' [46 bytes]
2025-09-07 12:58:33 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275113902}
2025-09-07 12:58:33 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275113902}
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 35 3a 86 [binary, 4 bytes]
DEBUG:    < PONG a0 35 3a 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 8c 52 a2 [binary, 4 bytes]
DEBUG:    < PONG 94 8c 52 a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 e8 76 64 [binary, 4 bytes]
DEBUG:    < PONG 46 e8 76 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 0c 9b 25 [binary, 4 bytes]
DEBUG:    < PONG bd 0c 9b 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 1a df 27 [binary, 4 bytes]
DEBUG:    < PONG 96 1a df 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ' È¹2' [text, 4 bytes]
DEBUG:    < PONG ' È¹2' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 7b 98 e5 [binary, 4 bytes]
DEBUG:    < PONG fc 7b 98 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c ba 42 9c [binary, 4 bytes]
DEBUG:    < PONG 5c ba 42 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 4b a0 25 [binary, 4 bytes]
DEBUG:    < PONG fb 4b a0 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 12 b9 3a [binary, 4 bytes]
DEBUG:    < PONG 97 12 b9 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 b3 e1 89 [binary, 4 bytes]
DEBUG:    < PONG 18 b3 e1 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60626 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275143791}' [46 bytes]
2025-09-07 12:59:03 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275143791}
2025-09-07 12:59:03 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275143791}
INFO:     127.0.0.1:60628 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275143903}' [46 bytes]
2025-09-07 12:59:03 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275143903}
2025-09-07 12:59:03 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275143903}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 7a 90 c4 [binary, 4 bytes]
DEBUG:    < PONG 1f 7a 90 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c ff a8 5e [binary, 4 bytes]
DEBUG:    < PONG 2c ff a8 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 cc 57 33 [binary, 4 bytes]
DEBUG:    < PONG 27 cc 57 33 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Fb\x1f7' [text, 4 bytes]
DEBUG:    < PONG 'Fb\x1f7' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 dd 5a ff [binary, 4 bytes]
DEBUG:    < PONG d4 dd 5a ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e fc 47 21 [binary, 4 bytes]
DEBUG:    < PONG 9e fc 47 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 2a e8 e2 [binary, 4 bytes]
DEBUG:    < PONG 7e 2a e8 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 98 70 1f [binary, 4 bytes]
DEBUG:    < PONG 7e 98 70 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 10 a8 b4 [binary, 4 bytes]
DEBUG:    < PONG 2a 10 a8 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 07 00 91 [binary, 4 bytes]
DEBUG:    < PONG 91 07 00 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x04i\x04u' [text, 4 bytes]
DEBUG:    < PONG '\x04i\x04u' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 19 13 22 [binary, 4 bytes]
DEBUG:    < PONG cb 19 13 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 65 57 51 [binary, 4 bytes]
DEBUG:    < PONG 88 65 57 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 9b 05 91 [binary, 4 bytes]
DEBUG:    < PONG ac 9b 05 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 7a 4c cd [binary, 4 bytes]
DEBUG:    < PONG 1f 7a 4c cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc d3 55 6a [binary, 4 bytes]
DEBUG:    < PONG dc d3 55 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 a5 f8 ef [binary, 4 bytes]
DEBUG:    < PONG 75 a5 f8 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60645 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275173792}' [46 bytes]
2025-09-07 12:59:33 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275173792}
2025-09-07 12:59:33 - app.api.v1.endpoints.websocket - INFO - Received message from emily_rodriguez: {"type":"heartbeat","timestamp":1757275173792}
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 a0 a4 2f [binary, 4 bytes]
DEBUG:    < PONG 28 a0 a4 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60647 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"heartbeat","timestamp":1757275173902}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 fb 5c 36 [binary, 4 bytes]
2025-09-07 12:59:33 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275173902}
2025-09-07 12:59:33 - app.api.v1.endpoints.websocket - INFO - Received message from sarah_johnson: {"type":"heartbeat","timestamp":1757275173902}
DEBUG:    < PONG b6 fb 5c 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db af 95 32 [binary, 4 bytes]
DEBUG:    < PONG db af 95 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:59:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:59:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:59:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:59:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60667 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: HAQWJi9lLjZVIFAunQLe8g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60670) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:59:44 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:59:44 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:44.755161"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:44.755161"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7IBYgLGpeSoEZF9hU+WWsUoaCHk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:59:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60669 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:44.755161"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:44.755161"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:44.755161"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:44.755161"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 4d e3 00 [binary, 4 bytes]
DEBUG:    < PONG 81 4d e3 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:59:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:59:44 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:59:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:59:44 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60673 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: nx7lKH1bd50B0PkrlhP+qg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60676) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:59:44 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:59:44 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4JAL8QwUu+87IzJf3E20S9jhbtY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:59:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:44.897641"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:44.897641"}' [128 bytes]
INFO:     127.0.0.1:60675 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a 77 69 d4 [binary, 4 bytes]
DEBUG:    < PONG 7a 77 69 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 3c 1c b2 [binary, 4 bytes]
DEBUG:    < PONG a4 3c 1c b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d 19 8f 01 [binary, 4 bytes]
DEBUG:    < PONG 0d 19 8f 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 87 68 f4 [binary, 4 bytes]
DEBUG:    < PONG 36 87 68 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '}V\x10\x1c' [text, 4 bytes]
DEBUG:    < PONG '}V\x10\x1c' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 86 c0 1b [binary, 4 bytes]
DEBUG:    < PONG f1 86 c0 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:59:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:59:52 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:59:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:59:52 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60682 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /XDAqBEWuoFHdIqux97aKw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60685) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:59:52 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:59:52 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:52.518078"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:52.518078"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Q/ae4hKUWytUWcPVZCqQWyRkb1c=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:59:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:52.518078"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:52.518078"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:52.518078"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:52.518078"}' [128 bytes]
INFO:     127.0.0.1:60684 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:59:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:59:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60687 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 03PqtW++uz8a711J2eQUDQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60689) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
INFO:     127.0.0.1:60687 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Q8jfNbdTdLVIhjp+aA3FJT5ILt0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:59:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:53.262073"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:53.262073"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
INFO:     127.0.0.1:60684 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: WeT3QK009ez+eIqzlQfjSw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    = connection is CONNECTING
DEBUG:    x half-closing TCP connection
INFO:     ('127.0.0.1', 60692) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:53.768072"}' [128 bytes]
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60687 - "GET /health HTTP/1.1" 200 OK
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: UlgmLvX9EVZQoMHGpRmSTw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Or1v/KV3HzYBZGmuTfYqvfrVZ98=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:59:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     ('127.0.0.1', 60694) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 9MGoruV50Hg9Q0p1gQSbuNL7ktA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:59:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60682 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:53.774843"}' [128 bytes]
2025-09-07 12:59:53 - app.services.websocket_manager - ERROR - Error sending message to sarah_johnson: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:59:53 - app.services.websocket_manager - ERROR - Error sending message to sarah_johnson: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:53.774843"}' [128 bytes]
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 12:59:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:59:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 12:59:53 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
2025-09-07 12:59:53 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: received 1000 (OK) Manual disconnect; then sent 1000 (OK) Manual disconnect
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 247, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 75, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 341, in handle
    await self.app(scope, receive, send)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 82, in app
    await func(session)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 325, in app
    await dependant.call(**values)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/api/v1/endpoints/websocket.py", line 16, in websocket_endpoint
    await websocket_manager.connect(websocket, user_id)
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 35, in connect
    await self.send_personal_message({
  File "/Users/naman/Enculture-Intelligence-Platform/backend/app/services/websocket_manager.py", line 62, in send_personal_message
    for connection in self.active_connections[user_id]:
RuntimeError: Set changed size during iteration
INFO:     connection closed
DEBUG:    = connection is CLOSED
INFO:     127.0.0.1:60696 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    ! failing connection with code 1006
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:59:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 12:59:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 12:59:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: CzXPs52WNOzr4+eypCJUMw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60698) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 12:59:56 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 12:59:56 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:56.783826"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:56.783826"}' [128 bytes]
2025-09-07 12:59:56 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-09-07 12:59:56 - app.services.websocket_manager - ERROR - Error sending message to emily_rodriguez: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:56.783826"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: jBnYp4aN/DMSYB3jP+RkIZZvyfM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 19:59:56 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:56.783826"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:56.783826"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T12:59:56.783826"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 96 3c 30 [binary, 4 bytes]
DEBUG:    < PONG 59 96 3c 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:02 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:02 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:02 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 13:00:02 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60703 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: VpGsZt4cPMbhXfwkAKbBwA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60706) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 13:00:02 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 13:00:02 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:02.810456"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:02.810456"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: mwbbtu9BQtxAE3JVXMRDMXnUSNY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:02 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60705 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:02.810456"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:02.810456"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:02.810456"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:02.810456"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:03 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:03 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:03 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 13:00:03 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60708 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /RbE/sVImFioxmwNTRytsQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60710) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 13:00:03 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 13:00:03 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
INFO:     127.0.0.1:60708 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: brGIvpzGkLSC/koPdRnX+Y/x/vk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:02 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:03.421852"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:03.421852"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 13:00:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60705 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: //rrfI7ZFpZkJ7pFCNo2XQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60712) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 13:00:04 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 13:00:04 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:04.595896"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:04.595896"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:04.595896"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: LMPmAcYa1FseR1o+Ez7dFOGf+8M=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:03 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60703 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:04.595896"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:04.595896"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:04.595896"}' [128 bytes]
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:04 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 13:00:04 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60708 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: 1tpai/MaHne5UCBbwWq5vg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60716) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 13:00:04 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 13:00:04 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: XOT6Wo4G+/ujk7ZtVPuTU7ePQz8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
INFO:     127.0.0.1:60714 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:04.818816"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:04.818816"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 85 0f 1f [binary, 4 bytes]
DEBUG:    < PONG af 85 0f 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 3e d8 f9 [binary, 4 bytes]
DEBUG:    < PONG fb 3e d8 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 16 84 39 [binary, 4 bytes]
DEBUG:    < PONG f9 16 84 39 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 bd e0 fd [binary, 4 bytes]
DEBUG:    < PONG 22 bd e0 fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc b7 4b 5e [binary, 4 bytes]
DEBUG:    < PONG fc b7 4b 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 fd a0 56 [binary, 4 bytes]
DEBUG:    < PONG c9 fd a0 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '-g\tI' [text, 4 bytes]
DEBUG:    < PONG '-g\tI' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 92 63 34 [binary, 4 bytes]
DEBUG:    < PONG a3 92 63 34 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:23 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 13:00:23 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60722 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: /uYEhF2W/YI+uQXWEQrYbw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60725) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 13:00:23 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 13:00:23 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:23.791049"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:23.791049"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:23.791049"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:23.791049"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: xnHeBnAoBMf6BnX2jOmbqSNa7vg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:23.791049"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:23.791049"}' [128 bytes]
INFO:     127.0.0.1:60724 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:24 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:24 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:24 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 13:00:24 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60727 - "GET /health HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING '7\x08\x1b.' [text, 4 bytes]
DEBUG:    < PONG '7\x08\x1b.' [text, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:60727 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: dyNY/4ddZk2ftginWT9cfg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60729) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 13:00:24 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 13:00:24 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: p7rp300xV62FbVg3qeaZR01TKUo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:24.924642"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:24.924642"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 89 4b bf [binary, 4 bytes]
DEBUG:    < PONG d8 89 4b bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:25 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 13:00:25 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60724 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: fehLQ8QF8lnye3oNE+cKOQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60732) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 13:00:25 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 13:00:25 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:25.668483"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:25.668483"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: YWFmQJsaHDTuHkhFtzInedqANQw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:25.668483"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:25.668483"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:25.668483"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:25.668483"}' [128 bytes]
INFO:     127.0.0.1:60722 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 a4 13 45 [binary, 4 bytes]
DEBUG:    < PONG 81 a4 13 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:26 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:26 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:26 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 13:00:26 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60727 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60734 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: Tli8JwjPbXnqtcusWgTOGQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60736) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 13:00:26 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 13:00:26 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: G0BIC1d1UwlMCXsqwMy4iE2WYvo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:26 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:26.195042"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:26.195042"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 fa 2a 14 [binary, 4 bytes]
DEBUG:    < PONG 69 fa 2a 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 66 34 ee [binary, 4 bytes]
DEBUG:    < PONG 84 66 34 ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2b 11 27 8e [binary, 4 bytes]
DEBUG:    < PONG 2b 11 27 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 14 0e 96 [binary, 4 bytes]
DEBUG:    < PONG 8c 14 0e 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:36 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 13:00:36 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
INFO:     127.0.0.1:60742 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/emily_rodriguez HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: VFyRZT25L5YXKf/zmjRYHw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60744) - "WebSocket /api/v1/notifications/ws/emily_rodriguez" [accepted]
2025-09-07 13:00:36 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
2025-09-07 13:00:36 - app.services.websocket_manager - INFO - WebSocket connection established for user emily_rodriguez
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:36.595383"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:36.595383"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:36.595383"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:36.595383"}' [128 bytes]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Z1BVSPSJWwYpzDi3Qth9BJ+I1vU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:36 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:36.595383"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:36.595383"}' [128 bytes]
INFO:     127.0.0.1:60743 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
2025-09-07 13:00:37 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:37 - app.services.websocket_manager - INFO - WebSocket connection closed for user sarah_johnson
2025-09-07 13:00:37 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
2025-09-07 13:00:37 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user sarah_johnson
INFO:     connection closed
INFO:     127.0.0.1:60748 - "GET /health HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/sarah_johnson HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: lotSeuX+jPQx/mYdzX+MOg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60751) - "WebSocket /api/v1/notifications/ws/sarah_johnson" [accepted]
2025-09-07 13:00:37 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
2025-09-07 13:00:37 - app.services.websocket_manager - INFO - WebSocket connection established for user sarah_johnson
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: F48CrKIh+HDsDcjagWTEm892qRI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:37.481155"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:37.481155"}' [128 bytes]
INFO:     127.0.0.1:60750 - "GET /api/v1/chat-threads/threads/recent?limit=10 HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 d8 37 2f [binary, 4 bytes]
DEBUG:    < PONG 73 d8 37 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1e\x008V' [text, 4 bytes]
DEBUG:    < PONG '\x1e\x008V' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 1c 1b e0 [binary, 4 bytes]
DEBUG:    < PONG 72 1c 1b e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 d2 e8 fb [binary, 4 bytes]
DEBUG:    < PONG 93 d2 e8 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 6a ed 0e [binary, 4 bytes]
DEBUG:    < PONG 62 6a ed 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 55 fd 2a [binary, 4 bytes]
DEBUG:    < PONG 06 55 fd 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 8b 89 86 [binary, 4 bytes]
DEBUG:    < PONG 64 8b 89 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 18 75 19 [binary, 4 bytes]
DEBUG:    < PONG e4 18 75 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1000 (OK) Manual disconnect [19 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /api/v1/notifications/ws/michael_chen HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en;q=0.9
DEBUG:    < sec-websocket-key: nML+WbNCQ33rBpynBIQhmQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60758) - "WebSocket /api/v1/notifications/ws/michael_chen" [accepted]
2025-09-07 13:00:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 13:00:53 - app.services.websocket_manager - INFO - WebSocket connection established for user michael_chen
2025-09-07 13:00:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:53 - app.services.websocket_manager - INFO - WebSocket connection closed for user emily_rodriguez
2025-09-07 13:00:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
2025-09-07 13:00:53 - app.api.v1.endpoints.websocket - INFO - WebSocket disconnected for user emily_rodriguez
INFO:     connection closed
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ZNy8ggt25u+PxYrRcNLZqau2rrY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Sun, 07 Sep 2025 20:00:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:53.060892"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:53.060892"}' [128 bytes]
DEBUG:    > TEXT '{"type": "connection_established", "message": "...09-07T13:00:53.060892"}' [128 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'ê­°<' [text, 4 bytes]
DEBUG:    < PONG 'ê­°<' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 1c f6 c3 [binary, 4 bytes]
DEBUG:    < PONG 46 1c f6 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
